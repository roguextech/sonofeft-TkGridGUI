<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
    <head>
<title>target_tk_app_def.py</title>

<style type="text/css">
@media print { body { -webkit-print-color-adjust: exact; font-size: 9pt; } }
</style>

<style type="text/css">

pre
{
    font-face: verdana, arial, helvetica, sans-serif;
    font-size: 1.2em;
    
    word-break: break-all; /* webkit /
    white-space: pre;
    white-space: pre\9; / IE7+ */   

    white-space: pre-wrap;       /* css-3 */
    white-space: -moz-pre-wrap;  /* Mozilla, since 1999 */
    white-space: -pre-wrap;      /* Opera 4-6 */
    white-space: -o-pre-wrap;    /* Opera 7 */
    word-wrap: break-word;       /* Internet Explorer 5.5+ */

}
.token_number
{
    color: #0077b3;
    font-weight:500;
}
.token_op
{
    color: #000000;
    font-weight:bold;
}
.token_string
{
    color: #cc0000;
    font-weight:500;
}
.token_comment
{
    color: #007F00;
    font-weight:500;
}
.token_name
{
    color: #000000;
    font-weight:500;
}
.token_error
{
    color: #e40000;
    font-weight:500;
}
.keyword
{
    color: blue;
    font-weight:bold;
}
.text
{
    color: #000000;
    font-weight:500;
}

</style>
<body><h2>target_tk_app_def.py</h2>
<pre><font face="Lucida,Courier New">
directory : D:\2018_py_proj\TkGridGUI\tkgridgui
Line Count : 1071
Line Clip Size : No Clipping

<strong style="background-color:#ffe0e0">tab_of_notebook_changed</strong>  <strong style="background-color:#b4ffb2">Word</strong> <strong style="background-color:#b4ffb2">MatchCase</strong> <strong style="background-color:yellow">(1)</strong> <A href="#line805">805</A> <BR>
<a name="line1"><span class="token_number">   1 </span></a><span class="token_comment">#!/usr/bin/env python</span>
<a name="line2"><span class="token_number">   2 </span></a><span class="token_comment"># -*- coding: ascii -*-</span>
<a name="line3"><span class="token_number">   3 </span></a><span class="keyword">from</span> <span class="token_name">__future__</span> <span class="keyword">import</span> <span class="token_name">print_function</span>
<a name="line4"><span class="token_number">   4 </span></a><span class="keyword">from</span> <span class="token_name">__future__</span> <span class="keyword">import</span> <span class="token_name">unicode_literals</span>
<a name="line5"><span class="token_number">   5 </span></a>
<a name="line6"><span class="token_number">   6 </span></a><span class="keyword">from</span> <span class="token_name">future</span> <span class="keyword">import</span> <span class="token_name">standard_library</span>
<a name="line7"><span class="token_number">   7 </span></a><span class="token_name">standard_library</span><span class="token_op">.</span><span class="token_name">install_aliases</span><span class="token_op">()</span>
<a name="line8"><span class="token_number">   8 </span></a><span class="keyword">from</span> <span class="token_name">builtins</span> <span class="keyword">import</span> <span class="token_name">range</span>
<a name="line9"><span class="token_number">   9 </span></a><span class="keyword">from</span> <span class="token_name">builtins</span> <span class="keyword">import</span> <span class="token_name">object</span>
<a name="line10"><span class="token_number">  10 </span></a><span class="keyword">from</span> <span class="token_name">builtins</span> <span class="keyword">import</span> <span class="token_name">str</span>
<a name="line11"><span class="token_number">  11 </span></a><span class="token_string">"""</span>
<a name="line12"><span class="token_number">  12 </span></a><span class="token_string">Define the target TK Application</span>
<a name="line13"><span class="token_number">  13 </span></a>
<a name="line14"><span class="token_number">  14 </span></a><span class="token_string">Holds values of all controls on main GUI (grid_gui.GridGUI).</span>
<a name="line15"><span class="token_number">  15 </span></a><span class="token_string">Provides Read and Save routines for full GUI definition.</span>
<a name="line16"><span class="token_number">  16 </span></a>
<a name="line17"><span class="token_number">  17 </span></a><span class="token_string">Has not only widget types and locations from grid_notebook.NotebookGridDes,</span>
<a name="line18"><span class="token_number">  18 </span></a><span class="token_string">  but also any additional property assignments that were made by EditWin.</span>
<a name="line19"><span class="token_number">  19 </span></a><span class="token_string">"""</span>
<a name="line20"><span class="token_number">  20 </span></a>
<a name="line21"><span class="token_number">  21 </span></a><span class="keyword">import</span> <span class="token_name">os</span>
<a name="line22"><span class="token_number">  22 </span></a><span class="keyword">import</span> <span class="token_name">sys</span>
<a name="line23"><span class="token_number">  23 </span></a><span class="keyword">import</span> <span class="token_name">binascii</span>
<a name="line24"><span class="token_number">  24 </span></a>
<a name="line25"><span class="token_number">  25 </span></a>    
<a name="line26"><span class="token_number">  26 </span></a><span class="keyword">from</span> <span class="token_name">tkinter</span> <span class="keyword">import</span> <span class="token_op">*</span>
<a name="line27"><span class="token_number">  27 </span></a><span class="keyword">import</span> <span class="token_name">tkinter</span><span class="token_op">.</span><span class="token_name">messagebox</span>
<a name="line28"><span class="token_number">  28 </span></a><span class="keyword">from</span> <span class="token_name">tkinter</span> <span class="keyword">import</span> <span class="token_name">Button</span><span class="token_op">,</span> <span class="token_name">Canvas</span><span class="token_op">,</span> <span class="token_name">Checkbutton</span><span class="token_op">,</span> <span class="token_name">Entry</span><span class="token_op">,</span> <span class="token_name">Frame</span><span class="token_op">,</span> <span class="token_name">Label</span><span class="token_op">,</span> <span class="token_name">LabelFrame</span>
<a name="line29"><span class="token_number">  29 </span></a><span class="keyword">from</span> <span class="token_name">tkinter</span> <span class="keyword">import</span> <span class="token_name">Listbox</span><span class="token_op">,</span> <span class="token_name">Message</span><span class="token_op">,</span> <span class="token_name">Radiobutton</span><span class="token_op">,</span> <span class="token_name">Spinbox</span><span class="token_op">,</span> <span class="token_name">Text</span>
<a name="line30"><span class="token_number">  30 </span></a><span class="keyword">from</span> <span class="token_name">tkinter</span> <span class="keyword">import</span> <span class="token_name">OptionMenu</span> <span class="token_comment"># ttk OptionMenu seems to be broken</span>
<a name="line31"><span class="token_number">  31 </span></a><span class="keyword">from</span> <span class="token_name">tkinter</span><span class="token_op">.</span><span class="token_name">ttk</span> <span class="keyword">import</span> <span class="token_name">Combobox</span><span class="token_op">,</span> <span class="token_name">Progressbar</span><span class="token_op">,</span> <span class="token_name">Separator</span><span class="token_op">,</span> <span class="token_name">Treeview</span><span class="token_op">,</span> <span class="token_name">Style</span><span class="token_op">,</span> <span class="token_name">Notebook</span>
<a name="line32"><span class="token_number">  32 </span></a>    
<a name="line33"><span class="token_number">  33 </span></a><span class="keyword">from</span> <span class="token_name">tkgridgui</span><span class="token_op">.</span><span class="token_name">edit_options</span> <span class="keyword">import</span> <span class="token_name">get_properties_dict</span><span class="token_op">,</span> <span class="token_name">set_attribute_if_possible</span>
<a name="line34"><span class="token_number">  34 </span></a><span class="keyword">from</span> <span class="token_name">tkgridgui</span><span class="token_op">.</span><span class="token_name">edit_Dialog</span> <span class="keyword">import</span> <span class="token_name">Edit_Properties_Dialog</span>
<a name="line35"><span class="token_number">  35 </span></a>
<a name="line36"><span class="token_number">  36 </span></a><span class="keyword">from</span> <span class="token_name">tkgridgui</span><span class="token_op">.</span><span class="token_name">grid_notebook</span> <span class="keyword">import</span> <span class="token_name">ContainerControlsL</span><span class="token_op">,</span> <span class="token_name">intCast</span>
<a name="line37"><span class="token_number">  37 </span></a><span class="keyword">from</span> <span class="token_name">tkgridgui</span><span class="token_op">.</span><span class="token_name">config_file</span> <span class="keyword">import</span> <span class="token_name">ConfigInterface</span>
<a name="line38"><span class="token_number">  38 </span></a><span class="keyword">from</span> <span class="token_name">tkgridgui</span><span class="token_op">.</span><span class="token_name">comp_tree</span> <span class="keyword">import</span> <span class="token_name">CNode</span><span class="token_op">,</span> <span class="token_name">ComponentTree</span>
<a name="line39"><span class="token_number">  39 </span></a><span class="keyword">from</span> <span class="token_name">tkgridgui</span><span class="token_op">.</span><span class="token_name">preview_win_widgets</span> <span class="keyword">import</span> <span class="token_name">PW_Widget</span><span class="token_op">,</span> <span class="token_name">SCROLL_Y_WIDGETS</span><span class="token_op">,</span> <span class="token_name">SCROLL_X_WIDGETS</span><span class="token_op">,</span> <span class="token_name">tkWidgetsD</span>
<a name="line40"><span class="token_number">  40 </span></a>
<a name="line41"><span class="token_number">  41 </span></a><span class="token_comment"># the "width" property of these widgets refers to character width.</span>
<a name="line42"><span class="token_number">  42 </span></a><span class="token_name">TEXT_WIDTH_WIDGETS</span> <span class="token_op">=</span> <span class="token_name">set</span><span class="token_op">([</span><span class="token_string">'Button'</span><span class="token_op">,</span><span class="token_string">'Checkbutton'</span><span class="token_op">,</span><span class="token_string">'Combobox'</span><span class="token_op">,</span><span class="token_string">'Entry'</span><span class="token_op">,</span><span class="token_string">'Label'</span><span class="token_op">,</span>  <span class="token_comment">#'Listbox',</span>
<a name="line43"><span class="token_number">  43 </span></a>                          <span class="token_string">'Radiobutton'</span><span class="token_op">,</span><span class="token_string">'Spinbox'</span><span class="token_op">,</span><span class="token_string">'Text'</span><span class="token_op">,</span><span class="token_string">"Message"</span><span class="token_op">,</span> <span class="token_string">"Menubutton"</span><span class="token_op">,</span> <span class="token_string">"Tab"</span><span class="token_op">])</span>
<a name="line44"><span class="token_number">  44 </span></a>
<a name="line45"><span class="token_number">  45 </span></a><span class="token_name">reqd_variable_typeD</span> <span class="token_op">=</span> <span class="token_op">{</span><span class="token_string">'Entry'</span><span class="token_op">:</span><span class="token_string">'StringVar'</span><span class="token_op">,</span> <span class="token_string">'OptionMenu'</span><span class="token_op">:</span><span class="token_string">'StringVar'</span><span class="token_op">,</span> <span class="token_string">'Combobox'</span><span class="token_op">:</span><span class="token_string">'StringVar'</span><span class="token_op">,</span> 
<a name="line46"><span class="token_number">  46 </span></a>                       <span class="token_string">'Checkbutton'</span><span class="token_op">:</span><span class="token_string">'StringVar'</span><span class="token_op">,</span> <span class="token_string">'Menubutton'</span><span class="token_op">:</span><span class="token_string">'StringVar'</span><span class="token_op">,</span>
<a name="line47"><span class="token_number">  47 </span></a>                       <span class="token_string">'Radiobutton'</span><span class="token_op">:</span><span class="token_string">'StringVar'</span><span class="token_op">,</span> <span class="token_string">'Scale'</span><span class="token_op">:</span><span class="token_string">'StringVar'</span><span class="token_op">}</span>
<a name="line48"><span class="token_number">  48 </span></a>
<a name="line49"><span class="token_number">  49 </span></a><span class="token_name">DEBUG_PRINT</span> <span class="token_op">=</span> <span class="token_number">0</span>
<a name="line50"><span class="token_number">  50 </span></a>
<a name="line51"><span class="token_number">  51 </span></a>
<a name="line52"><span class="token_number">  52 </span></a><span class="keyword">def</span> <span class="token_name">make_weights_dict_from_str</span><span class="token_op">(</span> <span class="token_name">wt_str</span> <span class="token_op">):</span>
<a name="line53"><span class="token_number">  53 </span></a><span class="text">    </span><span class="token_string">"""return a dict with index=row or col: value=wt"""</span>
<a name="line54"><span class="token_number">  54 </span></a>    <span class="token_name">weightD</span> <span class="token_op">=</span> <span class="token_op">{}</span> <span class="token_comment"># index=row: value=wt</span>
<a name="line55"><span class="token_number">  55 </span></a>    <span class="token_name">sL</span> <span class="token_op">=</span> <span class="token_name">wt_str</span><span class="token_op">.</span><span class="token_name">split</span><span class="token_op">()</span> <span class="token_comment"># split string by spaces. may get multiple column settings</span>
<a name="line56"><span class="token_number">  56 </span></a>    <span class="keyword">for</span> <span class="token_name">s</span> <span class="keyword">in</span> <span class="token_name">sL</span><span class="token_op">:</span>
<a name="line57"><span class="token_number">  57 </span></a><span class="text">        </span><span class="token_name">cL</span> <span class="token_op">=</span> <span class="token_name">s</span><span class="token_op">.</span><span class="token_name">split</span><span class="token_op">(</span><span class="token_string">':'</span><span class="token_op">)</span> <span class="token_comment"># each setting is of the form col:wt</span>
<a name="line58"><span class="token_number">  58 </span></a>        <span class="token_name">rc</span> <span class="token_op">=</span> <span class="token_name">intCast</span><span class="token_op">(</span> <span class="token_name">cL</span><span class="token_op">[</span><span class="token_number">0</span><span class="token_op">]</span> <span class="token_op">)</span>
<a name="line59"><span class="token_number">  59 </span></a>        <span class="token_name">wt</span> <span class="token_op">=</span> <span class="token_name">intCast</span><span class="token_op">(</span> <span class="token_name">cL</span><span class="token_op">[-</span><span class="token_number">1</span><span class="token_op">]</span> <span class="token_op">)</span>
<a name="line60"><span class="token_number">  60 </span></a>        <span class="token_name">weightD</span><span class="token_op">[</span><span class="token_name">rc</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">wt</span>
<a name="line61"><span class="token_number">  61 </span></a>        
<a name="line62"><span class="token_number">  62 </span></a>    <span class="keyword">return</span> <span class="token_name">weightD</span>
<a name="line63"><span class="token_number">  63 </span></a>    
<a name="line64"><span class="token_number">  64 </span></a><span class="keyword">def</span> <span class="token_name">add_entry_to_weight_str</span><span class="token_op">(</span> <span class="token_name">rc_inp</span><span class="token_op">,</span> <span class="token_name">wt_inp</span><span class="token_op">,</span> <span class="token_name">current_str</span><span class="token_op">):</span>
<a name="line65"><span class="token_number">  65 </span></a><span class="text">    </span><span class="token_string">"""</span>
<a name="line66"><span class="token_number">  66 </span></a><span class="token_string">    Reset string representation of tab_label row_weights or col_weights ("row:wt" or "col:wt") </span>
<a name="line67"><span class="token_number">  67 </span></a><span class="token_string">    If wt==0, then must remove any row entry other than 0.</span>
<a name="line68"><span class="token_number">  68 </span></a><span class="token_string">    If the row is already present with a different wt, must detect it and change wt.</span>
<a name="line69"><span class="token_number">  69 </span></a><span class="token_string">    """</span>
<a name="line70"><span class="token_number">  70 </span></a>    
<a name="line71"><span class="token_number">  71 </span></a>    <span class="token_name">currentD</span> <span class="token_op">=</span> <span class="token_name">make_weights_dict_from_str</span><span class="token_op">(</span> <span class="token_name">current_str</span> <span class="token_op">)</span> <span class="token_comment"># index=row: value=wt</span>
<a name="line72"><span class="token_number">  72 </span></a>        
<a name="line73"><span class="token_number">  73 </span></a>    <span class="token_name">currentD</span><span class="token_op">[</span><span class="token_name">rc_inp</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">wt_inp</span> <span class="token_comment"># may overwrite an existing value with 0</span>
<a name="line74"><span class="token_number">  74 </span></a>    
<a name="line75"><span class="token_number">  75 </span></a>    <span class="token_name">full_str</span> <span class="token_op">=</span> <span class="token_string">' '</span><span class="token_op">.</span><span class="token_name">join</span><span class="token_op">(</span> <span class="token_op">[</span><span class="token_string">'%s:%s'</span><span class="token_op">%(</span><span class="token_name">rc</span><span class="token_op">,</span><span class="token_name">wt</span><span class="token_op">)</span> <span class="keyword">for</span> <span class="token_name">rc</span><span class="token_op">,</span><span class="token_name">wt</span> <span class="keyword">in</span> <span class="token_name">list</span><span class="token_op">(</span><span class="token_name">currentD</span><span class="token_op">.</span><span class="token_name">items</span><span class="token_op">())</span> <span class="keyword">if</span> <span class="token_name">wt</span><span class="token_op">&gt;</span><span class="token_number">0</span> <span class="token_op">]</span> <span class="token_op">)</span>
<a name="line76"><span class="token_number">  76 </span></a>    
<a name="line77"><span class="token_number">  77 </span></a>    <span class="keyword">return</span> <span class="token_name">full_str</span>
<a name="line78"><span class="token_number">  78 </span></a>
<a name="line79"><span class="token_number">  79 </span></a><span class="keyword">class</span> <span class="token_name">Component</span><span class="token_op">(</span> <span class="token_name">object</span> <span class="token_op">):</span>
<a name="line80"><span class="token_number">  80 </span></a><span class="text">    </span><span class="token_string">"""Carries info for each widget in the target app."""</span>
<a name="line81"><span class="token_number">  81 </span></a>    
<a name="line82"><span class="token_number">  82 </span></a>    <span class="keyword">def</span> <span class="token_name">__str__</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">):</span>
<a name="line83"><span class="token_number">  83 </span></a><span class="text">        </span><span class="keyword">return</span> <span class="token_string">'&lt;%s, %s&gt;'</span><span class="token_op">%(</span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">widget_name</span><span class="token_op">,</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">tab_label</span><span class="token_op">)</span>
<a name="line84"><span class="token_number">  84 </span></a>    
<a name="line85"><span class="token_number">  85 </span></a>    
<a name="line86"><span class="token_number">  86 </span></a>    <span class="keyword">def</span> <span class="token_name">__init__</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">,</span> <span class="token_name">widget_type</span><span class="token_op">=</span><span class="token_string">"Button"</span><span class="token_op">,</span> <span class="token_name">widget_name</span><span class="token_op">=</span><span class="token_string">"Button_1"</span><span class="token_op">,</span> <span class="token_name">tab_label</span><span class="token_op">=</span><span class="token_string">"Main"</span><span class="token_op">,</span> 
<a name="line87"><span class="token_number">  87 </span></a>                       <span class="token_name">row</span><span class="token_op">=</span><span class="token_number">1</span><span class="token_op">,</span> <span class="token_name">col</span><span class="token_op">=</span><span class="token_number">1</span><span class="token_op">,</span> <span class="token_name">target_app</span><span class="token_op">=</span><span class="token_name">None</span> <span class="token_op">):</span>
<a name="line88"><span class="token_number">  88 </span></a>                           
<a name="line89"><span class="token_number">  89 </span></a><span class="text">        </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">widget_type</span> <span class="token_op">=</span> <span class="token_name">widget_type</span> <span class="token_comment"># like Button or Canvas </span>
<a name="line90"><span class="token_number">  90 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">widget_name</span> <span class="token_op">=</span> <span class="token_name">widget_name</span> <span class="token_comment"># like Button_1 or Canvas_23</span>
<a name="line91"><span class="token_number">  91 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">tab_label</span> <span class="token_op">=</span> <span class="token_name">tab_label</span> <span class="token_comment"># tab names in NotebookGridDes ("Main" is main Frame in app)</span>
<a name="line92"><span class="token_number">  92 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">row</span> <span class="token_op">=</span> <span class="token_name">row</span>
<a name="line93"><span class="token_number">  93 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">col</span> <span class="token_op">=</span> <span class="token_name">col</span>
<a name="line94"><span class="token_number">  94 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">target_app</span> <span class="token_op">=</span> <span class="token_name">target_app</span> <span class="token_comment"># allows call-back to TargetTkAppDef</span>
<a name="line95"><span class="token_number">  95 </span></a>        
<a name="line96"><span class="token_number">  96 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">default_tkOptionD</span> <span class="token_op">=</span> <span class="token_op">{}</span> <span class="token_comment"># holds default widget options when 1st created (used to detect changes to options)</span>
<a name="line97"><span class="token_number">  97 </span></a>        
<a name="line98"><span class="token_number">  98 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span> <span class="token_op">=</span> <span class="token_op">{}</span>    <span class="token_comment"># holds tk options set by user. (i.e. not same as default_tkOptionD)</span>
<a name="line99"><span class="token_number">  99 </span></a>        
<a name="line100"><span class="token_number"> 100 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'docstring'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_string">''</span>
<a name="line101"><span class="token_number"> 101 </span></a>        
<a name="line102"><span class="token_number"> 102 </span></a>        <span class="keyword">if</span> <span class="token_name">widget_type</span> <span class="token_op">!=</span> <span class="token_string">'Tab'</span><span class="token_op">:</span>
<a name="line103"><span class="token_number"> 103 </span></a><span class="text">            </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'sticky'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_string">''</span>
<a name="line104"><span class="token_number"> 104 </span></a>            <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'columnspan'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_string">''</span>
<a name="line105"><span class="token_number"> 105 </span></a>            <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'rowspan'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_string">''</span>
<a name="line106"><span class="token_number"> 106 </span></a>            
<a name="line107"><span class="token_number"> 107 </span></a>        <span class="token_comment"># Containers might have row/col weights set</span>
<a name="line108"><span class="token_number"> 108 </span></a>        <span class="keyword">if</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">widget_type</span> <span class="keyword">in</span> <span class="token_name">ContainerControlsL</span><span class="token_op">:</span>
<a name="line109"><span class="token_number"> 109 </span></a><span class="text">            </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'row_weights'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_string">''</span>
<a name="line110"><span class="token_number"> 110 </span></a>            <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'col_weights'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_string">''</span>
<a name="line111"><span class="token_number"> 111 </span></a>            
<a name="line112"><span class="token_number"> 112 </span></a>        
<a name="line113"><span class="token_number"> 113 </span></a>        <span class="token_comment"># Some widgets have special values that need to be set</span>
<a name="line114"><span class="token_number"> 114 </span></a>        <span class="keyword">if</span> <span class="token_name">widget_type</span> <span class="token_op">==</span> <span class="token_string">"Spinbox"</span><span class="token_op">:</span>
<a name="line115"><span class="token_number"> 115 </span></a><span class="text">            </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'from_'</span><span class="token_op">]</span>  <span class="token_op">=</span> <span class="token_number">1</span>
<a name="line116"><span class="token_number"> 116 </span></a>            <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'to'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_number">10</span>
<a name="line117"><span class="token_number"> 117 </span></a>        <span class="keyword">elif</span> <span class="token_name">widget_type</span> <span class="token_op">==</span> <span class="token_string">"Radiobutton"</span><span class="token_op">:</span>
<a name="line118"><span class="token_number"> 118 </span></a><span class="text">            </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'value'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">widget_name</span><span class="token_op">.</span><span class="token_name">split</span><span class="token_op">(</span><span class="token_string">'_'</span><span class="token_op">)[-</span><span class="token_number">1</span><span class="token_op">]</span> <span class="token_comment"># should be the Radiobutton number</span>
<a name="line119"><span class="token_number"> 119 </span></a>        <span class="keyword">elif</span> <span class="token_name">widget_type</span> <span class="token_op">==</span> <span class="token_string">"Combobox"</span><span class="token_op">:</span>
<a name="line120"><span class="token_number"> 120 </span></a><span class="text">            </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'values'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_string">'Mine Yours Ours'</span>
<a name="line121"><span class="token_number"> 121 </span></a>        <span class="keyword">elif</span> <span class="token_name">widget_type</span> <span class="token_op">==</span> <span class="token_string">"Separator"</span><span class="token_op">:</span>
<a name="line122"><span class="token_number"> 122 </span></a><span class="text">            </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'sticky'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_string">'ew'</span> <span class="token_comment"># Separator is invisible w/o sticky</span>
<a name="line123"><span class="token_number"> 123 </span></a>        <span class="keyword">elif</span> <span class="token_name">widget_type</span> <span class="token_op">==</span> <span class="token_string">'Text'</span><span class="token_op">:</span>
<a name="line124"><span class="token_number"> 124 </span></a><span class="text">            </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'scrolly'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_string">'yes'</span>
<a name="line125"><span class="token_number"> 125 </span></a>        <span class="keyword">elif</span> <span class="token_name">widget_type</span> <span class="keyword">in</span> <span class="token_name">SCROLL_Y_WIDGETS</span><span class="token_op">:</span>
<a name="line126"><span class="token_number"> 126 </span></a><span class="text">            </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'scrolly'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_string">'no'</span> <span class="token_comment"># only Text gets default 'yes'</span>
<a name="line127"><span class="token_number"> 127 </span></a>            
<a name="line128"><span class="token_number"> 128 </span></a>        <span class="keyword">if</span> <span class="token_name">widget_type</span> <span class="keyword">in</span> <span class="token_name">SCROLL_X_WIDGETS</span><span class="token_op">:</span>
<a name="line129"><span class="token_number"> 129 </span></a><span class="text">            </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'scrollx'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_string">'no'</span>
<a name="line130"><span class="token_number"> 130 </span></a>        
<a name="line131"><span class="token_number"> 131 </span></a>        
<a name="line132"><span class="token_number"> 132 </span></a>        <span class="token_comment"># set a "reasonable" default width and height</span>
<a name="line133"><span class="token_number"> 133 </span></a>        <span class="keyword">if</span> <span class="token_name">widget_type</span> <span class="keyword">in</span> <span class="token_name">TEXT_WIDTH_WIDGETS</span><span class="token_op">:</span>
<a name="line134"><span class="token_number"> 134 </span></a><span class="text">            </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">width_type</span>  <span class="token_op">=</span> <span class="token_string">"text"</span>
<a name="line135"><span class="token_number"> 135 </span></a>            <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'text'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">widget_name</span>
<a name="line136"><span class="token_number"> 136 </span></a>            
<a name="line137"><span class="token_number"> 137 </span></a>            <span class="keyword">if</span> <span class="token_name">widget_type</span> <span class="token_op">==</span> <span class="token_string">'Text'</span><span class="token_op">:</span>
<a name="line138"><span class="token_number"> 138 </span></a><span class="text">                </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'width'</span><span class="token_op">]</span>  <span class="token_op">=</span> <span class="token_number">40</span>
<a name="line139"><span class="token_number"> 139 </span></a>                <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'height'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_number">12</span>
<a name="line140"><span class="token_number"> 140 </span></a>            <span class="keyword">elif</span> <span class="token_name">widget_type</span> <span class="token_op">==</span> <span class="token_string">"Message"</span><span class="token_op">:</span>
<a name="line141"><span class="token_number"> 141 </span></a><span class="text">                </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'width'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_number">55</span> <span class="token_comment"># percent of message length</span>
<a name="line142"><span class="token_number"> 142 </span></a>            <span class="keyword">elif</span> <span class="token_name">widget_type</span> <span class="token_op">==</span> <span class="token_string">"Tab"</span><span class="token_op">:</span>
<a name="line143"><span class="token_number"> 143 </span></a><span class="text">                </span><span class="keyword">pass</span>
<a name="line144"><span class="token_number"> 144 </span></a>            <span class="keyword">else</span><span class="token_op">:</span>
<a name="line145"><span class="token_number"> 145 </span></a><span class="text">                </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'width'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_number">15</span>
<a name="line146"><span class="token_number"> 146 </span></a>                
<a name="line147"><span class="token_number"> 147 </span></a>        <span class="keyword">elif</span> <span class="token_name">widget_type</span> <span class="token_op">==</span> <span class="token_string">"Listbox"</span><span class="token_op">:</span>
<a name="line148"><span class="token_number"> 148 </span></a><span class="text">            </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'width'</span><span class="token_op">]</span>  <span class="token_op">=</span> <span class="token_number">18</span>
<a name="line149"><span class="token_number"> 149 </span></a>            <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'height'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_number">12</span>
<a name="line150"><span class="token_number"> 150 </span></a>            
<a name="line151"><span class="token_number"> 151 </span></a>        <span class="keyword">elif</span> <span class="token_name">widget_type</span> <span class="token_op">==</span> <span class="token_string">"OptionMenu"</span><span class="token_op">:</span>
<a name="line152"><span class="token_number"> 152 </span></a><span class="text">            </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'width'</span><span class="token_op">]</span>  <span class="token_op">=</span> <span class="token_number">20</span>
<a name="line153"><span class="token_number"> 153 </span></a>            <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'height'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_number">2</span>
<a name="line154"><span class="token_number"> 154 </span></a>            
<a name="line155"><span class="token_number"> 155 </span></a>        <span class="keyword">elif</span> <span class="token_name">widget_type</span> <span class="token_op">==</span> <span class="token_string">"Menubutton"</span><span class="token_op">:</span>
<a name="line156"><span class="token_number"> 156 </span></a><span class="text">            </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'width'</span><span class="token_op">]</span>  <span class="token_op">=</span> <span class="token_number">20</span>
<a name="line157"><span class="token_number"> 157 </span></a>            <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'height'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_number">2</span>
<a name="line158"><span class="token_number"> 158 </span></a>            
<a name="line159"><span class="token_number"> 159 </span></a>        <span class="keyword">elif</span> <span class="token_name">widget_type</span> <span class="token_op">==</span> <span class="token_string">"Treeview"</span><span class="token_op">:</span>
<a name="line160"><span class="token_number"> 160 </span></a><span class="text">            </span><span class="keyword">pass</span>
<a name="line161"><span class="token_number"> 161 </span></a>            
<a name="line162"><span class="token_number"> 162 </span></a>        <span class="keyword">elif</span> <span class="token_name">widget_type</span> <span class="token_op">==</span> <span class="token_string">"Scale"</span><span class="token_op">:</span>
<a name="line163"><span class="token_number"> 163 </span></a><span class="text">            </span><span class="keyword">pass</span>
<a name="line164"><span class="token_number"> 164 </span></a>            
<a name="line165"><span class="token_number"> 165 </span></a>        <span class="keyword">elif</span> <span class="token_name">widget_type</span> <span class="token_op">==</span> <span class="token_string">"Notebook"</span><span class="token_op">:</span>
<a name="line166"><span class="token_number"> 166 </span></a><span class="text">            </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">width_type</span>  <span class="token_op">=</span> <span class="token_string">"pixel"</span>
<a name="line167"><span class="token_number"> 167 </span></a>            <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'width'</span><span class="token_op">]</span>  <span class="token_op">=</span> <span class="token_number">400</span>
<a name="line168"><span class="token_number"> 168 </span></a>            <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'height'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_number">300</span>
<a name="line169"><span class="token_number"> 169 </span></a>            
<a name="line170"><span class="token_number"> 170 </span></a>            <span class="token_comment"># Notebook Tab labels separated by \n</span>
<a name="line171"><span class="token_number"> 171 </span></a>            <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'tab_labels'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_string">'Mickey\nGoofy\nPopeye'</span>
<a name="line172"><span class="token_number"> 172 </span></a>            
<a name="line173"><span class="token_number"> 173 </span></a>            <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">tab_nameL</span> <span class="token_op">=</span> <span class="token_op">[]</span> <span class="token_comment"># tuples of Tab name and label, e.g. (row, col, Tab_1, text)</span>
<a name="line174"><span class="token_number"> 174 </span></a>            
<a name="line175"><span class="token_number"> 175 </span></a>        <span class="keyword">else</span><span class="token_op">:</span>
<a name="line176"><span class="token_number"> 176 </span></a><span class="text">            </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">width_type</span>  <span class="token_op">=</span> <span class="token_string">"pixel"</span>
<a name="line177"><span class="token_number"> 177 </span></a>            <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'width'</span><span class="token_op">]</span>  <span class="token_op">=</span> <span class="token_number">60</span>
<a name="line178"><span class="token_number"> 178 </span></a>            <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'height'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_number">50</span>
<a name="line179"><span class="token_number"> 179 </span></a>        
<a name="line180"><span class="token_number"> 180 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">pw_widget</span> <span class="token_op">=</span> <span class="token_name">None</span> <span class="token_comment"># use maybe_make_widget to create </span>
<a name="line181"><span class="token_number"> 181 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">disp_frame</span> <span class="token_op">=</span> <span class="token_name">None</span>
<a name="line182"><span class="token_number"> 182 </span></a>
<a name="line183"><span class="token_number"> 183 </span></a>        <span class="token_comment"># may need a tk variable for PreviewWin</span>
<a name="line184"><span class="token_number"> 184 </span></a>        <span class="token_name">tkvar_type</span> <span class="token_op">=</span> <span class="token_name">reqd_variable_typeD</span><span class="token_op">.</span><span class="token_name">get</span><span class="token_op">(</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">widget_type</span><span class="token_op">,</span> <span class="token_string">''</span> <span class="token_op">)</span> <span class="token_comment"># e.g. StringVar</span>
<a name="line185"><span class="token_number"> 185 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">tkvar</span> <span class="token_op">=</span> <span class="token_name">None</span>
<a name="line186"><span class="token_number"> 186 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">tkvar_list</span> <span class="token_op">=</span> <span class="token_name">None</span> <span class="token_comment"># Menubutton has a list of tk variables</span>
<a name="line187"><span class="token_number"> 187 </span></a>        <span class="keyword">if</span> <span class="token_name">tkvar_type</span><span class="token_op">:</span>
<a name="line188"><span class="token_number"> 188 </span></a><span class="text">            </span><span class="keyword">try</span><span class="token_op">:</span>
<a name="line189"><span class="token_number"> 189 </span></a><span class="text">                </span><span class="keyword">if</span> <span class="token_name">tkvar_type</span> <span class="token_op">==</span> <span class="token_string">"StringVar"</span><span class="token_op">:</span>
<a name="line190"><span class="token_number"> 190 </span></a><span class="text">                    </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">tkvar</span> <span class="token_op">=</span> <span class="token_name">StringVar</span><span class="token_op">()</span>
<a name="line191"><span class="token_number"> 191 </span></a>                <span class="keyword">elif</span> <span class="token_name">tkvar_type</span> <span class="token_op">==</span> <span class="token_string">"IntVar"</span><span class="token_op">:</span>
<a name="line192"><span class="token_number"> 192 </span></a><span class="text">                    </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">tkvar</span> <span class="token_op">=</span> <span class="token_name">IntVar</span><span class="token_op">()</span>
<a name="line193"><span class="token_number"> 193 </span></a>                <span class="keyword">elif</span> <span class="token_name">tkvar_type</span> <span class="token_op">==</span> <span class="token_string">"DoubleVar"</span><span class="token_op">:</span>
<a name="line194"><span class="token_number"> 194 </span></a><span class="text">                    </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">tkvar</span> <span class="token_op">=</span> <span class="token_name">DoubleVar</span><span class="token_op">()</span>
<a name="line195"><span class="token_number"> 195 </span></a>                <span class="keyword">else</span><span class="token_op">:</span>
<a name="line196"><span class="token_number"> 196 </span></a><span class="text">                    </span><span class="keyword">print</span><span class="token_op">(</span><span class="token_string">"ERROR... do not recognize tk variable type = "</span><span class="token_op">,</span> <span class="token_name">tkvar_type</span><span class="token_op">)</span>
<a name="line197"><span class="token_number"> 197 </span></a>                    
<a name="line198"><span class="token_number"> 198 </span></a>                <span class="keyword">if</span> <span class="token_name">widget_type</span><span class="token_op">==</span><span class="token_string">"Menubutton"</span><span class="token_op">:</span>
<a name="line199"><span class="token_number"> 199 </span></a><span class="text">                    </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">tkvar_list</span> <span class="token_op">=</span> <span class="token_op">[]</span>
<a name="line200"><span class="token_number"> 200 </span></a>                    <span class="keyword">for</span> <span class="token_name">_</span> <span class="keyword">in</span> <span class="token_name">range</span><span class="token_op">(</span><span class="token_number">3</span><span class="token_op">):</span>
<a name="line201"><span class="token_number"> 201 </span></a><span class="text">                        </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">tkvar_list</span><span class="token_op">.</span><span class="token_name">append</span><span class="token_op">(</span> <span class="token_name">StringVar</span><span class="token_op">()</span> <span class="token_op">)</span>
<a name="line202"><span class="token_number"> 202 </span></a>            <span class="keyword">except</span><span class="token_op">:</span>
<a name="line203"><span class="token_number"> 203 </span></a><span class="text">                </span><span class="keyword">print</span><span class="token_op">(</span><span class="token_string">"WARNING... Failed to make "</span><span class="token_op">,</span><span class="token_name">tkvar_type</span><span class="token_op">,</span><span class="token_string">" for "</span><span class="token_op">,</span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">widget_name</span><span class="token_op">)</span>
<a name="line204"><span class="token_number"> 204 </span></a>
<a name="line205"><span class="token_number"> 205 </span></a>        
<a name="line206"><span class="token_number"> 206 </span></a>    <span class="keyword">def</span> <span class="token_name">get_docstring</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">):</span>
<a name="line207"><span class="token_number"> 207 </span></a><span class="text">        </span><span class="token_string">"""For documenting generated source code."""</span>
<a name="line208"><span class="token_number"> 208 </span></a>        
<a name="line209"><span class="token_number"> 209 </span></a>        <span class="token_name">loc_str</span> <span class="token_op">=</span> <span class="token_string">' at %s(%s,%s)'</span><span class="token_op">%(</span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">tab_label</span><span class="token_op">,</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">row</span><span class="token_op">,</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">col</span><span class="token_op">)</span>
<a name="line210"><span class="token_number"> 210 </span></a>        
<a name="line211"><span class="token_number"> 211 </span></a>        <span class="token_comment"># if the user supplied a docstring, use it.</span>
<a name="line212"><span class="token_number"> 212 </span></a>        <span class="keyword">if</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'docstring'</span><span class="token_op">]:</span>
<a name="line213"><span class="token_number"> 213 </span></a><span class="text">            </span><span class="keyword">return</span> <span class="token_string">'%12s: '</span><span class="token_op">%</span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">widget_type</span> <span class="token_op">+</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'docstring'</span><span class="token_op">]</span> <span class="token_op">+</span> <span class="token_string">' :'</span> <span class="token_op">+</span> <span class="token_name">loc_str</span>
<a name="line214"><span class="token_number"> 214 </span></a>        
<a name="line215"><span class="token_number"> 215 </span></a>        <span class="token_comment"># ---------------------</span>
<a name="line216"><span class="token_number"> 216 </span></a>        <span class="token_name">text</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">.</span><span class="token_name">get</span><span class="token_op">(</span><span class="token_string">'text'</span><span class="token_op">,</span> <span class="token_string">''</span><span class="token_op">)</span>
<a name="line217"><span class="token_number"> 217 </span></a>        <span class="keyword">if</span> <span class="token_name">text</span> <span class="token_op">==</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">widget_name</span><span class="token_op">:</span>
<a name="line218"><span class="token_number"> 218 </span></a><span class="text">            </span><span class="token_name">text</span> <span class="token_op">=</span> <span class="token_string">''</span>
<a name="line219"><span class="token_number"> 219 </span></a>        <span class="keyword">if</span> <span class="token_name">text</span><span class="token_op">:</span>
<a name="line220"><span class="token_number"> 220 </span></a><span class="text">            </span><span class="keyword">return</span> <span class="token_string">'%12s: '</span><span class="token_op">%</span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">widget_type</span> <span class="token_op">+</span> <span class="token_name">text</span> <span class="token_op">+</span> <span class="token_string">' :'</span> <span class="token_op">+</span> <span class="token_name">loc_str</span>
<a name="line221"><span class="token_number"> 221 </span></a>        
<a name="line222"><span class="token_number"> 222 </span></a>        <span class="token_comment"># ---------------------</span>
<a name="line223"><span class="token_number"> 223 </span></a>        <span class="token_name">value</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">.</span><span class="token_name">get</span><span class="token_op">(</span><span class="token_string">'value'</span><span class="token_op">,</span> <span class="token_string">''</span><span class="token_op">)</span>
<a name="line224"><span class="token_number"> 224 </span></a>        <span class="keyword">if</span> <span class="token_name">value</span><span class="token_op">:</span>
<a name="line225"><span class="token_number"> 225 </span></a><span class="text">            </span><span class="keyword">return</span> <span class="token_string">'%12s: '</span><span class="token_op">%</span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">widget_type</span> <span class="token_op">+</span> <span class="token_name">value</span> <span class="token_op">+</span> <span class="token_string">' :'</span> <span class="token_op">+</span> <span class="token_name">loc_str</span>
<a name="line226"><span class="token_number"> 226 </span></a>        
<a name="line227"><span class="token_number"> 227 </span></a>        <span class="token_comment"># ---------------------</span>
<a name="line228"><span class="token_number"> 228 </span></a>        <span class="token_name">values</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">.</span><span class="token_name">get</span><span class="token_op">(</span><span class="token_string">'values'</span><span class="token_op">,</span> <span class="token_string">''</span><span class="token_op">)</span>
<a name="line229"><span class="token_number"> 229 </span></a>        <span class="keyword">if</span> <span class="token_name">values</span><span class="token_op">:</span>
<a name="line230"><span class="token_number"> 230 </span></a><span class="text">            </span><span class="keyword">return</span> <span class="token_string">'%12s: '</span><span class="token_op">%</span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">widget_type</span> <span class="token_op">+</span> <span class="token_name">values</span> <span class="token_op">+</span> <span class="token_string">' :'</span> <span class="token_op">+</span> <span class="token_name">loc_str</span>
<a name="line231"><span class="token_number"> 231 </span></a>        
<a name="line232"><span class="token_number"> 232 </span></a>        <span class="token_comment"># ---------------------</span>
<a name="line233"><span class="token_number"> 233 </span></a>        <span class="token_name">from_</span> <span class="token_op">=</span> <span class="token_string">'%s'</span><span class="token_op">%</span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">.</span><span class="token_name">get</span><span class="token_op">(</span><span class="token_string">'from_'</span><span class="token_op">,</span> <span class="token_string">''</span><span class="token_op">)</span>
<a name="line234"><span class="token_number"> 234 </span></a>        <span class="keyword">if</span> <span class="token_name">from_</span><span class="token_op">:</span>
<a name="line235"><span class="token_number"> 235 </span></a><span class="text">            </span><span class="keyword">return</span> <span class="token_string">'%12s: '</span><span class="token_op">%</span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">widget_type</span> <span class="token_op">+</span> <span class="token_name">from_</span> <span class="token_op">+</span> <span class="token_string">' to '</span> <span class="token_op">+</span> <span class="token_string">'%s'</span><span class="token_op">%</span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">.</span><span class="token_name">get</span><span class="token_op">(</span><span class="token_string">'to'</span><span class="token_op">,</span> <span class="token_string">''</span><span class="token_op">)</span> <span class="token_op">+</span> <span class="token_string">' :'</span> <span class="token_op">+</span> <span class="token_name">loc_str</span>
<a name="line236"><span class="token_number"> 236 </span></a>
<a name="line237"><span class="token_number"> 237 </span></a>        <span class="token_comment"># ---------------------</span>
<a name="line238"><span class="token_number"> 238 </span></a>        <span class="keyword">return</span> <span class="token_string">'%12s: '</span><span class="token_op">%</span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">widget_type</span> <span class="token_op">+</span> <span class="token_name">loc_str</span>
<a name="line239"><span class="token_number"> 239 </span></a>
<a name="line240"><span class="token_number"> 240 </span></a>    <span class="keyword">def</span> <span class="token_name">highlight_pw_widget</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">):</span>
<a name="line241"><span class="token_number"> 241 </span></a>        
<a name="line242"><span class="token_number"> 242 </span></a><span class="text">        </span><span class="keyword">if</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">widget_type</span> <span class="token_op">==</span> <span class="token_string">"Tab"</span><span class="token_op">:</span>
<a name="line243"><span class="token_number"> 243 </span></a><span class="text">            </span><span class="token_name">notebook_name</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">tab_label</span>
<a name="line244"><span class="token_number"> 244 </span></a>            <span class="token_name">nb_obj</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">target_app</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">[</span> <span class="token_name">notebook_name</span> <span class="token_op">]</span>
<a name="line245"><span class="token_number"> 245 </span></a>            <span class="keyword">if</span> <span class="token_name">nb_obj</span><span class="token_op">.</span><span class="token_name">pw_widget</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="token_name">None</span><span class="token_op">:</span>
<a name="line246"><span class="token_number"> 246 </span></a><span class="text">                </span><span class="token_name">nb_obj</span><span class="token_op">.</span><span class="token_name">pw_widget</span><span class="token_op">.</span><span class="token_name">pw_highlight_widget</span><span class="token_op">()</span>
<a name="line247"><span class="token_number"> 247 </span></a>                
<a name="line248"><span class="token_number"> 248 </span></a>                <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">target_app</span><span class="token_op">.</span><span class="token_name">grid_notebook</span><span class="token_op">.</span><span class="token_name">grid_gui</span><span class="token_op">.</span><span class="token_name">select_preview_tab</span><span class="token_op">(</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">widget_name</span> <span class="token_op">)</span>
<a name="line249"><span class="token_number"> 249 </span></a>        
<a name="line250"><span class="token_number"> 250 </span></a>        <span class="keyword">elif</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">pw_widget</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="token_name">None</span><span class="token_op">:</span>
<a name="line251"><span class="token_number"> 251 </span></a><span class="text">            </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">pw_widget</span><span class="token_op">.</span><span class="token_name">pw_highlight_widget</span><span class="token_op">()</span>
<a name="line252"><span class="token_number"> 252 </span></a>            
<a name="line253"><span class="token_number"> 253 </span></a>    
<a name="line254"><span class="token_number"> 254 </span></a>    <span class="keyword">def</span> <span class="token_name">highlight_grid_widget</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">):</span>
<a name="line255"><span class="token_number"> 255 </span></a><span class="text">        </span><span class="keyword">if</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">target_app</span><span class="token_op">.</span><span class="token_name">grid_notebook</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="token_name">None</span><span class="token_op">:</span>
<a name="line256"><span class="token_number"> 256 </span></a><span class="text">            </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">target_app</span><span class="token_op">.</span><span class="token_name">grid_notebook</span><span class="token_op">.</span><span class="token_name">highlight_grid_widget</span><span class="token_op">(</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">widget_name</span> <span class="token_op">)</span>
<a name="line257"><span class="token_number"> 257 </span></a>    
<a name="line258"><span class="token_number"> 258 </span></a>    <span class="keyword">def</span> <span class="token_name">highlight_widget</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">):</span> <span class="token_comment"># highlight BOTH PreviewWin and grid_notebook</span>
<a name="line259"><span class="token_number"> 259 </span></a><span class="text">        </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">highlight_pw_widget</span><span class="token_op">()</span>
<a name="line260"><span class="token_number"> 260 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">highlight_grid_widget</span><span class="token_op">()</span>
<a name="line261"><span class="token_number"> 261 </span></a>    
<a name="line262"><span class="token_number"> 262 </span></a>    <span class="keyword">def</span> <span class="token_name">unhighlight_pw_widget</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">):</span>
<a name="line263"><span class="token_number"> 263 </span></a><span class="text">        </span><span class="keyword">if</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">widget_type</span> <span class="token_op">==</span> <span class="token_string">"Tab"</span><span class="token_op">:</span>
<a name="line264"><span class="token_number"> 264 </span></a><span class="text">            </span><span class="token_name">notebook_name</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">tab_label</span>
<a name="line265"><span class="token_number"> 265 </span></a>            <span class="token_name">nb_obj</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">target_app</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">[</span> <span class="token_name">notebook_name</span> <span class="token_op">]</span>
<a name="line266"><span class="token_number"> 266 </span></a>            <span class="keyword">if</span> <span class="token_name">nb_obj</span><span class="token_op">.</span><span class="token_name">pw_widget</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="token_name">None</span><span class="token_op">:</span>
<a name="line267"><span class="token_number"> 267 </span></a><span class="text">                </span><span class="token_name">nb_obj</span><span class="token_op">.</span><span class="token_name">pw_widget</span><span class="token_op">.</span><span class="token_name">pw_unhighlight_widget</span><span class="token_op">()</span>
<a name="line268"><span class="token_number"> 268 </span></a>        
<a name="line269"><span class="token_number"> 269 </span></a>        
<a name="line270"><span class="token_number"> 270 </span></a>        <span class="keyword">elif</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">pw_widget</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="token_name">None</span><span class="token_op">:</span>
<a name="line271"><span class="token_number"> 271 </span></a><span class="text">            </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">pw_widget</span><span class="token_op">.</span><span class="token_name">pw_unhighlight_widget</span><span class="token_op">()</span>
<a name="line272"><span class="token_number"> 272 </span></a>    
<a name="line273"><span class="token_number"> 273 </span></a>    <span class="keyword">def</span> <span class="token_name">unhighlight_grid_widget</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">):</span>
<a name="line274"><span class="token_number"> 274 </span></a><span class="text">        </span><span class="keyword">if</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">target_app</span><span class="token_op">.</span><span class="token_name">grid_notebook</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="token_name">None</span><span class="token_op">:</span>
<a name="line275"><span class="token_number"> 275 </span></a><span class="text">            </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">target_app</span><span class="token_op">.</span><span class="token_name">grid_notebook</span><span class="token_op">.</span><span class="token_name">unhighlight_grid_widget</span><span class="token_op">(</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">widget_name</span> <span class="token_op">)</span>
<a name="line276"><span class="token_number"> 276 </span></a>    
<a name="line277"><span class="token_number"> 277 </span></a>    <span class="keyword">def</span> <span class="token_name">unhighlight_widget</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">):</span> <span class="token_comment"># un-highlight BOTH PreviewWin and grid_notebook</span>
<a name="line278"><span class="token_number"> 278 </span></a><span class="text">        </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">unhighlight_pw_widget</span><span class="token_op">()</span>
<a name="line279"><span class="token_number"> 279 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">unhighlight_grid_widget</span><span class="token_op">()</span>
<a name="line280"><span class="token_number"> 280 </span></a>
<a name="line281"><span class="token_number"> 281 </span></a>    <span class="keyword">def</span> <span class="token_name">widget_has_moved</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">,</span> <span class="token_name">tab_label</span><span class="token_op">=</span><span class="token_string">"Main"</span><span class="token_op">,</span> <span class="token_name">row</span><span class="token_op">=</span><span class="token_number">1</span><span class="token_op">,</span> <span class="token_name">col</span><span class="token_op">=</span><span class="token_number">1</span><span class="token_op">):</span>
<a name="line282"><span class="token_number"> 282 </span></a><span class="text">        </span><span class="token_string">"""Test for widget having been moved"""</span>
<a name="line283"><span class="token_number"> 283 </span></a>        <span class="keyword">if</span> <span class="token_op">(</span><span class="token_name">tab_label</span><span class="token_op">,</span> <span class="token_name">row</span><span class="token_op">,</span> <span class="token_name">col</span><span class="token_op">)</span> <span class="token_op">==</span> <span class="token_op">(</span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">tab_label</span><span class="token_op">,</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">row</span><span class="token_op">,</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">col</span><span class="token_op">):</span>
<a name="line284"><span class="token_number"> 284 </span></a><span class="text">            </span><span class="keyword">return</span> <span class="token_name">False</span>
<a name="line285"><span class="token_number"> 285 </span></a>        <span class="keyword">else</span><span class="token_op">:</span>
<a name="line286"><span class="token_number"> 286 </span></a><span class="text">            </span><span class="keyword">return</span> <span class="token_name">True</span>
<a name="line287"><span class="token_number"> 287 </span></a>
<a name="line288"><span class="token_number"> 288 </span></a>    <span class="keyword">def</span> <span class="token_name">reset_location</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">,</span> <span class="token_name">tab_label</span><span class="token_op">=</span><span class="token_string">"Main"</span><span class="token_op">,</span> <span class="token_name">row</span><span class="token_op">=</span><span class="token_number">1</span><span class="token_op">,</span> <span class="token_name">col</span><span class="token_op">=</span><span class="token_number">1</span><span class="token_op">):</span>
<a name="line289"><span class="token_number"> 289 </span></a><span class="text">        </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">tab_label</span> <span class="token_op">=</span> <span class="token_name">tab_label</span> <span class="token_comment"># tab names in NotebookGridDes ("Main" is main Frame in app)</span>
<a name="line290"><span class="token_number"> 290 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">row</span> <span class="token_op">=</span> <span class="token_name">row</span>
<a name="line291"><span class="token_number"> 291 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">col</span> <span class="token_op">=</span> <span class="token_name">col</span>
<a name="line292"><span class="token_number"> 292 </span></a>        
<a name="line293"><span class="token_number"> 293 </span></a>    <span class="keyword">def</span> <span class="token_name">maybe_make_widget</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">,</span> <span class="token_name">disp_frame</span><span class="token_op">):</span>
<a name="line294"><span class="token_number"> 294 </span></a><span class="text">        </span><span class="token_string">"""If not already created, create the pw_widget"""</span>
<a name="line295"><span class="token_number"> 295 </span></a>        
<a name="line296"><span class="token_number"> 296 </span></a>        <span class="token_comment"># Tab should never get here.</span>
<a name="line297"><span class="token_number"> 297 </span></a>        <span class="keyword">if</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">pw_widget</span> <span class="keyword">is</span> <span class="token_name">None</span><span class="token_op">:</span>
<a name="line298"><span class="token_number"> 298 </span></a>            
<a name="line299"><span class="token_number"> 299 </span></a><span class="text">            </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">disp_frame</span> <span class="token_op">=</span> <span class="token_name">disp_frame</span>
<a name="line300"><span class="token_number"> 300 </span></a>                        
<a name="line301"><span class="token_number"> 301 </span></a>            <span class="token_comment"># disp_frame is the native_widget of pw_widget's parent</span>
<a name="line302"><span class="token_number"> 302 </span></a>            <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">pw_widget</span> <span class="token_op">=</span> <span class="token_name">PW_Widget</span><span class="token_op">(</span> <span class="token_name">disp_frame</span><span class="token_op">,</span> <span class="token_name">self</span> <span class="token_op">)</span>
<a name="line303"><span class="token_number"> 303 </span></a>        
<a name="line304"><span class="token_number"> 304 </span></a>            <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">set_widget_tk_properties</span><span class="token_op">()</span>
<a name="line305"><span class="token_number"> 305 </span></a>            
<a name="line306"><span class="token_number"> 306 </span></a>            <span class="token_comment">#if self.pw_widget is not None: bind preview widget</span>
<a name="line307"><span class="token_number"> 307 </span></a>            <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">pw_widget</span><span class="token_op">.</span><span class="token_name">native_widget</span><span class="token_op">.</span><span class="token_name">bind</span><span class="token_op">(</span><span class="token_string">"&lt;Button-3&gt;"</span><span class="token_op">,</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">Widget_Right_Click</span><span class="token_op">)</span>
<a name="line308"><span class="token_number"> 308 </span></a>            
<a name="line309"><span class="token_number"> 309 </span></a>            <span class="keyword">return</span> <span class="token_name">True</span>
<a name="line310"><span class="token_number"> 310 </span></a>        <span class="keyword">else</span><span class="token_op">:</span>
<a name="line311"><span class="token_number"> 311 </span></a><span class="text">            </span><span class="keyword">return</span> <span class="token_name">False</span>
<a name="line312"><span class="token_number"> 312 </span></a>                
<a name="line313"><span class="token_number"> 313 </span></a>    <span class="keyword">def</span> <span class="token_name">Widget_Right_Click</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">,</span> <span class="token_name">__event</span><span class="token_op">):</span> <span class="token_comment"># event not used</span>
<a name="line314"><span class="token_number"> 314 </span></a>        <span class="token_comment">#print( "Widget_Right_Click on ",self.widget_name )</span>
<a name="line315"><span class="token_number"> 315 </span></a>
<a name="line316"><span class="token_number"> 316 </span></a>        <span class="token_comment"># set tab of grid_notebook to this widget's tab_label</span>
<a name="line317"><span class="token_number"> 317 </span></a><span class="text">        </span><span class="token_name">nb_obj</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">target_app</span><span class="token_op">.</span><span class="token_name">grid_notebook</span>
<a name="line318"><span class="token_number"> 318 </span></a>        <span class="token_name">nb_obj</span><span class="token_op">.</span><span class="token_name">set_current_tab_by_label</span><span class="token_op">(</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">tab_label</span> <span class="token_op">)</span>
<a name="line319"><span class="token_number"> 319 </span></a>
<a name="line320"><span class="token_number"> 320 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">highlight_widget</span><span class="token_op">()</span>
<a name="line321"><span class="token_number"> 321 </span></a>        
<a name="line322"><span class="token_number"> 322 </span></a>        <span class="token_comment"># put all pw_widget properties into dialogOptionsD for editing</span>
<a name="line323"><span class="token_number"> 323 </span></a>        <span class="token_name">dialogOptionsD</span> <span class="token_op">=</span> <span class="token_op">{}</span>
<a name="line324"><span class="token_number"> 324 </span></a>        <span class="keyword">for</span> <span class="token_name">key</span><span class="token_op">,</span><span class="token_name">val</span> <span class="keyword">in</span> <span class="token_name">list</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">default_tkOptionD</span><span class="token_op">.</span><span class="token_name">items</span><span class="token_op">()):</span>
<a name="line325"><span class="token_number"> 325 </span></a><span class="text">            </span><span class="token_name">dialogOptionsD</span><span class="token_op">[</span><span class="token_name">key</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_op">(</span><span class="token_name">val</span><span class="token_op">,</span> <span class="token_string">"def."</span><span class="token_op">)</span>
<a name="line326"><span class="token_number"> 326 </span></a>            
<a name="line327"><span class="token_number"> 327 </span></a>        <span class="keyword">for</span> <span class="token_name">key</span><span class="token_op">,</span><span class="token_name">val</span> <span class="keyword">in</span> <span class="token_name">list</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">.</span><span class="token_name">items</span><span class="token_op">()):</span> <span class="token_comment"># user_tkOptionD holds tk options set by user. (i.e. not same as default_tkOptionD)</span>
<a name="line328"><span class="token_number"> 328 </span></a><span class="text">            </span><span class="token_name">dialogOptionsD</span><span class="token_op">[</span><span class="token_name">key</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_op">(</span><span class="token_name">val</span><span class="token_op">,</span> <span class="token_string">"USER VALUE"</span><span class="token_op">)</span>
<a name="line329"><span class="token_number"> 329 </span></a>
<a name="line330"><span class="token_number"> 330 </span></a>        <span class="token_name">dialogOptionsD</span><span class="token_op">[</span><span class="token_string">'child_widget_list'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">target_app</span><span class="token_op">.</span><span class="token_name">get_names_of_containers_widgets</span><span class="token_op">(</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">widget_name</span> <span class="token_op">)</span>
<a name="line331"><span class="token_number"> 331 </span></a>
<a name="line332"><span class="token_number"> 332 </span></a>        <span class="token_comment"># get grid_notebook label object to highlight it.</span>
<a name="line333"><span class="token_number"> 333 </span></a>        <span class="token_op">(</span><span class="token_name">tab_label</span><span class="token_op">,</span> <span class="token_name">rtarg</span><span class="token_op">,</span> <span class="token_name">col_target</span><span class="token_op">,</span> <span class="token_name">placementWidgetType</span><span class="token_op">,</span> <span class="token_name">label</span><span class="token_op">)</span> <span class="token_op">=</span> \
<a name="line334"><span class="token_number"> 334 </span></a>            <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">target_app</span><span class="token_op">.</span><span class="token_name">grid_notebook</span><span class="token_op">.</span><span class="token_name">label_obj_from_nameD</span><span class="token_op">[</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">widget_name</span> <span class="token_op">]</span>
<a name="line335"><span class="token_number"> 335 </span></a>
<a name="line336"><span class="token_number"> 336 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">target_app</span><span class="token_op">.</span><span class="token_name">grid_notebook</span><span class="token_op">.</span><span class="token_name">current_label_being_edited</span> <span class="token_op">=</span> <span class="token_name">label</span> <span class="token_comment"># used as flag in onGridBoxLeave to maintain hightlight</span>
<a name="line337"><span class="token_number"> 337 </span></a>        
<a name="line338"><span class="token_number"> 338 </span></a>        <span class="token_name">dialog</span> <span class="token_op">=</span> <span class="token_name">Edit_Properties_Dialog</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">target_app</span><span class="token_op">.</span><span class="token_name">grid_notebook</span><span class="token_op">.</span><span class="token_name">master</span><span class="token_op">,</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">widget_name</span><span class="token_op">,</span> <span class="token_name">dialogOptionsD</span><span class="token_op">=</span><span class="token_name">dialogOptionsD</span><span class="token_op">)</span>
<a name="line339"><span class="token_number"> 339 </span></a>
<a name="line340"><span class="token_number"> 340 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">target_app</span><span class="token_op">.</span><span class="token_name">grid_notebook</span><span class="token_op">.</span><span class="token_name">current_label_being_edited</span> <span class="token_op">=</span> <span class="token_name">None</span> <span class="token_comment"># used as flag in onGridBoxLeave to maintain hightlight</span>
<a name="line341"><span class="token_number"> 341 </span></a>
<a name="line342"><span class="token_number"> 342 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">unhighlight_widget</span><span class="token_op">()</span>
<a name="line343"><span class="token_number"> 343 </span></a>            
<a name="line344"><span class="token_number"> 344 </span></a>        <span class="keyword">if</span> <span class="token_name">dialog</span><span class="token_op">.</span><span class="token_name">result</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="token_name">None</span><span class="token_op">:</span>
<a name="line345"><span class="token_number"> 345 </span></a>            <span class="token_comment"># check for delete widget command</span>
<a name="line346"><span class="token_number"> 346 </span></a><span class="text">            </span><span class="keyword">if</span> <span class="token_op">(</span><span class="token_string">"DeleteWidget"</span> <span class="keyword">in</span> <span class="token_name">dialog</span><span class="token_op">.</span><span class="token_name">result</span><span class="token_op">)</span> <span class="keyword">and</span> <span class="token_op">(</span><span class="token_name">dialog</span><span class="token_op">.</span><span class="token_name">result</span><span class="token_op">[</span><span class="token_string">"DeleteWidget"</span><span class="token_op">]==</span><span class="token_string">"yes"</span><span class="token_op">):</span>
<a name="line347"><span class="token_number"> 347 </span></a>                    
<a name="line348"><span class="token_number"> 348 </span></a><span class="text">                </span><span class="keyword">if</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">widget_type</span> <span class="keyword">in</span> <span class="token_name">ContainerControlsL</span><span class="token_op">:</span>
<a name="line349"><span class="token_number"> 349 </span></a>                    
<a name="line350"><span class="token_number"> 350 </span></a><span class="text">                    </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">target_app</span><span class="token_op">.</span><span class="token_name">removeContainerByName</span><span class="token_op">(</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">widget_name</span> <span class="token_op">)</span>
<a name="line351"><span class="token_number"> 351 </span></a>                <span class="keyword">else</span><span class="token_op">:</span>
<a name="line352"><span class="token_number"> 352 </span></a>                                
<a name="line353"><span class="token_number"> 353 </span></a>                    <span class="token_comment">#print("Deleting ",self.widget_name)</span>
<a name="line354"><span class="token_number"> 354 </span></a><span class="text">                    </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">target_app</span><span class="token_op">.</span><span class="token_name">grid_notebook</span><span class="token_op">.</span><span class="token_name">delete_widget_by_name</span><span class="token_op">(</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">widget_name</span> <span class="token_op">)</span>
<a name="line355"><span class="token_number"> 355 </span></a>                    
<a name="line356"><span class="token_number"> 356 </span></a>                    <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">target_app</span><span class="token_op">.</span><span class="token_name">delComponentByName</span><span class="token_op">(</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">widget_name</span> <span class="token_op">)</span>
<a name="line357"><span class="token_number"> 357 </span></a>                
<a name="line358"><span class="token_number"> 358 </span></a>            <span class="keyword">else</span><span class="token_op">:</span>
<a name="line359"><span class="token_number"> 359 </span></a>                <span class="token_comment">#preview_comp = self.target_app.compObjD[ self.widget_name ]</span>
<a name="line360"><span class="token_number"> 360 </span></a>                <span class="token_comment">#print('target_app dialog.result =',dialog.result)</span>
<a name="line361"><span class="token_number"> 361 </span></a><span class="text">                </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">.</span><span class="token_name">update</span><span class="token_op">(</span> <span class="token_name">dialog</span><span class="token_op">.</span><span class="token_name">result</span> <span class="token_op">)</span>
<a name="line362"><span class="token_number"> 362 </span></a>                <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">set_user_properties</span><span class="token_op">()</span>
<a name="line363"><span class="token_number"> 363 </span></a>                
<a name="line364"><span class="token_number"> 364 </span></a>                <span class="token_comment">#self.target_app.grid_notebook.grid_gui.refresh_preview_win()</span>
<a name="line365"><span class="token_number"> 365 </span></a>                <span class="token_comment">#self.target_app.PreviewWin.update_idletasks()</span>
<a name="line366"><span class="token_number"> 366 </span></a>                <span class="token_comment">#self.target_app.PreviewWin.update()  # &lt;-- update idle tasks ??</span>
<a name="line367"><span class="token_number"> 367 </span></a>                <span class="token_comment">#self.target_app.PreviewWin.setActive()</span>
<a name="line368"><span class="token_number"> 368 </span></a>                
<a name="line369"><span class="token_number"> 369 </span></a>                <span class="token_comment"># need to repostion Canvas Label</span>
<a name="line370"><span class="token_number"> 370 </span></a>                <span class="keyword">if</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">widget_type</span> <span class="token_op">==</span> <span class="token_string">"Canvas"</span><span class="token_op">:</span>
<a name="line371"><span class="token_number"> 371 </span></a><span class="text">                    </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">pw_widget</span><span class="token_op">.</span><span class="token_name">native_widget</span><span class="token_op">.</span><span class="token_name">delete</span><span class="token_op">(</span> <span class="token_string">'all'</span> <span class="token_op">)</span>
<a name="line372"><span class="token_number"> 372 </span></a>                    <span class="token_name">w</span> <span class="token_op">=</span> <span class="token_name">int</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'width'</span><span class="token_op">])</span>
<a name="line373"><span class="token_number"> 373 </span></a>                    <span class="token_name">h</span> <span class="token_op">=</span> <span class="token_name">int</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'height'</span><span class="token_op">])</span>
<a name="line374"><span class="token_number"> 374 </span></a>                    <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">pw_widget</span><span class="token_op">.</span><span class="token_name">native_widget</span><span class="token_op">.</span><span class="token_name">create_text</span><span class="token_op">(</span><span class="token_name">w</span><span class="token_op">//</span><span class="token_number">2</span><span class="token_op">,</span><span class="token_name">h</span><span class="token_op">//</span><span class="token_number">2</span><span class="token_op">,</span> <span class="token_name">text</span><span class="token_op">=</span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">widget_name</span><span class="token_op">,</span> 
<a name="line375"><span class="token_number"> 375 </span></a>                                                             <span class="token_name">fill</span><span class="token_op">=</span><span class="token_string">"black"</span><span class="token_op">,</span> <span class="token_name">width</span><span class="token_op">=</span><span class="token_name">w</span><span class="token_op">,</span> <span class="token_name">anchor</span><span class="token_op">=</span><span class="token_string">'center'</span><span class="token_op">)</span>
<a name="line376"><span class="token_number"> 376 </span></a>                
<a name="line377"><span class="token_number"> 377 </span></a>            <span class="keyword">if</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">target_app</span><span class="token_op">.</span><span class="token_name">PreviewWin</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="token_name">None</span><span class="token_op">:</span>
<a name="line378"><span class="token_number"> 378 </span></a><span class="text">                </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">target_app</span><span class="token_op">.</span><span class="token_name">PreviewWin</span><span class="token_op">.</span><span class="token_name">maybe_resize_preview_win</span><span class="token_op">()</span>
<a name="line379"><span class="token_number"> 379 </span></a>                
<a name="line380"><span class="token_number"> 380 </span></a>    <span class="keyword">def</span> <span class="token_name">destroy_preview_widget</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">):</span>
<a name="line381"><span class="token_number"> 381 </span></a><span class="text">        </span><span class="token_string">"""destroy pw_widget if present"""</span>
<a name="line382"><span class="token_number"> 382 </span></a>        <span class="keyword">if</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">pw_widget</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="token_name">None</span><span class="token_op">:</span>
<a name="line383"><span class="token_number"> 383 </span></a><span class="text">            </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">pw_widget</span><span class="token_op">.</span><span class="token_name">destroy</span><span class="token_op">()</span>
<a name="line384"><span class="token_number"> 384 </span></a>            <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">pw_widget</span> <span class="token_op">=</span> <span class="token_name">None</span>
<a name="line385"><span class="token_number"> 385 </span></a>            <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">disp_frame</span> <span class="token_op">=</span> <span class="token_name">None</span>
<a name="line386"><span class="token_number"> 386 </span></a>    
<a name="line387"><span class="token_number"> 387 </span></a>    <span class="keyword">def</span> <span class="token_name">set_widget_tk_properties</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">):</span>
<a name="line388"><span class="token_number"> 388 </span></a>        
<a name="line389"><span class="token_number"> 389 </span></a><span class="text">        </span><span class="keyword">if</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">pw_widget</span> <span class="keyword">is</span> <span class="token_name">None</span><span class="token_op">:</span>
<a name="line390"><span class="token_number"> 390 </span></a><span class="text">            </span><span class="keyword">return</span>
<a name="line391"><span class="token_number"> 391 </span></a>        
<a name="line392"><span class="token_number"> 392 </span></a>        <span class="token_comment">#if self.widget_type == 'Tab':</span>
<a name="line393"><span class="token_number"> 393 </span></a>        <span class="token_comment">#    return</span>
<a name="line394"><span class="token_number"> 394 </span></a>        
<a name="line395"><span class="token_number"> 395 </span></a>        <span class="token_comment">#... now done by PW_Widget</span>
<a name="line396"><span class="token_number"> 396 </span></a>        <span class="token_comment"># get the default property options for native_widget when 1st created.</span>
<a name="line397"><span class="token_number"> 397 </span></a>        <span class="token_comment">#self.default_tkOptionD = get_properties_dict( self.pw_widget )</span>
<a name="line398"><span class="token_number"> 398 </span></a>        
<a name="line399"><span class="token_number"> 399 </span></a>        <span class="token_comment"># set any user options (at this point only width and height)</span>
<a name="line400"><span class="token_number"> 400 </span></a>        <span class="token_comment">#for key, val in self.user_tkOptionD.items():</span>
<a name="line401"><span class="token_number"> 401 </span></a>        <span class="token_comment">#    set_attribute_if_possible(self.pw_widget, key, val)</span>
<a name="line402"><span class="token_number"> 402 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">pw_widget</span><span class="token_op">.</span><span class="token_name">set_native_widget_attr</span><span class="token_op">()</span>
<a name="line403"><span class="token_number"> 403 </span></a>        
<a name="line404"><span class="token_number"> 404 </span></a>        <span class="token_comment"># set text of widgets with insert method</span>
<a name="line405"><span class="token_number"> 405 </span></a>        <span class="keyword">try</span><span class="token_op">:</span>
<a name="line406"><span class="token_number"> 406 </span></a><span class="text">            </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">pw_widget</span><span class="token_op">.</span><span class="token_name">native_widget</span><span class="token_op">.</span><span class="token_name">delete</span><span class="token_op">(</span><span class="token_number">0</span><span class="token_op">,</span> <span class="token_name">END</span><span class="token_op">)</span>
<a name="line407"><span class="token_number"> 407 </span></a>        <span class="keyword">except</span><span class="token_op">:</span>
<a name="line408"><span class="token_number"> 408 </span></a><span class="text">            </span><span class="keyword">pass</span>
<a name="line409"><span class="token_number"> 409 </span></a>        <span class="keyword">try</span><span class="token_op">:</span>
<a name="line410"><span class="token_number"> 410 </span></a><span class="text">            </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">pw_widget</span><span class="token_op">.</span><span class="token_name">native_widget</span><span class="token_op">.</span><span class="token_name">insert</span><span class="token_op">(</span><span class="token_name">END</span><span class="token_op">,</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">widget_name</span><span class="token_op">)</span>
<a name="line411"><span class="token_number"> 411 </span></a>        <span class="keyword">except</span><span class="token_op">:</span>
<a name="line412"><span class="token_number"> 412 </span></a><span class="text">            </span><span class="keyword">pass</span>
<a name="line413"><span class="token_number"> 413 </span></a>    
<a name="line414"><span class="token_number"> 414 </span></a>    <span class="keyword">def</span> <span class="token_name">set_user_properties</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">):</span>
<a name="line415"><span class="token_number"> 415 </span></a>        
<a name="line416"><span class="token_number"> 416 </span></a><span class="text">        </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">pw_widget</span><span class="token_op">.</span><span class="token_name">set_native_widget_attr</span><span class="token_op">()</span>
<a name="line417"><span class="token_number"> 417 </span></a>        
<a name="line418"><span class="token_number"> 418 </span></a>        <span class="token_comment"># set any user options (at this point only width and height)</span>
<a name="line419"><span class="token_number"> 419 </span></a>        <span class="token_comment">#for key, val in self.user_tkOptionD.items():</span>
<a name="line420"><span class="token_number"> 420 </span></a>        <span class="token_comment">#    set_attribute_if_possible(self.pw_widget.native_widget, key, val)</span>
<a name="line421"><span class="token_number"> 421 </span></a>        
<a name="line422"><span class="token_number"> 422 </span></a>        <span class="token_comment">#self.target_app.PreviewWin.update_idletasks()</span>
<a name="line423"><span class="token_number"> 423 </span></a>    
<a name="line424"><span class="token_number"> 424 </span></a>    <span class="keyword">def</span> <span class="token_name">get_property</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">,</span> <span class="token_name">attr_name</span><span class="token_op">):</span>
<a name="line425"><span class="token_number"> 425 </span></a><span class="text">        </span><span class="keyword">if</span> <span class="token_name">attr_name</span> <span class="keyword">in</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">:</span>
<a name="line426"><span class="token_number"> 426 </span></a><span class="text">            </span><span class="keyword">return</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span> <span class="token_name">attr_name</span> <span class="token_op">]</span>
<a name="line427"><span class="token_number"> 427 </span></a>            
<a name="line428"><span class="token_number"> 428 </span></a>        <span class="keyword">if</span> <span class="token_name">attr_name</span> <span class="keyword">in</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">default_tkOptionD</span><span class="token_op">:</span>
<a name="line429"><span class="token_number"> 429 </span></a><span class="text">            </span><span class="keyword">return</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">default_tkOptionD</span><span class="token_op">[</span> <span class="token_name">attr_name</span> <span class="token_op">]</span>
<a name="line430"><span class="token_number"> 430 </span></a>        <span class="keyword">return</span> <span class="token_name">None</span>
<a name="line431"><span class="token_number"> 431 </span></a>    
<a name="line432"><span class="token_number"> 432 </span></a>    <span class="keyword">def</span> <span class="token_name">set_a_row_weight</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">,</span> <span class="token_name">row_inp</span><span class="token_op">,</span> <span class="token_name">wt_inp</span><span class="token_op">):</span>
<a name="line433"><span class="token_number"> 433 </span></a><span class="text">        </span><span class="token_string">"""container objects might have weights on rows and columns"""</span>
<a name="line434"><span class="token_number"> 434 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'row_weights'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">add_entry_to_weight_str</span><span class="token_op">(</span> <span class="token_name">row_inp</span><span class="token_op">,</span> <span class="token_name">wt_inp</span><span class="token_op">,</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'row_weights'</span><span class="token_op">])</span>
<a name="line435"><span class="token_number"> 435 </span></a>    
<a name="line436"><span class="token_number"> 436 </span></a>    <span class="keyword">def</span> <span class="token_name">set_a_col_weight</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">,</span> <span class="token_name">col_inp</span><span class="token_op">,</span> <span class="token_name">wt_inp</span><span class="token_op">):</span>
<a name="line437"><span class="token_number"> 437 </span></a><span class="text">        </span><span class="token_string">"""container objects might have weights on rows and columns"""</span>
<a name="line438"><span class="token_number"> 438 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'col_weights'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">add_entry_to_weight_str</span><span class="token_op">(</span> <span class="token_name">col_inp</span><span class="token_op">,</span> <span class="token_name">wt_inp</span><span class="token_op">,</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'col_weights'</span><span class="token_op">])</span>
<a name="line439"><span class="token_number"> 439 </span></a>
<a name="line440"><span class="token_number"> 440 </span></a><span class="keyword">class</span> <span class="token_name">TargetTkAppDef</span><span class="token_op">(</span> <span class="token_name">object</span> <span class="token_op">):</span>
<a name="line441"><span class="token_number"> 441 </span></a>        
<a name="line442"><span class="token_number"> 442 </span></a><span class="text">    </span><span class="keyword">def</span> <span class="token_name">__init__</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">,</span> <span class="token_name">name</span><span class="token_op">=</span><span class="token_string">'myApp'</span><span class="token_op">,</span> <span class="token_name">PreviewWin</span><span class="token_op">=</span><span class="token_name">None</span><span class="token_op">,</span> <span class="token_name">grid_notebook</span><span class="token_op">=</span><span class="token_name">None</span> <span class="token_op">):</span>
<a name="line443"><span class="token_number"> 443 </span></a>        
<a name="line444"><span class="token_number"> 444 </span></a><span class="text">        </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">name</span> <span class="token_op">=</span> <span class="token_name">name</span>
<a name="line445"><span class="token_number"> 445 </span></a>        
<a name="line446"><span class="token_number"> 446 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">PreviewWin</span> <span class="token_op">=</span> <span class="token_name">PreviewWin</span>  <span class="token_comment"># display for widgets</span>
<a name="line447"><span class="token_number"> 447 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">grid_notebook</span> <span class="token_op">=</span> <span class="token_name">grid_notebook</span>
<a name="line448"><span class="token_number"> 448 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">init_properties</span><span class="token_op">()</span>
<a name="line449"><span class="token_number"> 449 </span></a>        
<a name="line450"><span class="token_number"> 450 </span></a>        <span class="token_comment"># if crc_reference does not match a call to get_model_crc, then the model has changed.</span>
<a name="line451"><span class="token_number"> 451 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">crc_reference</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">get_model_crc</span><span class="token_op">()</span>
<a name="line452"><span class="token_number"> 452 </span></a>    
<a name="line453"><span class="token_number"> 453 </span></a>    <span class="keyword">def</span> <span class="token_name">init_properties</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">):</span>
<a name="line454"><span class="token_number"> 454 </span></a>        <span class="token_comment"># form and widgets have non-tk options here (e.g. name, x, y)</span>
<a name="line455"><span class="token_number"> 455 </span></a><span class="text">        </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">app_attrD</span> <span class="token_op">=</span> <span class="token_op">{</span><span class="token_string">'name'</span><span class="token_op">:</span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">name</span><span class="token_op">,</span><span class="token_string">'x'</span><span class="token_op">:</span><span class="token_number">350</span><span class="token_op">,</span> <span class="token_string">'y'</span><span class="token_op">:</span><span class="token_number">20</span><span class="token_op">,</span> <span class="token_string">'width'</span><span class="token_op">:</span><span class="token_number">300</span><span class="token_op">,</span> <span class="token_string">'height'</span><span class="token_op">:</span><span class="token_number">300</span><span class="token_op">,</span>
<a name="line456"><span class="token_number"> 456 </span></a>            <span class="token_string">'guitype'</span><span class="token_op">:</span><span class="token_string">'main'</span><span class="token_op">,</span> <span class="token_string">'hideokbutton'</span><span class="token_op">:</span><span class="token_string">'no'</span><span class="token_op">,</span>
<a name="line457"><span class="token_number"> 457 </span></a>            <span class="token_string">'hasmenu'</span><span class="token_op">:</span><span class="token_string">'no'</span><span class="token_op">,</span> 
<a name="line458"><span class="token_number"> 458 </span></a>            <span class="token_string">'menu'</span><span class="token_op">:</span><span class="token_string">'File\n  New\n  Open\n  Save\n\n  Exit\nHelp\n  Sounds\n    Moo\n    Meow'</span><span class="token_op">,</span>
<a name="line459"><span class="token_number"> 459 </span></a>            <span class="token_string">'add_menu_ctrl_keys'</span><span class="token_op">:</span><span class="token_string">'yes'</span><span class="token_op">,</span>
<a name="line460"><span class="token_number"> 460 </span></a>            <span class="token_string">'hasstatusbar'</span><span class="token_op">:</span><span class="token_string">'no'</span><span class="token_op">,</span><span class="token_string">'hasstddialmess'</span><span class="token_op">:</span><span class="token_string">'no'</span><span class="token_op">,</span> <span class="token_string">'hasstddialfile'</span><span class="token_op">:</span><span class="token_string">'no'</span><span class="token_op">,</span> 
<a name="line461"><span class="token_number"> 461 </span></a>            <span class="token_string">'hasstddialcolor'</span><span class="token_op">:</span><span class="token_string">'no'</span><span class="token_op">,</span> <span class="token_string">'hasstdalarm'</span><span class="token_op">:</span><span class="token_string">'no'</span><span class="token_op">,</span> <span class="token_string">'resizable'</span><span class="token_op">:</span><span class="token_string">'yes'</span><span class="token_op">,</span>
<a name="line462"><span class="token_number"> 462 </span></a>            <span class="token_string">'row_weights'</span><span class="token_op">:</span><span class="token_string">''</span><span class="token_op">,</span> <span class="token_string">'col_weights'</span><span class="token_op">:</span><span class="token_string">''</span><span class="token_op">}</span>
<a name="line463"><span class="token_number"> 463 </span></a>                
<a name="line464"><span class="token_number"> 464 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">tkOptionD</span> <span class="token_op">=</span> <span class="token_op">{}</span> <span class="token_comment"># form and widgets have Tk options here (e.g. width, background, etc.)</span>
<a name="line465"><span class="token_number"> 465 </span></a>        
<a name="line466"><span class="token_number"> 466 </span></a>        <span class="token_comment"># compObjD has attributes like row, col, widget_name, tab_label, etc.</span>
<a name="line467"><span class="token_number"> 467 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span> <span class="token_op">=</span> <span class="token_op">{}</span> <span class="token_comment"># index=widget_name: value=Component object</span>
<a name="line468"><span class="token_number"> 468 </span></a>        
<a name="line469"><span class="token_number"> 469 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">tab_ownerD</span> <span class="token_op">=</span> <span class="token_op">{}</span> <span class="token_comment"># index=Tab name: value=Notebook name</span>
<a name="line470"><span class="token_number"> 470 </span></a>    
<a name="line471"><span class="token_number"> 471 </span></a>    <span class="keyword">def</span> <span class="token_name">reset_crc_reference</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">):</span>
<a name="line472"><span class="token_number"> 472 </span></a><span class="text">        </span><span class="token_string">"""When a model is first read, or after it is saved, reset the crc_reference."""</span>
<a name="line473"><span class="token_number"> 473 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">crc_reference</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">get_model_crc</span><span class="token_op">()</span>
<a name="line474"><span class="token_number"> 474 </span></a>    
<a name="line475"><span class="token_number"> 475 </span></a>    <span class="keyword">def</span> <span class="token_name">model_has_changed</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">):</span>
<a name="line476"><span class="token_number"> 476 </span></a><span class="text">        </span><span class="token_string">"""Returns True if the model has changed (i.e. CRC no longer matches.)"""</span>
<a name="line477"><span class="token_number"> 477 </span></a>        <span class="keyword">return</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">crc_reference</span> <span class="token_op">!=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">get_model_crc</span><span class="token_op">()</span>
<a name="line478"><span class="token_number"> 478 </span></a>    
<a name="line479"><span class="token_number"> 479 </span></a>    <span class="keyword">def</span> <span class="token_name">get_model_crc</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">):</span>
<a name="line480"><span class="token_number"> 480 </span></a><span class="text">        </span><span class="token_string">"""Use a calculated cylic redundancy check (CRC) to detect changes to model."""</span>
<a name="line481"><span class="token_number"> 481 </span></a>        <span class="token_name">sL</span> <span class="token_op">=</span> <span class="token_op">[]</span> <span class="token_comment"># will concatenate a list of strings for final calc.</span>
<a name="line482"><span class="token_number"> 482 </span></a>        
<a name="line483"><span class="token_number"> 483 </span></a>        <span class="keyword">for</span> <span class="token_name">key</span> <span class="keyword">in</span> <span class="token_name">sorted</span><span class="token_op">(</span><span class="token_name">dir</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">),</span> <span class="token_name">key</span><span class="token_op">=</span><span class="keyword">lambda</span> <span class="token_name">s</span><span class="token_op">:</span> <span class="token_name">s</span><span class="token_op">.</span><span class="token_name">lower</span><span class="token_op">()):</span>
<a name="line484"><span class="token_number"> 484 </span></a><span class="text">            </span><span class="keyword">if</span> <span class="token_name">key</span><span class="token_op">.</span><span class="token_name">startswith</span><span class="token_op">(</span><span class="token_string">'__'</span><span class="token_op">)</span> <span class="keyword">or</span> <span class="token_name">key</span> <span class="keyword">in</span> <span class="token_op">(</span><span class="token_string">'PreviewWin'</span><span class="token_op">,</span><span class="token_string">'grid_notebook'</span><span class="token_op">,</span><span class="token_string">'crc_reference'</span><span class="token_op">):</span>
<a name="line485"><span class="token_number"> 485 </span></a><span class="text">                </span><span class="keyword">pass</span>
<a name="line486"><span class="token_number"> 486 </span></a>            <span class="keyword">else</span><span class="token_op">:</span>
<a name="line487"><span class="token_number"> 487 </span></a><span class="text">                </span><span class="token_name">val</span> <span class="token_op">=</span> <span class="token_name">getattr</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">,</span> <span class="token_name">key</span><span class="token_op">)</span>
<a name="line488"><span class="token_number"> 488 </span></a>                <span class="keyword">if</span> <span class="token_name">type</span><span class="token_op">(</span><span class="token_name">val</span><span class="token_op">)</span> <span class="keyword">in</span> <span class="token_op">(</span><span class="token_name">int</span><span class="token_op">,</span> <span class="token_name">dict</span><span class="token_op">,</span> <span class="token_name">list</span><span class="token_op">,</span> <span class="token_name">float</span><span class="token_op">,</span> <span class="token_name">str</span><span class="token_op">,</span> <span class="token_name">type</span><span class="token_op">(</span><span class="token_name">None</span><span class="token_op">)):</span>
<a name="line489"><span class="token_number"> 489 </span></a>                    <span class="token_comment">#print(key,'self crc')</span>
<a name="line490"><span class="token_number"> 490 </span></a><span class="text">                    </span><span class="token_name">sL</span><span class="token_op">.</span><span class="token_name">append</span><span class="token_op">(</span> <span class="token_name">repr</span><span class="token_op">(</span><span class="token_name">val</span><span class="token_op">)</span> <span class="token_op">)</span>
<a name="line491"><span class="token_number"> 491 </span></a>                
<a name="line492"><span class="token_number"> 492 </span></a>        <span class="keyword">for</span> <span class="token_name">widget_name</span> <span class="keyword">in</span> <span class="token_name">sorted</span><span class="token_op">(</span><span class="token_name">list</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">.</span><span class="token_name">keys</span><span class="token_op">()),</span> <span class="token_name">key</span><span class="token_op">=</span><span class="keyword">lambda</span> <span class="token_name">s</span><span class="token_op">:</span> <span class="token_name">s</span><span class="token_op">.</span><span class="token_name">lower</span><span class="token_op">()):</span>
<a name="line493"><span class="token_number"> 493 </span></a><span class="text">            </span><span class="token_name">c</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">[</span> <span class="token_name">widget_name</span> <span class="token_op">]</span>
<a name="line494"><span class="token_number"> 494 </span></a>            
<a name="line495"><span class="token_number"> 495 </span></a>            <span class="keyword">for</span> <span class="token_name">key</span> <span class="keyword">in</span> <span class="token_name">sorted</span><span class="token_op">(</span><span class="token_name">dir</span><span class="token_op">(</span><span class="token_name">c</span><span class="token_op">),</span> <span class="token_name">key</span><span class="token_op">=</span><span class="keyword">lambda</span> <span class="token_name">s</span><span class="token_op">:</span> <span class="token_name">s</span><span class="token_op">.</span><span class="token_name">lower</span><span class="token_op">()):</span>
<a name="line496"><span class="token_number"> 496 </span></a><span class="text">                </span><span class="keyword">if</span> <span class="token_name">key</span><span class="token_op">.</span><span class="token_name">startswith</span><span class="token_op">(</span><span class="token_string">'__'</span><span class="token_op">)</span> <span class="keyword">or</span> <span class="token_name">key</span> <span class="keyword">in</span> <span class="token_op">(</span><span class="token_string">'PreviewWin'</span><span class="token_op">,</span><span class="token_string">'grid_notebook'</span><span class="token_op">):</span>
<a name="line497"><span class="token_number"> 497 </span></a><span class="text">                    </span><span class="keyword">pass</span>
<a name="line498"><span class="token_number"> 498 </span></a>                <span class="keyword">else</span><span class="token_op">:</span>
<a name="line499"><span class="token_number"> 499 </span></a><span class="text">                    </span><span class="token_name">val</span> <span class="token_op">=</span> <span class="token_name">getattr</span><span class="token_op">(</span><span class="token_name">c</span><span class="token_op">,</span> <span class="token_name">key</span><span class="token_op">)</span>
<a name="line500"><span class="token_number"> 500 </span></a>                    <span class="keyword">if</span> <span class="token_name">type</span><span class="token_op">(</span><span class="token_name">val</span><span class="token_op">)</span> <span class="keyword">in</span> <span class="token_op">(</span><span class="token_name">int</span><span class="token_op">,</span> <span class="token_name">dict</span><span class="token_op">,</span> <span class="token_name">list</span><span class="token_op">,</span> <span class="token_name">float</span><span class="token_op">,</span> <span class="token_name">str</span><span class="token_op">,</span> <span class="token_name">type</span><span class="token_op">(</span><span class="token_name">None</span><span class="token_op">)):</span>
<a name="line501"><span class="token_number"> 501 </span></a>                        <span class="token_comment">#print(key,'c crc')</span>
<a name="line502"><span class="token_number"> 502 </span></a><span class="text">                        </span><span class="token_name">sL</span><span class="token_op">.</span><span class="token_name">append</span><span class="token_op">(</span> <span class="token_name">repr</span><span class="token_op">(</span><span class="token_name">val</span><span class="token_op">)</span> <span class="token_op">)</span>
<a name="line503"><span class="token_number"> 503 </span></a>        <span class="token_comment"># create a single string </span>
<a name="line504"><span class="token_number"> 504 </span></a>        <span class="token_name">s</span> <span class="token_op">=</span> <span class="token_string">''</span><span class="token_op">.</span><span class="token_name">join</span><span class="token_op">(</span><span class="token_name">sL</span><span class="token_op">)</span>
<a name="line505"><span class="token_number"> 505 </span></a>        <span class="token_comment">#if sys.version_info &lt; (3,):</span>
<a name="line506"><span class="token_number"> 506 </span></a>        <span class="keyword">return</span> <span class="token_name">binascii</span><span class="token_op">.</span><span class="token_name">crc32</span><span class="token_op">(</span> <span class="token_name">binascii</span><span class="token_op">.</span><span class="token_name">a2b_qp</span><span class="token_op">(</span><span class="token_name">s</span><span class="token_op">)</span> <span class="token_op">)</span> <span class="token_op">&amp;</span> <span class="token_number">0xffffffff</span> <span class="token_comment"># to get same value for all python platforms, use &amp; 0xffffffff</span>
<a name="line507"><span class="token_number"> 507 </span></a>        <span class="token_comment">#else:</span>
<a name="line508"><span class="token_number"> 508 </span></a>        <span class="token_comment">#    return binascii.crc32( binascii.a2b_qp(s) ) &amp; 0xffffffff # to get same value for all python platforms, use &amp; 0xffffffff</span>
<a name="line509"><span class="token_number"> 509 </span></a>    
<a name="line510"><span class="token_number"> 510 </span></a>    <span class="keyword">def</span> <span class="token_name">change_notebook_tab_label</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">,</span> <span class="token_name">tab_name_inp</span><span class="token_op">,</span>  <span class="token_name">tab_label_inp</span><span class="token_op">):</span>
<a name="line511"><span class="token_number"> 511 </span></a><span class="text">        </span><span class="token_name">notebook_name</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">tab_ownerD</span><span class="token_op">[</span> <span class="token_name">tab_name_inp</span> <span class="token_op">]</span>
<a name="line512"><span class="token_number"> 512 </span></a>        <span class="token_name">nb_obj</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">[</span> <span class="token_name">notebook_name</span> <span class="token_op">]</span>
<a name="line513"><span class="token_number"> 513 </span></a>        
<a name="line514"><span class="token_number"> 514 </span></a>        <span class="keyword">for</span> <span class="token_name">itab</span><span class="token_op">,</span> <span class="token_op">(</span><span class="token_name">row</span><span class="token_op">,</span> <span class="token_name">col</span><span class="token_op">,</span> <span class="token_name">tab_name</span><span class="token_op">,</span> <span class="token_name">tab_label</span><span class="token_op">)</span> <span class="keyword">in</span> <span class="token_name">enumerate</span><span class="token_op">(</span> <span class="token_name">nb_obj</span><span class="token_op">.</span><span class="token_name">tab_nameL</span> <span class="token_op">):</span>
<a name="line515"><span class="token_number"> 515 </span></a><span class="text">            </span><span class="keyword">if</span> <span class="token_name">tab_name</span> <span class="token_op">==</span> <span class="token_name">tab_name_inp</span><span class="token_op">:</span>
<a name="line516"><span class="token_number"> 516 </span></a><span class="text">                </span><span class="keyword">if</span> <span class="token_name">tab_label_inp</span><span class="token_op">:</span>
<a name="line517"><span class="token_number"> 517 </span></a><span class="text">                    </span><span class="token_name">tab_label</span> <span class="token_op">=</span> <span class="token_name">tab_label_inp</span>
<a name="line518"><span class="token_number"> 518 </span></a>                <span class="token_name">nb_obj</span><span class="token_op">.</span><span class="token_name">tab_nameL</span><span class="token_op">[</span> <span class="token_name">itab</span> <span class="token_op">]</span> <span class="token_op">=</span> <span class="token_op">(</span><span class="token_name">row</span><span class="token_op">,</span> <span class="token_name">col</span><span class="token_op">,</span> <span class="token_name">tab_name_inp</span><span class="token_op">,</span> <span class="token_name">tab_label</span><span class="token_op">)</span>
<a name="line519"><span class="token_number"> 519 </span></a>                <span class="keyword">break</span>
<a name="line520"><span class="token_number"> 520 </span></a>        
<a name="line521"><span class="token_number"> 521 </span></a>        <span class="token_comment"># arrange labels in pasted order. sorted by (row, col)</span>
<a name="line522"><span class="token_number"> 522 </span></a>        <span class="token_name">nb_obj</span><span class="token_op">.</span><span class="token_name">tab_nameL</span> <span class="token_op">=</span> <span class="token_name">sorted</span><span class="token_op">(</span> <span class="token_name">nb_obj</span><span class="token_op">.</span><span class="token_name">tab_nameL</span> <span class="token_op">)</span>
<a name="line523"><span class="token_number"> 523 </span></a>        <span class="token_name">nb_obj</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'tab_labels'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_string">'\n'</span><span class="token_op">.</span><span class="token_name">join</span><span class="token_op">(</span> <span class="token_op">[</span><span class="token_name">t</span><span class="token_op">[</span><span class="token_number">3</span><span class="token_op">]</span> <span class="keyword">for</span> <span class="token_name">t</span> <span class="keyword">in</span> <span class="token_name">nb_obj</span><span class="token_op">.</span><span class="token_name">tab_nameL</span><span class="token_op">]</span> <span class="token_op">)</span>
<a name="line524"><span class="token_number"> 524 </span></a>        
<a name="line525"><span class="token_number"> 525 </span></a>    
<a name="line526"><span class="token_number"> 526 </span></a>    <span class="keyword">def</span> <span class="token_name">arrange_notebook_tabs</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">,</span> <span class="token_name">tab_name_inp</span><span class="token_op">,</span> <span class="token_name">row_inp</span><span class="token_op">,</span> <span class="token_name">col_inp</span><span class="token_op">):</span>
<a name="line527"><span class="token_number"> 527 </span></a>        
<a name="line528"><span class="token_number"> 528 </span></a><span class="text">        </span><span class="token_name">notebook_name</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">tab_ownerD</span><span class="token_op">[</span> <span class="token_name">tab_name_inp</span> <span class="token_op">]</span>
<a name="line529"><span class="token_number"> 529 </span></a>        <span class="token_name">nb_obj</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">[</span> <span class="token_name">notebook_name</span> <span class="token_op">]</span>
<a name="line530"><span class="token_number"> 530 </span></a>        
<a name="line531"><span class="token_number"> 531 </span></a>        <span class="keyword">for</span> <span class="token_name">itab</span><span class="token_op">,</span> <span class="token_op">(</span><span class="token_name">row</span><span class="token_op">,</span> <span class="token_name">col</span><span class="token_op">,</span> <span class="token_name">tab_name</span><span class="token_op">,</span> <span class="token_name">tab_label</span><span class="token_op">)</span> <span class="keyword">in</span> <span class="token_name">enumerate</span><span class="token_op">(</span> <span class="token_name">nb_obj</span><span class="token_op">.</span><span class="token_name">tab_nameL</span> <span class="token_op">):</span>
<a name="line532"><span class="token_number"> 532 </span></a><span class="text">            </span><span class="keyword">if</span> <span class="token_name">tab_name</span> <span class="token_op">==</span> <span class="token_name">tab_name_inp</span><span class="token_op">:</span>
<a name="line533"><span class="token_number"> 533 </span></a><span class="text">                </span><span class="token_name">nb_obj</span><span class="token_op">.</span><span class="token_name">tab_nameL</span><span class="token_op">[</span> <span class="token_name">itab</span> <span class="token_op">]</span> <span class="token_op">=</span> <span class="token_op">(</span><span class="token_name">row_inp</span><span class="token_op">,</span> <span class="token_name">col_inp</span><span class="token_op">,</span> <span class="token_name">tab_name_inp</span><span class="token_op">,</span> <span class="token_name">tab_label</span><span class="token_op">)</span>
<a name="line534"><span class="token_number"> 534 </span></a>                <span class="keyword">break</span>
<a name="line535"><span class="token_number"> 535 </span></a>        
<a name="line536"><span class="token_number"> 536 </span></a>        <span class="token_comment"># arrange labels in pasted order. sorted by (row, col)</span>
<a name="line537"><span class="token_number"> 537 </span></a>        <span class="token_name">nb_obj</span><span class="token_op">.</span><span class="token_name">tab_nameL</span> <span class="token_op">=</span> <span class="token_name">sorted</span><span class="token_op">(</span> <span class="token_name">nb_obj</span><span class="token_op">.</span><span class="token_name">tab_nameL</span> <span class="token_op">)</span>
<a name="line538"><span class="token_number"> 538 </span></a>        <span class="token_name">nb_obj</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'tab_labels'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_string">'\n'</span><span class="token_op">.</span><span class="token_name">join</span><span class="token_op">(</span> <span class="token_op">[</span><span class="token_name">t</span><span class="token_op">[</span><span class="token_number">3</span><span class="token_op">]</span> <span class="keyword">for</span> <span class="token_name">t</span> <span class="keyword">in</span> <span class="token_name">nb_obj</span><span class="token_op">.</span><span class="token_name">tab_nameL</span><span class="token_op">]</span> <span class="token_op">)</span>
<a name="line539"><span class="token_number"> 539 </span></a>        
<a name="line540"><span class="token_number"> 540 </span></a>        <span class="token_comment">#print('tab_nameL',nb_obj.tab_nameL)</span>
<a name="line541"><span class="token_number"> 541 </span></a>        
<a name="line542"><span class="token_number"> 542 </span></a>        <span class="keyword">if</span> <span class="token_name">nb_obj</span><span class="token_op">.</span><span class="token_name">pw_widget</span><span class="token_op">:</span>
<a name="line543"><span class="token_number"> 543 </span></a><span class="text">            </span><span class="token_name">nb_obj</span><span class="token_op">.</span><span class="token_name">pw_widget</span><span class="token_op">.</span><span class="token_name">destroy</span><span class="token_op">()</span>
<a name="line544"><span class="token_number"> 544 </span></a>            <span class="token_name">nb_obj</span><span class="token_op">.</span><span class="token_name">pw_widget</span> <span class="token_op">=</span> <span class="token_name">None</span>
<a name="line545"><span class="token_number"> 545 </span></a>            <span class="token_comment">#print('Eliminated ',notebook_name,'Preview Object')</span>
<a name="line546"><span class="token_number"> 546 </span></a>                
<a name="line547"><span class="token_number"> 547 </span></a>    <span class="keyword">def</span> <span class="token_name">add_tab_to_notebook</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">,</span> <span class="token_name">row</span><span class="token_op">,</span> <span class="token_name">col</span><span class="token_op">,</span> <span class="token_name">tab_name</span><span class="token_op">,</span> <span class="token_name">notebook_name</span><span class="token_op">):</span>
<a name="line548"><span class="token_number"> 548 </span></a><span class="text">        </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">tab_ownerD</span><span class="token_op">[</span> <span class="token_name">tab_name</span> <span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">notebook_name</span>
<a name="line549"><span class="token_number"> 549 </span></a>        
<a name="line550"><span class="token_number"> 550 </span></a>        <span class="token_comment">#print('compObjD.keys() =',self.compObjD.keys())</span>
<a name="line551"><span class="token_number"> 551 </span></a>        <span class="token_name">nb_obj</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">[</span> <span class="token_name">notebook_name</span> <span class="token_op">]</span>
<a name="line552"><span class="token_number"> 552 </span></a>        
<a name="line553"><span class="token_number"> 553 </span></a>        <span class="token_name">nb_obj</span><span class="token_op">.</span><span class="token_name">tab_nameL</span><span class="token_op">.</span><span class="token_name">append</span><span class="token_op">(</span> <span class="token_op">(</span><span class="token_name">row</span><span class="token_op">,</span> <span class="token_name">col</span><span class="token_op">,</span> <span class="token_name">tab_name</span><span class="token_op">,</span> <span class="token_name">tab_name</span><span class="token_op">)</span> <span class="token_op">)</span> <span class="token_comment"># make label same as name for now</span>
<a name="line554"><span class="token_number"> 554 </span></a>        <span class="token_comment">#print(notebook_name, ' tab_nameL= ', nb_obj.tab_nameL)</span>
<a name="line555"><span class="token_number"> 555 </span></a>        
<a name="line556"><span class="token_number"> 556 </span></a>        <span class="token_comment"># arrange labels in pasted order. sorted by (row, col)</span>
<a name="line557"><span class="token_number"> 557 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">arrange_notebook_tabs</span><span class="token_op">(</span> <span class="token_name">tab_name</span><span class="token_op">,</span> <span class="token_name">row</span><span class="token_op">,</span> <span class="token_name">col</span> <span class="token_op">)</span>
<a name="line558"><span class="token_number"> 558 </span></a>        
<a name="line559"><span class="token_number"> 559 </span></a>    
<a name="line560"><span class="token_number"> 560 </span></a>    <span class="keyword">def</span> <span class="token_name">get_tab_native_widget</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">,</span> <span class="token_name">tab_name</span> <span class="token_op">):</span>
<a name="line561"><span class="token_number"> 561 </span></a><span class="text">        </span><span class="token_name">notebook_name</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">tab_ownerD</span><span class="token_op">[</span> <span class="token_name">tab_name</span> <span class="token_op">]</span>
<a name="line562"><span class="token_number"> 562 </span></a>        <span class="token_name">nb_obj</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">[</span> <span class="token_name">notebook_name</span> <span class="token_op">]</span>
<a name="line563"><span class="token_number"> 563 </span></a>        <span class="token_comment">#print('.......... nb_obj =', nb_obj)</span>
<a name="line564"><span class="token_number"> 564 </span></a>        
<a name="line565"><span class="token_number"> 565 </span></a>        <span class="token_name">n</span> <span class="token_op">=</span> <span class="token_number">0</span>
<a name="line566"><span class="token_number"> 566 </span></a>        <span class="token_comment">#print('    nb_obj.tab_nameL=',nb_obj.tab_nameL)</span>
<a name="line567"><span class="token_number"> 567 </span></a>        <span class="keyword">for</span> <span class="token_name">i</span><span class="token_op">,</span> <span class="token_op">(</span><span class="token_name">row</span><span class="token_op">,</span> <span class="token_name">col</span><span class="token_op">,</span> <span class="token_name">t_name</span><span class="token_op">,</span> <span class="token_name">tab_label</span><span class="token_op">)</span> <span class="keyword">in</span> <span class="token_name">enumerate</span><span class="token_op">(</span> <span class="token_name">nb_obj</span><span class="token_op">.</span><span class="token_name">tab_nameL</span> <span class="token_op">):</span>
<a name="line568"><span class="token_number"> 568 </span></a>            <span class="token_comment">#print('In get_tab_native_widget, tab_name=',tab_name,' t_name=',t_name)</span>
<a name="line569"><span class="token_number"> 569 </span></a><span class="text">            </span><span class="keyword">if</span> <span class="token_name">t_name</span> <span class="token_op">==</span> <span class="token_name">tab_name</span><span class="token_op">:</span>
<a name="line570"><span class="token_number"> 570 </span></a><span class="text">                </span><span class="token_name">n</span> <span class="token_op">=</span> <span class="token_name">i</span>
<a name="line571"><span class="token_number"> 571 </span></a>                <span class="keyword">break</span>
<a name="line572"><span class="token_number"> 572 </span></a>        
<a name="line573"><span class="token_number"> 573 </span></a>        <span class="token_comment">#print('.......... In get_tab_native_widget, tab_name=',tab_name,' n=',n)</span>
<a name="line574"><span class="token_number"> 574 </span></a>        <span class="keyword">return</span> <span class="token_name">nb_obj</span><span class="token_op">.</span><span class="token_name">pw_widget</span><span class="token_op">.</span><span class="token_name">tab_frameL</span><span class="token_op">[</span> <span class="token_name">n</span> <span class="token_op">]</span>
<a name="line575"><span class="token_number"> 575 </span></a>        
<a name="line576"><span class="token_number"> 576 </span></a>    
<a name="line577"><span class="token_number"> 577 </span></a>    <span class="keyword">def</span> <span class="token_name">reinitialize</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">):</span>
<a name="line578"><span class="token_number"> 578 </span></a><span class="text">        </span><span class="token_string">"""Delete everything and start over"""</span>
<a name="line579"><span class="token_number"> 579 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">destroy_all_preview_widgets</span><span class="token_op">()</span>
<a name="line580"><span class="token_number"> 580 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">del_all_components</span><span class="token_op">()</span>
<a name="line581"><span class="token_number"> 581 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">init_properties</span><span class="token_op">()</span>
<a name="line582"><span class="token_number"> 582 </span></a>    
<a name="line583"><span class="token_number"> 583 </span></a>    <span class="keyword">def</span> <span class="token_name">get_a_full_desc_of_weights</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">):</span>
<a name="line584"><span class="token_number"> 584 </span></a><span class="text">        </span><span class="token_string">"""</span>
<a name="line585"><span class="token_number"> 585 </span></a><span class="token_string">        Returns a two dict of non-zero weights, a row dict and a column dict.</span>
<a name="line586"><span class="token_number"> 586 </span></a><span class="token_string">        The indeces are of the form (tab_label, row) and (tab_label, col)</span>
<a name="line587"><span class="token_number"> 587 </span></a><span class="token_string">        The values are the wt value</span>
<a name="line588"><span class="token_number"> 588 </span></a><span class="token_string">        """</span>
<a name="line589"><span class="token_number"> 589 </span></a>        <span class="token_name">full_rowD</span> <span class="token_op">=</span> <span class="token_op">{}</span> <span class="token_comment"># index=(tab_label,row_target), value=wt</span>
<a name="line590"><span class="token_number"> 590 </span></a>        <span class="token_name">full_colD</span> <span class="token_op">=</span> <span class="token_op">{}</span> <span class="token_comment"># index=(tab_label,col_target), value=wt</span>
<a name="line591"><span class="token_number"> 591 </span></a>        <span class="token_comment"># first add Main entries</span>
<a name="line592"><span class="token_number"> 592 </span></a>        <span class="token_name">rowD</span> <span class="token_op">=</span> <span class="token_name">make_weights_dict_from_str</span><span class="token_op">(</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">app_attrD</span><span class="token_op">[</span><span class="token_string">'row_weights'</span><span class="token_op">]</span> <span class="token_op">)</span>
<a name="line593"><span class="token_number"> 593 </span></a>        <span class="keyword">for</span> <span class="token_name">row</span><span class="token_op">,</span><span class="token_name">wt</span> <span class="keyword">in</span> <span class="token_name">list</span><span class="token_op">(</span><span class="token_name">rowD</span><span class="token_op">.</span><span class="token_name">items</span><span class="token_op">()):</span>
<a name="line594"><span class="token_number"> 594 </span></a><span class="text">            </span><span class="token_name">full_rowD</span><span class="token_op">[</span> <span class="token_op">(</span><span class="token_string">"Main"</span><span class="token_op">,</span> <span class="token_name">row</span><span class="token_op">)</span> <span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">wt</span>
<a name="line595"><span class="token_number"> 595 </span></a>        
<a name="line596"><span class="token_number"> 596 </span></a>        <span class="token_name">colD</span> <span class="token_op">=</span> <span class="token_name">make_weights_dict_from_str</span><span class="token_op">(</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">app_attrD</span><span class="token_op">[</span><span class="token_string">'col_weights'</span><span class="token_op">]</span> <span class="token_op">)</span>
<a name="line597"><span class="token_number"> 597 </span></a>        <span class="keyword">for</span> <span class="token_name">col</span><span class="token_op">,</span><span class="token_name">wt</span> <span class="keyword">in</span> <span class="token_name">list</span><span class="token_op">(</span><span class="token_name">colD</span><span class="token_op">.</span><span class="token_name">items</span><span class="token_op">()):</span>
<a name="line598"><span class="token_number"> 598 </span></a><span class="text">            </span><span class="token_name">full_colD</span><span class="token_op">[</span> <span class="token_op">(</span><span class="token_string">"Main"</span><span class="token_op">,</span> <span class="token_name">col</span><span class="token_op">)</span> <span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">wt</span>
<a name="line599"><span class="token_number"> 599 </span></a>        
<a name="line600"><span class="token_number"> 600 </span></a>        <span class="token_comment">#print("...NOTICE...Need to iterate container widgets and add weights")</span>
<a name="line601"><span class="token_number"> 601 </span></a>        <span class="keyword">for</span> <span class="token_name">widget_name</span><span class="token_op">,</span> <span class="token_name">c</span> <span class="keyword">in</span> <span class="token_name">list</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">.</span><span class="token_name">items</span><span class="token_op">()):</span>
<a name="line602"><span class="token_number"> 602 </span></a><span class="text">            </span><span class="keyword">if</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">widget_type</span> <span class="keyword">in</span> <span class="token_name">ContainerControlsL</span><span class="token_op">:</span>
<a name="line603"><span class="token_number"> 603 </span></a>                
<a name="line604"><span class="token_number"> 604 </span></a><span class="text">                </span><span class="token_name">rowD</span> <span class="token_op">=</span> <span class="token_name">make_weights_dict_from_str</span><span class="token_op">(</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'row_weights'</span><span class="token_op">]</span> <span class="token_op">)</span>
<a name="line605"><span class="token_number"> 605 </span></a>                <span class="keyword">for</span> <span class="token_name">row</span><span class="token_op">,</span><span class="token_name">wt</span> <span class="keyword">in</span> <span class="token_name">list</span><span class="token_op">(</span><span class="token_name">rowD</span><span class="token_op">.</span><span class="token_name">items</span><span class="token_op">()):</span>
<a name="line606"><span class="token_number"> 606 </span></a><span class="text">                    </span><span class="token_name">full_rowD</span><span class="token_op">[</span> <span class="token_op">(</span><span class="token_name">c</span><span class="token_op">.</span><span class="token_name">widget_name</span><span class="token_op">,</span> <span class="token_name">row</span><span class="token_op">)</span> <span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">wt</span>
<a name="line607"><span class="token_number"> 607 </span></a>                
<a name="line608"><span class="token_number"> 608 </span></a>                <span class="token_name">colD</span> <span class="token_op">=</span> <span class="token_name">make_weights_dict_from_str</span><span class="token_op">(</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'col_weights'</span><span class="token_op">]</span> <span class="token_op">)</span>
<a name="line609"><span class="token_number"> 609 </span></a>                <span class="keyword">for</span> <span class="token_name">col</span><span class="token_op">,</span><span class="token_name">wt</span> <span class="keyword">in</span> <span class="token_name">list</span><span class="token_op">(</span><span class="token_name">colD</span><span class="token_op">.</span><span class="token_name">items</span><span class="token_op">()):</span>
<a name="line610"><span class="token_number"> 610 </span></a><span class="text">                    </span><span class="token_name">full_colD</span><span class="token_op">[</span> <span class="token_op">(</span><span class="token_name">c</span><span class="token_op">.</span><span class="token_name">widget_name</span><span class="token_op">,</span> <span class="token_name">col</span><span class="token_op">)</span> <span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">wt</span>
<a name="line611"><span class="token_number"> 611 </span></a>        
<a name="line612"><span class="token_number"> 612 </span></a>        <span class="token_comment">#print('full_rowD = ',full_rowD)</span>
<a name="line613"><span class="token_number"> 613 </span></a>        <span class="token_comment">#print('full_colD = ',full_colD)</span>
<a name="line614"><span class="token_number"> 614 </span></a>        <span class="keyword">return</span> <span class="token_name">full_rowD</span><span class="token_op">,</span> <span class="token_name">full_colD</span>
<a name="line615"><span class="token_number"> 615 </span></a>    
<a name="line616"><span class="token_number"> 616 </span></a>    <span class="keyword">def</span> <span class="token_name">set_a_row_weight</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">,</span> <span class="token_name">tab_label</span><span class="token_op">,</span> <span class="token_name">row_inp</span><span class="token_op">,</span> <span class="token_name">wt_inp</span><span class="token_op">):</span>
<a name="line617"><span class="token_number"> 617 </span></a><span class="text">        </span><span class="keyword">if</span> <span class="token_name">tab_label</span><span class="token_op">==</span><span class="token_string">"Main"</span><span class="token_op">:</span>
<a name="line618"><span class="token_number"> 618 </span></a><span class="text">            </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">app_attrD</span><span class="token_op">[</span><span class="token_string">'row_weights'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">add_entry_to_weight_str</span><span class="token_op">(</span> <span class="token_name">row_inp</span><span class="token_op">,</span> <span class="token_name">wt_inp</span><span class="token_op">,</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">app_attrD</span><span class="token_op">[</span><span class="token_string">'row_weights'</span><span class="token_op">])</span>
<a name="line619"><span class="token_number"> 619 </span></a>        <span class="keyword">else</span><span class="token_op">:</span>
<a name="line620"><span class="token_number"> 620 </span></a><span class="text">            </span><span class="token_name">c</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">[</span> <span class="token_name">tab_label</span> <span class="token_op">]</span>
<a name="line621"><span class="token_number"> 621 </span></a>            <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'row_weights'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">add_entry_to_weight_str</span><span class="token_op">(</span> <span class="token_name">row_inp</span><span class="token_op">,</span> <span class="token_name">wt_inp</span><span class="token_op">,</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'row_weights'</span><span class="token_op">])</span>
<a name="line622"><span class="token_number"> 622 </span></a>    
<a name="line623"><span class="token_number"> 623 </span></a>    <span class="keyword">def</span> <span class="token_name">set_a_col_weight</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">,</span> <span class="token_name">tab_label</span><span class="token_op">,</span> <span class="token_name">col_inp</span><span class="token_op">,</span> <span class="token_name">wt_inp</span><span class="token_op">):</span>
<a name="line624"><span class="token_number"> 624 </span></a><span class="text">        </span><span class="keyword">if</span> <span class="token_name">tab_label</span><span class="token_op">==</span><span class="token_string">"Main"</span><span class="token_op">:</span>
<a name="line625"><span class="token_number"> 625 </span></a><span class="text">            </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">app_attrD</span><span class="token_op">[</span><span class="token_string">'col_weights'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">add_entry_to_weight_str</span><span class="token_op">(</span> <span class="token_name">col_inp</span><span class="token_op">,</span> <span class="token_name">wt_inp</span><span class="token_op">,</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">app_attrD</span><span class="token_op">[</span><span class="token_string">'col_weights'</span><span class="token_op">])</span>
<a name="line626"><span class="token_number"> 626 </span></a>        <span class="keyword">else</span><span class="token_op">:</span>
<a name="line627"><span class="token_number"> 627 </span></a><span class="text">            </span><span class="token_name">c</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">[</span> <span class="token_name">tab_label</span> <span class="token_op">]</span>
<a name="line628"><span class="token_number"> 628 </span></a>            <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'col_weights'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">add_entry_to_weight_str</span><span class="token_op">(</span> <span class="token_name">col_inp</span><span class="token_op">,</span> <span class="token_name">wt_inp</span><span class="token_op">,</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'col_weights'</span><span class="token_op">])</span>
<a name="line629"><span class="token_number"> 629 </span></a>    
<a name="line630"><span class="token_number"> 630 </span></a>    <span class="keyword">def</span> <span class="token_name">setSpecialOption</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">,</span> <span class="token_name">name</span><span class="token_op">,</span> <span class="token_name">value</span><span class="token_op">):</span>
<a name="line631"><span class="token_number"> 631 </span></a><span class="text">        </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">app_attrD</span><span class="token_op">[</span><span class="token_name">name</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">value</span>
<a name="line632"><span class="token_number"> 632 </span></a>        
<a name="line633"><span class="token_number"> 633 </span></a>    <span class="keyword">def</span> <span class="token_name">getSpecialOption</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">,</span> <span class="token_name">name</span> <span class="token_op">):</span>
<a name="line634"><span class="token_number"> 634 </span></a><span class="text">        </span><span class="keyword">return</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">app_attrD</span><span class="token_op">.</span><span class="token_name">get</span><span class="token_op">(</span><span class="token_name">name</span><span class="token_op">,</span> <span class="token_string">''</span><span class="token_op">)</span>
<a name="line635"><span class="token_number"> 635 </span></a>    
<a name="line636"><span class="token_number"> 636 </span></a>    <span class="keyword">def</span> <span class="token_name">set_PreviewWin</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">,</span> <span class="token_name">PreviewWin</span><span class="token_op">):</span>
<a name="line637"><span class="token_number"> 637 </span></a><span class="text">        </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">PreviewWin</span> <span class="token_op">=</span> <span class="token_name">PreviewWin</span>
<a name="line638"><span class="token_number"> 638 </span></a>    
<a name="line639"><span class="token_number"> 639 </span></a>    <span class="keyword">def</span> <span class="token_name">set_Notebook</span><span class="token_op">(</span> <span class="token_name">self</span><span class="token_op">,</span> <span class="token_name">grid_notebook</span> <span class="token_op">):</span>
<a name="line640"><span class="token_number"> 640 </span></a><span class="text">        </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">grid_notebook</span> <span class="token_op">=</span> <span class="token_name">grid_notebook</span>
<a name="line641"><span class="token_number"> 641 </span></a>
<a name="line642"><span class="token_number"> 642 </span></a>    
<a name="line643"><span class="token_number"> 643 </span></a>    <span class="keyword">def</span> <span class="token_name">show_preview</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">):</span>
<a name="line644"><span class="token_number"> 644 </span></a><span class="text">        </span><span class="token_string">"""Loops over all components, adds them to PreviewWin if they are new or have changed."""</span>
<a name="line645"><span class="token_number"> 645 </span></a>        
<a name="line646"><span class="token_number"> 646 </span></a>        <span class="keyword">if</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">PreviewWin</span> <span class="keyword">is</span> <span class="token_name">None</span><span class="token_op">:</span>
<a name="line647"><span class="token_number"> 647 </span></a><span class="text">            </span><span class="keyword">return</span>
<a name="line648"><span class="token_number"> 648 </span></a>            
<a name="line649"><span class="token_number"> 649 </span></a>        <span class="token_name">ct</span> <span class="token_op">=</span> <span class="token_name">ComponentTree</span><span class="token_op">()</span>
<a name="line650"><span class="token_number"> 650 </span></a>        <span class="keyword">for</span> <span class="token_name">widget_name</span><span class="token_op">,</span> <span class="token_name">c</span> <span class="keyword">in</span> <span class="token_name">list</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">.</span><span class="token_name">items</span><span class="token_op">()):</span>
<a name="line651"><span class="token_number"> 651 </span></a><span class="text">            </span><span class="token_name">ct</span><span class="token_op">.</span><span class="token_name">add_node</span><span class="token_op">(</span> <span class="token_name">CNode</span><span class="token_op">(</span><span class="token_name">widget_name</span><span class="token_op">,</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">tab_label</span><span class="token_op">,</span> <span class="token_name">c</span><span class="token_op">)</span> <span class="token_op">)</span>
<a name="line652"><span class="token_number"> 652 </span></a>        
<a name="line653"><span class="token_number"> 653 </span></a>        <span class="token_name">containerD</span> <span class="token_op">=</span> <span class="token_op">{</span><span class="token_string">"Main"</span><span class="token_op">:</span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">PreviewWin</span><span class="token_op">.</span><span class="token_name">prevFrame</span><span class="token_op">}</span> <span class="token_comment"># index=tab_label: value=tk parent object</span>
<a name="line654"><span class="token_number"> 654 </span></a>        
<a name="line655"><span class="token_number"> 655 </span></a>        <span class="token_name">cnodeL</span> <span class="token_op">=</span> <span class="token_name">ct</span><span class="token_op">.</span><span class="token_name">get_ordered_components</span><span class="token_op">()</span>
<a name="line656"><span class="token_number"> 656 </span></a>
<a name="line657"><span class="token_number"> 657 </span></a>        <span class="token_comment"># --------- set up info for any Tab or Notebook Component objects -----------</span>
<a name="line658"><span class="token_number"> 658 </span></a>        <span class="token_comment"># Notebook Tab labels separated by \n</span>
<a name="line659"><span class="token_number"> 659 </span></a>        <span class="token_comment">#self.user_tkOptionD['tab_labels'] = 'Mickey\nGoofy\nPopeye'</span>
<a name="line660"><span class="token_number"> 660 </span></a>        <span class="token_comment">#self.tab_nameL = [] # tuples of Tab name and label, e.g. (row, col, Tab_1, text)</span>
<a name="line661"><span class="token_number"> 661 </span></a>        
<a name="line662"><span class="token_number"> 662 </span></a>        <span class="token_name">nb_tab_nameLD</span> <span class="token_op">=</span> <span class="token_op">{}</span> <span class="token_comment"># index=notebook_name: value=tab_nameL</span>
<a name="line663"><span class="token_number"> 663 </span></a>        <span class="keyword">for</span> <span class="token_name">cn</span> <span class="keyword">in</span> <span class="token_name">cnodeL</span><span class="token_op">:</span>
<a name="line664"><span class="token_number"> 664 </span></a><span class="text">            </span><span class="token_name">c</span> <span class="token_op">=</span> <span class="token_name">cn</span><span class="token_op">.</span><span class="token_name">component</span>
<a name="line665"><span class="token_number"> 665 </span></a>            <span class="keyword">if</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">widget_type</span> <span class="token_op">==</span> <span class="token_string">'Notebook'</span><span class="token_op">:</span>
<a name="line666"><span class="token_number"> 666 </span></a><span class="text">                </span><span class="token_name">nb_tab_nameLD</span><span class="token_op">[</span><span class="token_name">c</span><span class="token_op">.</span><span class="token_name">widget_name</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_op">[]</span>
<a name="line667"><span class="token_number"> 667 </span></a>            <span class="keyword">elif</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">widget_type</span> <span class="token_op">==</span> <span class="token_string">'Tab'</span><span class="token_op">:</span>
<a name="line668"><span class="token_number"> 668 </span></a><span class="text">                </span><span class="token_name">nb_tab_nameLD</span><span class="token_op">[</span><span class="token_name">c</span><span class="token_op">.</span><span class="token_name">tab_label</span><span class="token_op">].</span><span class="token_name">append</span><span class="token_op">(</span> <span class="token_op">(</span><span class="token_name">c</span><span class="token_op">.</span><span class="token_name">row</span><span class="token_op">,</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">col</span><span class="token_op">,</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">widget_name</span><span class="token_op">,</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'text'</span><span class="token_op">])</span> <span class="token_op">)</span>
<a name="line669"><span class="token_number"> 669 </span></a>                <span class="token_name">nb_tab_nameLD</span><span class="token_op">[</span><span class="token_name">c</span><span class="token_op">.</span><span class="token_name">tab_label</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">sorted</span><span class="token_op">(</span> <span class="token_name">nb_tab_nameLD</span><span class="token_op">[</span><span class="token_name">c</span><span class="token_op">.</span><span class="token_name">tab_label</span><span class="token_op">]</span> <span class="token_op">)</span>
<a name="line670"><span class="token_number"> 670 </span></a>
<a name="line671"><span class="token_number"> 671 </span></a>        
<a name="line672"><span class="token_number"> 672 </span></a>        <span class="token_comment"># --------- make preview components -----------</span>
<a name="line673"><span class="token_number"> 673 </span></a>        <span class="keyword">for</span> <span class="token_name">cn</span> <span class="keyword">in</span> <span class="token_name">cnodeL</span><span class="token_op">:</span>
<a name="line674"><span class="token_number"> 674 </span></a><span class="text">            </span><span class="token_name">c</span> <span class="token_op">=</span> <span class="token_name">cn</span><span class="token_op">.</span><span class="token_name">component</span>
<a name="line675"><span class="token_number"> 675 </span></a>            <span class="token_comment">#print('In show_preview, widget_name =',c.widget_name, '  tab_label=',c.tab_label,</span>
<a name="line676"><span class="token_number"> 676 </span></a>            <span class="token_comment">#      '\n ...  containerD.keys()=',containerD.keys())</span>
<a name="line677"><span class="token_number"> 677 </span></a>            
<a name="line678"><span class="token_number"> 678 </span></a>            <span class="keyword">if</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">widget_type</span> <span class="token_op">==</span> <span class="token_string">'Tab'</span><span class="token_op">:</span>
<a name="line679"><span class="token_number"> 679 </span></a><span class="text">                </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">tab_ownerD</span><span class="token_op">[</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">widget_name</span> <span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">tab_label</span>
<a name="line680"><span class="token_number"> 680 </span></a>                <span class="token_name">containerD</span><span class="token_op">[</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">widget_name</span> <span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">get_tab_native_widget</span><span class="token_op">(</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">widget_name</span> <span class="token_op">)</span>
<a name="line681"><span class="token_number"> 681 </span></a>            <span class="keyword">else</span><span class="token_op">:</span>
<a name="line682"><span class="token_number"> 682 </span></a><span class="text">                </span><span class="keyword">if</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">widget_type</span> <span class="token_op">==</span> <span class="token_string">'Notebook'</span><span class="token_op">:</span>
<a name="line683"><span class="token_number"> 683 </span></a><span class="text">                    </span><span class="token_name">c</span><span class="token_op">.</span><span class="token_name">tab_nameL</span> <span class="token_op">=</span> <span class="token_name">nb_tab_nameLD</span><span class="token_op">[</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">widget_name</span> <span class="token_op">]</span>
<a name="line684"><span class="token_number"> 684 </span></a>                
<a name="line685"><span class="token_number"> 685 </span></a>                <span class="token_name">parent_component</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">.</span><span class="token_name">get</span><span class="token_op">(</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">tab_label</span> <span class="token_op">,</span> <span class="token_name">None</span> <span class="token_op">)</span>
<a name="line686"><span class="token_number"> 686 </span></a>                <span class="token_comment">#                    parent_name,  parent Component,  parent container widget</span>
<a name="line687"><span class="token_number"> 687 </span></a>                <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">maybe_make_widget</span><span class="token_op">(</span>  <span class="token_name">containerD</span><span class="token_op">[</span><span class="token_name">c</span><span class="token_op">.</span><span class="token_name">tab_label</span><span class="token_op">]</span> <span class="token_op">)</span> <span class="token_comment"># returns True if had to make it.</span>
<a name="line688"><span class="token_number"> 688 </span></a>                
<a name="line689"><span class="token_number"> 689 </span></a>                <span class="keyword">if</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">pw_widget</span><span class="token_op">:</span>
<a name="line690"><span class="token_number"> 690 </span></a><span class="text">                    </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">PreviewWin</span><span class="token_op">.</span><span class="token_name">add_widget</span><span class="token_op">(</span><span class="token_name">c</span><span class="token_op">.</span><span class="token_name">row</span><span class="token_op">,</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">col</span><span class="token_op">,</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">pw_widget</span><span class="token_op">)</span>
<a name="line691"><span class="token_number"> 691 </span></a>                    <span class="token_name">containerD</span><span class="token_op">[</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">widget_name</span> <span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">pw_widget</span><span class="token_op">.</span><span class="token_name">native_widget</span> <span class="token_comment"># put possible parent widgets into dictionary</span>
<a name="line692"><span class="token_number"> 692 </span></a>        
<a name="line693"><span class="token_number"> 693 </span></a>        <span class="token_comment"># set any column or row weights</span>
<a name="line694"><span class="token_number"> 694 </span></a>        <span class="keyword">if</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">grid_notebook</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="token_name">None</span><span class="token_op">:</span>
<a name="line695"><span class="token_number"> 695 </span></a>            <span class="token_comment">#print("Setting columnconfigure and rowconfigure")</span>
<a name="line696"><span class="token_number"> 696 </span></a>            <span class="token_comment">#print('    self.app_attrD["col_weights"] = ', self.app_attrD["col_weights"])</span>
<a name="line697"><span class="token_number"> 697 </span></a><span class="text">            </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">grid_notebook</span><span class="token_op">.</span><span class="token_name">set_row_column_weights_from_target_app</span><span class="token_op">()</span>
<a name="line698"><span class="token_number"> 698 </span></a>            <span class="token_comment"># -------------------------------------------</span>
<a name="line699"><span class="token_number"> 699 </span></a>            <span class="token_comment"># rowD and colD: index=(tab_label,row_target), value=wt</span>
<a name="line700"><span class="token_number"> 700 </span></a>            <span class="token_name">rowD</span><span class="token_op">,</span> <span class="token_name">colD</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">get_a_full_desc_of_weights</span><span class="token_op">()</span>
<a name="line701"><span class="token_number"> 701 </span></a>            
<a name="line702"><span class="token_number"> 702 </span></a>            <span class="keyword">for</span> <span class="token_op">(</span><span class="token_name">tab_label</span><span class="token_op">,</span> <span class="token_name">row_target</span><span class="token_op">),</span><span class="token_name">wt</span> <span class="keyword">in</span> <span class="token_name">list</span><span class="token_op">(</span><span class="token_name">rowD</span><span class="token_op">.</span><span class="token_name">items</span><span class="token_op">()):</span>
<a name="line703"><span class="token_number"> 703 </span></a><span class="text">                </span><span class="token_name">parent</span> <span class="token_op">=</span> <span class="token_name">containerD</span><span class="token_op">.</span><span class="token_name">get</span><span class="token_op">(</span> <span class="token_name">tab_label</span><span class="token_op">,</span> <span class="token_name">None</span> <span class="token_op">)</span>
<a name="line704"><span class="token_number"> 704 </span></a>                <span class="keyword">if</span> <span class="token_name">parent</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="token_name">None</span><span class="token_op">:</span>
<a name="line705"><span class="token_number"> 705 </span></a><span class="text">                    </span><span class="token_name">parent</span><span class="token_op">.</span><span class="token_name">rowconfigure</span><span class="token_op">(</span><span class="token_name">row_target</span><span class="token_op">,</span> <span class="token_name">weight</span><span class="token_op">=</span><span class="token_name">wt</span><span class="token_op">)</span>
<a name="line706"><span class="token_number"> 706 </span></a>        
<a name="line707"><span class="token_number"> 707 </span></a>            
<a name="line708"><span class="token_number"> 708 </span></a>            <span class="keyword">for</span> <span class="token_op">(</span><span class="token_name">tab_label</span><span class="token_op">,</span> <span class="token_name">col_target</span><span class="token_op">),</span><span class="token_name">wt</span> <span class="keyword">in</span> <span class="token_name">list</span><span class="token_op">(</span><span class="token_name">colD</span><span class="token_op">.</span><span class="token_name">items</span><span class="token_op">()):</span>
<a name="line709"><span class="token_number"> 709 </span></a><span class="text">                </span><span class="token_name">parent</span> <span class="token_op">=</span> <span class="token_name">containerD</span><span class="token_op">.</span><span class="token_name">get</span><span class="token_op">(</span> <span class="token_name">tab_label</span><span class="token_op">,</span> <span class="token_name">None</span> <span class="token_op">)</span>
<a name="line710"><span class="token_number"> 710 </span></a>                <span class="keyword">if</span> <span class="token_name">parent</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="token_name">None</span><span class="token_op">:</span>
<a name="line711"><span class="token_number"> 711 </span></a><span class="text">                    </span><span class="token_name">parent</span><span class="token_op">.</span><span class="token_name">columnconfigure</span><span class="token_op">(</span><span class="token_name">col_target</span><span class="token_op">,</span> <span class="token_name">weight</span><span class="token_op">=</span><span class="token_name">wt</span><span class="token_op">)</span>
<a name="line712"><span class="token_number"> 712 </span></a>            
<a name="line713"><span class="token_number"> 713 </span></a>            <span class="token_comment"># -----------------------------------------</span>
<a name="line714"><span class="token_number"> 714 </span></a>            <span class="token_comment">#weightD = make_weights_dict_from_str( self.app_attrD["col_weights"] )</span>
<a name="line715"><span class="token_number"> 715 </span></a>            <span class="token_comment">#for col,wt in weightD.items():</span>
<a name="line716"><span class="token_number"> 716 </span></a>            <span class="token_comment">#    #print('col=%s, wt=%s'%(col,wt))</span>
<a name="line717"><span class="token_number"> 717 </span></a>            <span class="token_comment">#    parent = containerD.get( "Main", None )</span>
<a name="line718"><span class="token_number"> 718 </span></a>            <span class="token_comment">#    if parent is not None:</span>
<a name="line719"><span class="token_number"> 719 </span></a>            <span class="token_comment">#        parent.columnconfigure(col, weight=wt)</span>
<a name="line720"><span class="token_number"> 720 </span></a>            <span class="token_comment">#        #print('executed col=%s, wt=%s'%(col,wt))</span>
<a name="line721"><span class="token_number"> 721 </span></a>            <span class="token_comment">#    </span>
<a name="line722"><span class="token_number"> 722 </span></a>            <span class="token_comment">#weightD = make_weights_dict_from_str( self.app_attrD["row_weights"] )</span>
<a name="line723"><span class="token_number"> 723 </span></a>            <span class="token_comment">#for row,wt in weightD.items():</span>
<a name="line724"><span class="token_number"> 724 </span></a>            <span class="token_comment">#    parent = containerD.get( "Main", None )</span>
<a name="line725"><span class="token_number"> 725 </span></a>            <span class="token_comment">#    #print('row=%s, wt=%s'%(row,wt))</span>
<a name="line726"><span class="token_number"> 726 </span></a>            <span class="token_comment">#    if parent is not None:</span>
<a name="line727"><span class="token_number"> 727 </span></a>            <span class="token_comment">#        parent.rowconfigure(row, weight=wt)</span>
<a name="line728"><span class="token_number"> 728 </span></a>            <span class="token_comment">#        #print('executed row=%s, wt=%s'%(row,wt))</span>
<a name="line729"><span class="token_number"> 729 </span></a>        
<a name="line730"><span class="token_number"> 730 </span></a>    
<a name="line731"><span class="token_number"> 731 </span></a>    <span class="keyword">def</span> <span class="token_name">destroy_all_preview_widgets</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">):</span>
<a name="line732"><span class="token_number"> 732 </span></a><span class="text">        </span><span class="token_string">"""destroy pw_widget if present"""</span>
<a name="line733"><span class="token_number"> 733 </span></a>        <span class="keyword">for</span> <span class="token_name">c</span> <span class="keyword">in</span> <span class="token_name">list</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">.</span><span class="token_name">values</span><span class="token_op">()):</span>
<a name="line734"><span class="token_number"> 734 </span></a><span class="text">            </span><span class="keyword">if</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">pw_widget</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="token_name">None</span><span class="token_op">:</span>
<a name="line735"><span class="token_number"> 735 </span></a><span class="text">                </span><span class="token_name">c</span><span class="token_op">.</span><span class="token_name">destroy_preview_widget</span><span class="token_op">()</span>
<a name="line736"><span class="token_number"> 736 </span></a>        <span class="token_comment">#print( 'Destroyed all preview widgets' )</span>
<a name="line737"><span class="token_number"> 737 </span></a>    
<a name="line738"><span class="token_number"> 738 </span></a>    <span class="keyword">def</span> <span class="token_name">del_all_components</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">):</span>
<a name="line739"><span class="token_number"> 739 </span></a><span class="text">        </span><span class="keyword">for</span> <span class="token_name">c</span> <span class="keyword">in</span> <span class="token_name">list</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">.</span><span class="token_name">values</span><span class="token_op">()):</span>
<a name="line740"><span class="token_number"> 740 </span></a><span class="text">            </span><span class="token_name">c</span><span class="token_op">.</span><span class="token_name">destroy_preview_widget</span><span class="token_op">()</span>
<a name="line741"><span class="token_number"> 741 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span> <span class="token_op">=</span> <span class="token_op">{}</span>
<a name="line742"><span class="token_number"> 742 </span></a>        <span class="token_comment">#print( 'Deleted all preview widgets' )</span>
<a name="line743"><span class="token_number"> 743 </span></a>    
<a name="line744"><span class="token_number"> 744 </span></a>    <span class="keyword">def</span> <span class="token_name">delComponentByName</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">,</span> <span class="token_name">widget_name</span><span class="token_op">):</span>
<a name="line745"><span class="token_number"> 745 </span></a><span class="text">        </span><span class="token_string">'''MUST have "widget_name" value in compObjD dictionary'''</span>
<a name="line746"><span class="token_number"> 746 </span></a>        
<a name="line747"><span class="token_number"> 747 </span></a>        <span class="keyword">if</span> <span class="token_name">widget_name</span> <span class="keyword">in</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">:</span>
<a name="line748"><span class="token_number"> 748 </span></a><span class="text">            </span><span class="token_name">c</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">[</span> <span class="token_name">widget_name</span> <span class="token_op">]</span>
<a name="line749"><span class="token_number"> 749 </span></a>            <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">destroy_preview_widget</span><span class="token_op">()</span>
<a name="line750"><span class="token_number"> 750 </span></a>            <span class="keyword">del</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">[</span> <span class="token_name">widget_name</span> <span class="token_op">]</span> 
<a name="line751"><span class="token_number"> 751 </span></a>            <span class="token_comment">#print( 'Deleted "%s" from form'%widget_name )</span>
<a name="line752"><span class="token_number"> 752 </span></a>        
<a name="line753"><span class="token_number"> 753 </span></a>    <span class="keyword">def</span> <span class="token_name">maybe_add_component</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">,</span> <span class="token_name">widget_type</span><span class="token_op">=</span><span class="token_string">"Button"</span><span class="token_op">,</span> <span class="token_name">widget_name</span><span class="token_op">=</span><span class="token_string">"Button_1"</span><span class="token_op">,</span> <span class="token_name">tab_label</span><span class="token_op">=</span><span class="token_string">"Main"</span><span class="token_op">,</span> 
<a name="line754"><span class="token_number"> 754 </span></a>                            <span class="token_name">row</span><span class="token_op">=</span><span class="token_number">1</span><span class="token_op">,</span> <span class="token_name">col</span><span class="token_op">=</span><span class="token_number">1</span><span class="token_op">):</span>
<a name="line755"><span class="token_number"> 755 </span></a><span class="text">        </span><span class="token_string">"""If the component is not already in app, add it."""</span>
<a name="line756"><span class="token_number"> 756 </span></a>        
<a name="line757"><span class="token_number"> 757 </span></a>        <span class="keyword">if</span> <span class="token_name">widget_name</span> <span class="keyword">in</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">:</span>
<a name="line758"><span class="token_number"> 758 </span></a><span class="text">            </span><span class="token_name">c</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">[</span> <span class="token_name">widget_name</span> <span class="token_op">]</span>
<a name="line759"><span class="token_number"> 759 </span></a>            
<a name="line760"><span class="token_number"> 760 </span></a>            <span class="keyword">if</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">widget_has_moved</span><span class="token_op">(</span> <span class="token_name">tab_label</span><span class="token_op">=</span><span class="token_name">tab_label</span><span class="token_op">,</span> <span class="token_name">row</span><span class="token_op">=</span><span class="token_name">row</span><span class="token_op">,</span> <span class="token_name">col</span><span class="token_op">=</span><span class="token_name">col</span> <span class="token_op">):</span>
<a name="line761"><span class="token_number"> 761 </span></a><span class="text">                </span><span class="token_name">c</span><span class="token_op">.</span><span class="token_name">destroy_preview_widget</span><span class="token_op">()</span>
<a name="line762"><span class="token_number"> 762 </span></a>                <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">reset_location</span><span class="token_op">(</span> <span class="token_name">tab_label</span><span class="token_op">=</span><span class="token_name">tab_label</span><span class="token_op">,</span> <span class="token_name">row</span><span class="token_op">=</span><span class="token_name">row</span><span class="token_op">,</span> <span class="token_name">col</span><span class="token_op">=</span><span class="token_name">col</span> <span class="token_op">)</span>                
<a name="line763"><span class="token_number"> 763 </span></a>        <span class="keyword">else</span><span class="token_op">:</span>
<a name="line764"><span class="token_number"> 764 </span></a><span class="text">            </span><span class="token_name">c</span> <span class="token_op">=</span> <span class="token_name">Component</span><span class="token_op">(</span> <span class="token_name">widget_type</span><span class="token_op">=</span><span class="token_name">widget_type</span><span class="token_op">,</span> <span class="token_name">widget_name</span><span class="token_op">=</span><span class="token_name">widget_name</span><span class="token_op">,</span> <span class="token_name">tab_label</span><span class="token_op">=</span><span class="token_name">tab_label</span><span class="token_op">,</span> 
<a name="line765"><span class="token_number"> 765 </span></a>                           <span class="token_name">row</span><span class="token_op">=</span><span class="token_name">row</span><span class="token_op">,</span> <span class="token_name">col</span><span class="token_op">=</span><span class="token_name">col</span><span class="token_op">,</span> <span class="token_name">target_app</span><span class="token_op">=</span><span class="token_name">self</span> <span class="token_op">)</span>
<a name="line766"><span class="token_number"> 766 </span></a>            <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">[</span> <span class="token_name">widget_name</span> <span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">c</span>
<a name="line767"><span class="token_number"> 767 </span></a>            
<a name="line768"><span class="token_number"> 768 </span></a>            <span class="token_comment"># # duplicating a widget, so copy over all the user_tkOptionD properties</span>
<a name="line769"><span class="token_number"> 769 </span></a>            <span class="keyword">if</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">grid_notebook</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="token_name">None</span><span class="token_op">:</span>
<a name="line770"><span class="token_number"> 770 </span></a><span class="text">                </span><span class="keyword">if</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">grid_notebook</span><span class="token_op">.</span><span class="token_name">dup_source_widget_name</span><span class="token_op">:</span>
<a name="line771"><span class="token_number"> 771 </span></a><span class="text">                    </span><span class="token_name">c_src</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">[</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">grid_notebook</span><span class="token_op">.</span><span class="token_name">dup_source_widget_name</span> <span class="token_op">]</span>
<a name="line772"><span class="token_number"> 772 </span></a>                    
<a name="line773"><span class="token_number"> 773 </span></a>                    <span class="keyword">for</span> <span class="token_name">key</span><span class="token_op">,</span><span class="token_name">val</span> <span class="keyword">in</span> <span class="token_name">list</span><span class="token_op">(</span><span class="token_name">c_src</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">.</span><span class="token_name">items</span><span class="token_op">()):</span>
<a name="line774"><span class="token_number"> 774 </span></a>                        <span class="token_comment"># set all attr to source widget values, unless it's the dup_source_widget_name </span>
<a name="line775"><span class="token_number"> 775 </span></a><span class="text">                        </span><span class="keyword">if</span> <span class="token_name">val</span> <span class="token_op">!=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">grid_notebook</span><span class="token_op">.</span><span class="token_name">dup_source_widget_name</span><span class="token_op">:</span>
<a name="line776"><span class="token_number"> 776 </span></a><span class="text">                            </span><span class="token_name">c</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_name">key</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">val</span>
<a name="line777"><span class="token_number"> 777 </span></a>
<a name="line778"><span class="token_number"> 778 </span></a>                    <span class="keyword">if</span> <span class="token_name">widget_type</span> <span class="token_op">==</span> <span class="token_string">"Notebook"</span><span class="token_op">:</span>
<a name="line779"><span class="token_number"> 779 </span></a><span class="text">                        </span><span class="token_name">c</span><span class="token_op">.</span><span class="token_name">grid_notebook</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">grid_notebook</span>
<a name="line780"><span class="token_number"> 780 </span></a>    
<a name="line781"><span class="token_number"> 781 </span></a>    <span class="keyword">def</span> <span class="token_name">removeContainerByName</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">,</span> <span class="token_name">container_name</span><span class="token_op">):</span>
<a name="line782"><span class="token_number"> 782 </span></a><span class="text">        </span><span class="token_string">"""</span>
<a name="line783"><span class="token_number"> 783 </span></a><span class="token_string">        container_name is a widget_name to be removed.</span>
<a name="line784"><span class="token_number"> 784 </span></a><span class="token_string">        The approach is to collect the names of remaining components and rebuild the target_app.</span>
<a name="line785"><span class="token_number"> 785 </span></a><span class="token_string">        """</span>
<a name="line786"><span class="token_number"> 786 </span></a>        <span class="token_name">del_child_nameL</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">get_names_of_containers_widgets</span><span class="token_op">(</span> <span class="token_name">container_name</span> <span class="token_op">)</span>
<a name="line787"><span class="token_number"> 787 </span></a>        <span class="token_name">del_child_nameL</span><span class="token_op">.</span><span class="token_name">append</span><span class="token_op">(</span> <span class="token_name">container_name</span> <span class="token_op">)</span>
<a name="line788"><span class="token_number"> 788 </span></a>        
<a name="line789"><span class="token_number"> 789 </span></a>        <span class="token_comment"># if container is a Tab, then need to correct its Notebook tab_labels attribute.</span>
<a name="line790"><span class="token_number"> 790 </span></a>        <span class="keyword">if</span> <span class="token_name">container_name</span><span class="token_op">.</span><span class="token_name">startswith</span><span class="token_op">(</span><span class="token_string">'Tab_'</span><span class="token_op">):</span>
<a name="line791"><span class="token_number"> 791 </span></a><span class="text">            </span><span class="token_name">c_tab</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">[</span> <span class="token_name">container_name</span> <span class="token_op">]</span>
<a name="line792"><span class="token_number"> 792 </span></a>            <span class="token_name">notebook_name</span> <span class="token_op">=</span> <span class="token_name">c_tab</span><span class="token_op">.</span><span class="token_name">tab_label</span>
<a name="line793"><span class="token_number"> 793 </span></a>            <span class="token_name">c_nb</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">[</span> <span class="token_name">notebook_name</span> <span class="token_op">]</span>
<a name="line794"><span class="token_number"> 794 </span></a>            <span class="token_name">sL</span> <span class="token_op">=</span> <span class="token_name">c_nb</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'tab_labels'</span><span class="token_op">].</span><span class="token_name">split</span><span class="token_op">(</span><span class="token_string">'\n'</span><span class="token_op">)</span>
<a name="line795"><span class="token_number"> 795 </span></a>            <span class="token_name">sL</span> <span class="token_op">=</span> <span class="token_op">[</span><span class="token_name">s</span> <span class="keyword">for</span> <span class="token_name">s</span> <span class="keyword">in</span> <span class="token_name">sL</span> <span class="keyword">if</span> <span class="token_name">s</span> <span class="token_op">!=</span> <span class="token_name">container_name</span><span class="token_op">]</span>
<a name="line796"><span class="token_number"> 796 </span></a>            <span class="token_name">c_nb</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_string">'tab_labels'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_string">'\n'</span><span class="token_op">.</span><span class="token_name">join</span><span class="token_op">(</span><span class="token_name">sL</span><span class="token_op">)</span>
<a name="line797"><span class="token_number"> 797 </span></a>        
<a name="line798"><span class="token_number"> 798 </span></a>        <span class="token_comment"># get list of components in add-order.</span>
<a name="line799"><span class="token_number"> 799 </span></a>        <span class="token_name">cnodeL</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">get_ordered_components</span><span class="token_op">()</span>
<a name="line800"><span class="token_number"> 800 </span></a>        
<a name="line801"><span class="token_number"> 801 </span></a>        <span class="token_comment"># reinitialize, but save app_attr values</span>
<a name="line802"><span class="token_number"> 802 </span></a>        <span class="token_name">save_tkOptionD</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">tkOptionD</span><span class="token_op">.</span><span class="token_name">copy</span><span class="token_op">()</span>
<a name="line803"><span class="token_number"> 803 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">reinitialize</span><span class="token_op">()</span>
<a name="line804"><span class="token_number"> 804 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">grid_notebook</span><span class="token_op">.</span><span class="token_name">initialize_NotebookGridDes</span><span class="token_op">()</span>
<a name="line805"><span class="token_number"> 805 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">grid_notebook</span><span class="token_op">.</span><span class="token_name">notebook</span><span class="token_op">.</span><span class="token_name">bind</span><span class="token_op">(</span><span class="token_string">"&lt;&lt;NotebookTabChanged&gt;&gt;"</span><span class="token_op">,</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">grid_notebook</span><span class="token_op">.</span><span class="token_name">grid_gui</span><span class="token_op">.</span><span class="token_name"><strong style="background-color:#ffe0e0">tab_of_notebook_changed</strong></span><span class="token_op">)</span>
<a name="line806"><span class="token_number"> 806 </span></a>        
<a name="line807"><span class="token_number"> 807 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">tkOptionD</span> <span class="token_op">=</span> <span class="token_name">save_tkOptionD</span>
<a name="line808"><span class="token_number"> 808 </span></a>        
<a name="line809"><span class="token_number"> 809 </span></a>        <span class="token_comment"># add back in all the undeleted components</span>
<a name="line810"><span class="token_number"> 810 </span></a>        <span class="token_comment">#print('del_child_nameL =', del_child_nameL)</span>
<a name="line811"><span class="token_number"> 811 </span></a>        <span class="keyword">for</span> <span class="token_name">cn</span> <span class="keyword">in</span> <span class="token_name">cnodeL</span><span class="token_op">:</span>
<a name="line812"><span class="token_number"> 812 </span></a><span class="text">            </span><span class="token_name">c</span> <span class="token_op">=</span> <span class="token_name">cn</span><span class="token_op">.</span><span class="token_name">component</span>
<a name="line813"><span class="token_number"> 813 </span></a>            <span class="keyword">if</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">widget_name</span> <span class="keyword">not</span> <span class="keyword">in</span> <span class="token_name">del_child_nameL</span><span class="token_op">:</span>
<a name="line814"><span class="token_number"> 814 </span></a>                <span class="token_comment">#print('adding back in', c.widget_name)</span>
<a name="line815"><span class="token_number"> 815 </span></a>
<a name="line816"><span class="token_number"> 816 </span></a>
<a name="line817"><span class="token_number"> 817 </span></a><span class="text">                </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">maybe_add_component</span><span class="token_op">(</span> <span class="token_name">widget_type</span><span class="token_op">=</span><span class="token_name">c</span><span class="token_op">.</span><span class="token_name">widget_type</span><span class="token_op">,</span> <span class="token_name">widget_name</span><span class="token_op">=</span><span class="token_name">c</span><span class="token_op">.</span><span class="token_name">widget_name</span><span class="token_op">,</span> 
<a name="line818"><span class="token_number"> 818 </span></a>                                          <span class="token_name">tab_label</span><span class="token_op">=</span><span class="token_name">c</span><span class="token_op">.</span><span class="token_name">tab_label</span><span class="token_op">,</span> <span class="token_name">row</span><span class="token_op">=</span><span class="token_name">c</span><span class="token_op">.</span><span class="token_name">row</span><span class="token_op">,</span> <span class="token_name">col</span><span class="token_op">=</span><span class="token_name">c</span><span class="token_op">.</span><span class="token_name">col</span><span class="token_op">)</span>
<a name="line819"><span class="token_number"> 819 </span></a>
<a name="line820"><span class="token_number"> 820 </span></a>                <span class="token_name">c_new</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">[</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">widget_name</span> <span class="token_op">]</span>
<a name="line821"><span class="token_number"> 821 </span></a>                <span class="token_comment">#print('c_new =', c_new)</span>
<a name="line822"><span class="token_number"> 822 </span></a>                
<a name="line823"><span class="token_number"> 823 </span></a>                <span class="keyword">for</span> <span class="token_name">key</span><span class="token_op">,</span> <span class="token_name">val</span> <span class="keyword">in</span> <span class="token_name">list</span><span class="token_op">(</span><span class="token_name">c</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">.</span><span class="token_name">items</span><span class="token_op">()):</span>
<a name="line824"><span class="token_number"> 824 </span></a><span class="text">                    </span><span class="keyword">if</span> <span class="token_name">key</span> <span class="token_op">==</span> <span class="token_string">'tab_labels'</span><span class="token_op">:</span>
<a name="line825"><span class="token_number"> 825 </span></a><span class="text">                        </span><span class="token_name">val</span> <span class="token_op">=</span> <span class="token_name">val</span><span class="token_op">.</span><span class="token_name">replace</span><span class="token_op">(</span><span class="token_string">'\\n'</span><span class="token_op">,</span> <span class="token_string">'\n'</span><span class="token_op">)</span>
<a name="line826"><span class="token_number"> 826 </span></a>                        <span class="token_name">c_new</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_name">key</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">val</span>
<a name="line827"><span class="token_number"> 827 </span></a>                        
<a name="line828"><span class="token_number"> 828 </span></a>                    <span class="keyword">elif</span> <span class="token_name">key</span> <span class="keyword">not</span> <span class="keyword">in</span> <span class="token_op">[</span><span class="token_string">'widget_type'</span><span class="token_op">,</span> <span class="token_string">'tab_label'</span><span class="token_op">,</span> <span class="token_string">'row'</span><span class="token_op">,</span> <span class="token_string">'col'</span><span class="token_op">]:</span>
<a name="line829"><span class="token_number"> 829 </span></a><span class="text">                        </span><span class="token_name">c_new</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_name">key</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">val</span>
<a name="line830"><span class="token_number"> 830 </span></a>
<a name="line831"><span class="token_number"> 831 </span></a>        <span class="token_comment"># put the widgets on the grid_notebook</span>
<a name="line832"><span class="token_number"> 832 </span></a>        <span class="token_name">widgetL</span> <span class="token_op">=</span> <span class="token_op">[]</span>
<a name="line833"><span class="token_number"> 833 </span></a>        <span class="keyword">for</span> <span class="token_name">cn</span> <span class="keyword">in</span> <span class="token_name">cnodeL</span><span class="token_op">:</span>
<a name="line834"><span class="token_number"> 834 </span></a><span class="text">            </span><span class="token_name">c</span> <span class="token_op">=</span> <span class="token_name">cn</span><span class="token_op">.</span><span class="token_name">component</span>
<a name="line835"><span class="token_number"> 835 </span></a>            <span class="keyword">if</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">widget_name</span> <span class="keyword">not</span> <span class="keyword">in</span> <span class="token_name">del_child_nameL</span><span class="token_op">:</span>
<a name="line836"><span class="token_number"> 836 </span></a><span class="text">                </span><span class="token_name">widgetL</span><span class="token_op">.</span><span class="token_name">append</span><span class="token_op">(</span> <span class="token_op">(</span><span class="token_name">c</span><span class="token_op">.</span><span class="token_name">widget_type</span><span class="token_op">,</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">widget_name</span><span class="token_op">,</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">tab_label</span><span class="token_op">,</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">row</span><span class="token_op">,</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">col</span><span class="token_op">)</span> <span class="token_op">)</span>
<a name="line837"><span class="token_number"> 837 </span></a>            
<a name="line838"><span class="token_number"> 838 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">grid_notebook</span><span class="token_op">.</span><span class="token_name">set_complete_list_of_widgets</span><span class="token_op">(</span> <span class="token_name">widgetL</span> <span class="token_op">)</span>
<a name="line839"><span class="token_number"> 839 </span></a>
<a name="line840"><span class="token_number"> 840 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">grid_notebook</span><span class="token_op">.</span><span class="token_name">repaint_all_labels</span><span class="token_op">()</span>
<a name="line841"><span class="token_number"> 841 </span></a>        
<a name="line842"><span class="token_number"> 842 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">grid_notebook</span><span class="token_op">.</span><span class="token_name">grid_gui</span><span class="token_op">.</span><span class="token_name">refresh_preview_win</span><span class="token_op">()</span>
<a name="line843"><span class="token_number"> 843 </span></a>        <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">grid_notebook</span><span class="token_op">.</span><span class="token_name">grid_gui</span><span class="token_op">.</span><span class="token_name">restore_black_listbox</span><span class="token_op">()</span>
<a name="line844"><span class="token_number"> 844 </span></a>        
<a name="line845"><span class="token_number"> 845 </span></a>    <span class="keyword">def</span> <span class="token_name">get_ordered_components</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">):</span>
<a name="line846"><span class="token_number"> 846 </span></a><span class="text">        </span><span class="token_string">"""Return a complete list of all components in add-order."""</span>        
<a name="line847"><span class="token_number"> 847 </span></a>        
<a name="line848"><span class="token_number"> 848 </span></a>        <span class="token_name">ct</span> <span class="token_op">=</span> <span class="token_name">ComponentTree</span><span class="token_op">()</span>
<a name="line849"><span class="token_number"> 849 </span></a>        <span class="keyword">for</span> <span class="token_name">widget_name</span><span class="token_op">,</span> <span class="token_name">c</span> <span class="keyword">in</span> <span class="token_name">list</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">.</span><span class="token_name">items</span><span class="token_op">()):</span>
<a name="line850"><span class="token_number"> 850 </span></a><span class="text">            </span><span class="token_name">ct</span><span class="token_op">.</span><span class="token_name">add_node</span><span class="token_op">(</span> <span class="token_name">CNode</span><span class="token_op">(</span><span class="token_name">widget_name</span><span class="token_op">,</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">tab_label</span><span class="token_op">,</span> <span class="token_name">c</span><span class="token_op">)</span> <span class="token_op">)</span>
<a name="line851"><span class="token_number"> 851 </span></a>                
<a name="line852"><span class="token_number"> 852 </span></a>        <span class="token_name">cnodeL</span> <span class="token_op">=</span> <span class="token_name">ct</span><span class="token_op">.</span><span class="token_name">get_ordered_components</span><span class="token_op">()</span>
<a name="line853"><span class="token_number"> 853 </span></a>        <span class="keyword">return</span> <span class="token_name">cnodeL</span>
<a name="line854"><span class="token_number"> 854 </span></a>    
<a name="line855"><span class="token_number"> 855 </span></a>    <span class="keyword">def</span> <span class="token_name">get_names_of_containers_widgets</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">,</span> <span class="token_name">container_name</span><span class="token_op">):</span>
<a name="line856"><span class="token_number"> 856 </span></a><span class="text">        </span><span class="token_string">"""Return the widget_name value for all widgets in container_name."""</span>
<a name="line857"><span class="token_number"> 857 </span></a>                        
<a name="line858"><span class="token_number"> 858 </span></a>        <span class="token_name">c_cont</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">[</span> <span class="token_name">container_name</span> <span class="token_op">]</span>
<a name="line859"><span class="token_number"> 859 </span></a>        <span class="keyword">if</span> <span class="token_name">c_cont</span><span class="token_op">.</span><span class="token_name">widget_type</span> <span class="keyword">not</span> <span class="keyword">in</span> <span class="token_name">ContainerControlsL</span><span class="token_op">:</span>
<a name="line860"><span class="token_number"> 860 </span></a><span class="text">            </span><span class="keyword">return</span> <span class="token_op">[]</span> <span class="token_comment"># if not a container, simply return an empty list.</span>
<a name="line861"><span class="token_number"> 861 </span></a>        
<a name="line862"><span class="token_number"> 862 </span></a>        <span class="token_name">ct</span> <span class="token_op">=</span> <span class="token_name">ComponentTree</span><span class="token_op">()</span>
<a name="line863"><span class="token_number"> 863 </span></a>        <span class="keyword">for</span> <span class="token_name">widget_name</span><span class="token_op">,</span> <span class="token_name">c</span> <span class="keyword">in</span> <span class="token_name">list</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">.</span><span class="token_name">items</span><span class="token_op">()):</span>
<a name="line864"><span class="token_number"> 864 </span></a><span class="text">            </span><span class="token_name">ct</span><span class="token_op">.</span><span class="token_name">add_node</span><span class="token_op">(</span> <span class="token_name">CNode</span><span class="token_op">(</span><span class="token_name">widget_name</span><span class="token_op">,</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">tab_label</span><span class="token_op">,</span> <span class="token_name">c</span><span class="token_op">)</span> <span class="token_op">)</span>
<a name="line865"><span class="token_number"> 865 </span></a>                
<a name="line866"><span class="token_number"> 866 </span></a>        <span class="token_name">cnodeL</span> <span class="token_op">=</span> <span class="token_name">ct</span><span class="token_op">.</span><span class="token_name">get_ordered_components</span><span class="token_op">()</span>
<a name="line867"><span class="token_number"> 867 </span></a>
<a name="line868"><span class="token_number"> 868 </span></a>        <span class="token_name">child_tab_set</span> <span class="token_op">=</span> <span class="token_name">set</span><span class="token_op">([</span><span class="token_name">container_name</span><span class="token_op">])</span>
<a name="line869"><span class="token_number"> 869 </span></a>        <span class="token_name">child_name_set</span> <span class="token_op">=</span> <span class="token_name">set</span><span class="token_op">()</span>
<a name="line870"><span class="token_number"> 870 </span></a>        <span class="token_name">num_kids</span> <span class="token_op">=</span> <span class="token_number">0</span>
<a name="line871"><span class="token_number"> 871 </span></a>        
<a name="line872"><span class="token_number"> 872 </span></a>        <span class="keyword">while</span> <span class="token_name">True</span><span class="token_op">:</span>
<a name="line873"><span class="token_number"> 873 </span></a><span class="text">            </span><span class="keyword">for</span> <span class="token_name">cn</span> <span class="keyword">in</span> <span class="token_name">cnodeL</span><span class="token_op">:</span>
<a name="line874"><span class="token_number"> 874 </span></a><span class="text">                </span><span class="token_name">c</span> <span class="token_op">=</span> <span class="token_name">cn</span><span class="token_op">.</span><span class="token_name">component</span>
<a name="line875"><span class="token_number"> 875 </span></a>                
<a name="line876"><span class="token_number"> 876 </span></a>                <span class="keyword">if</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">tab_label</span> <span class="keyword">in</span> <span class="token_name">child_tab_set</span><span class="token_op">:</span>
<a name="line877"><span class="token_number"> 877 </span></a><span class="text">                    </span><span class="token_name">child_name_set</span><span class="token_op">.</span><span class="token_name">add</span><span class="token_op">(</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">widget_name</span> <span class="token_op">)</span>
<a name="line878"><span class="token_number"> 878 </span></a>                    
<a name="line879"><span class="token_number"> 879 </span></a>                    <span class="keyword">if</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">widget_type</span> <span class="keyword">in</span> <span class="token_name">ContainerControlsL</span><span class="token_op">:</span>
<a name="line880"><span class="token_number"> 880 </span></a><span class="text">                        </span><span class="token_name">child_tab_set</span><span class="token_op">.</span><span class="token_name">add</span><span class="token_op">(</span> <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">widget_name</span> <span class="token_op">)</span>
<a name="line881"><span class="token_number"> 881 </span></a>                    
<a name="line882"><span class="token_number"> 882 </span></a>            <span class="keyword">if</span> <span class="token_name">len</span><span class="token_op">(</span><span class="token_name">child_name_set</span><span class="token_op">)</span> <span class="token_op">==</span> <span class="token_name">num_kids</span><span class="token_op">:</span>
<a name="line883"><span class="token_number"> 883 </span></a><span class="text">                </span><span class="keyword">break</span>
<a name="line884"><span class="token_number"> 884 </span></a>            <span class="token_name">num_kids</span> <span class="token_op">=</span> <span class="token_name">len</span><span class="token_op">(</span><span class="token_name">child_name_set</span><span class="token_op">)</span>
<a name="line885"><span class="token_number"> 885 </span></a>            
<a name="line886"><span class="token_number"> 886 </span></a>        <span class="keyword">return</span> <span class="token_name">sorted</span><span class="token_op">(</span> <span class="token_name">list</span><span class="token_op">(</span><span class="token_name">child_name_set</span><span class="token_op">)</span> <span class="token_op">)</span>
<a name="line887"><span class="token_number"> 887 </span></a>
<a name="line888"><span class="token_number"> 888 </span></a>    
<a name="line889"><span class="token_number"> 889 </span></a>    <span class="keyword">def</span> <span class="token_name">readAppDefFile</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">,</span> <span class="token_name">readPathName</span><span class="token_op">):</span>
<a name="line890"><span class="token_number"> 890 </span></a>        
<a name="line891"><span class="token_number"> 891 </span></a><span class="text">        </span><span class="keyword">def</span> <span class="token_name">maybe_int</span><span class="token_op">(</span> <span class="token_name">s</span> <span class="token_op">):</span>
<a name="line892"><span class="token_number"> 892 </span></a><span class="text">            </span><span class="keyword">try</span><span class="token_op">:</span>
<a name="line893"><span class="token_number"> 893 </span></a><span class="text">                </span><span class="token_name">result</span> <span class="token_op">=</span> <span class="token_name">int</span><span class="token_op">(</span><span class="token_name">s</span><span class="token_op">.</span><span class="token_name">strip</span><span class="token_op">())</span>
<a name="line894"><span class="token_number"> 894 </span></a>            <span class="keyword">except</span><span class="token_op">:</span>
<a name="line895"><span class="token_number"> 895 </span></a><span class="text">                </span><span class="token_name">result</span> <span class="token_op">=</span> <span class="token_name">s</span>
<a name="line896"><span class="token_number"> 896 </span></a>            <span class="keyword">return</span> <span class="token_name">result</span>
<a name="line897"><span class="token_number"> 897 </span></a>        
<a name="line898"><span class="token_number"> 898 </span></a>        <span class="keyword">if</span> <span class="token_name">readPathName</span><span class="token_op">:</span>
<a name="line899"><span class="token_number"> 899 </span></a><span class="text">            </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">reinitialize</span><span class="token_op">()</span>
<a name="line900"><span class="token_number"> 900 </span></a>            
<a name="line901"><span class="token_number"> 901 </span></a>            <span class="token_name">fullpath</span> <span class="token_op">=</span> <span class="token_name">os</span><span class="token_op">.</span><span class="token_name">path</span><span class="token_op">.</span><span class="token_name">abspath</span><span class="token_op">(</span> <span class="token_name">readPathName</span> <span class="token_op">)</span>
<a name="line902"><span class="token_number"> 902 </span></a>            <span class="token_name">fname</span> <span class="token_op">=</span> <span class="token_name">os</span><span class="token_op">.</span><span class="token_name">path</span><span class="token_op">.</span><span class="token_name">basename</span><span class="token_op">(</span> <span class="token_name">fullpath</span> <span class="token_op">)</span>
<a name="line903"><span class="token_number"> 903 </span></a>            <span class="token_name">name</span> <span class="token_op">=</span> <span class="token_name">fname</span><span class="token_op">.</span><span class="token_name">split</span><span class="token_op">(</span><span class="token_string">'.'</span><span class="token_op">)[</span><span class="token_number">0</span><span class="token_op">]</span>
<a name="line904"><span class="token_number"> 904 </span></a>            <span class="token_name">suffix</span> <span class="token_op">=</span> <span class="token_name">fname</span><span class="token_op">.</span><span class="token_name">split</span><span class="token_op">(</span><span class="token_string">'.'</span><span class="token_op">)[</span><span class="token_number">1</span><span class="token_op">]</span>
<a name="line905"><span class="token_number"> 905 </span></a>            <span class="keyword">if</span> <span class="token_name">suffix</span><span class="token_op">.</span><span class="token_name">lower</span><span class="token_op">()</span> <span class="token_op">!=</span> <span class="token_string">'def'</span><span class="token_op">:</span>
<a name="line906"><span class="token_number"> 906 </span></a><span class="text">                </span><span class="keyword">print</span><span class="token_op">(</span> <span class="token_string">'WARNING... Expected *.def file, got'</span><span class="token_op">,</span><span class="token_name">fname</span> <span class="token_op">)</span>
<a name="line907"><span class="token_number"> 907 </span></a>                
<a name="line908"><span class="token_number"> 908 </span></a>            <span class="token_comment"># make an instance of ConfigInterface</span>
<a name="line909"><span class="token_number"> 909 </span></a>            <span class="token_name">cf</span> <span class="token_op">=</span> <span class="token_name">ConfigInterface</span><span class="token_op">(</span> <span class="token_name">config_filename</span><span class="token_op">=</span><span class="token_name">fullpath</span> <span class="token_op">)</span>
<a name="line910"><span class="token_number"> 910 </span></a>            
<a name="line911"><span class="token_number"> 911 </span></a>            <span class="token_name">infoD</span> <span class="token_op">=</span> <span class="token_name">cf</span><span class="token_op">.</span><span class="token_name">get_dictionary</span><span class="token_op">()</span> <span class="token_comment"># includes all sections</span>
<a name="line912"><span class="token_number"> 912 </span></a>            
<a name="line913"><span class="token_number"> 913 </span></a>            <span class="keyword">for</span> <span class="token_name">sec_name</span> <span class="keyword">in</span> <span class="token_name">cf</span><span class="token_op">.</span><span class="token_name">get_sectionL</span><span class="token_op">():</span>
<a name="line914"><span class="token_number"> 914 </span></a>                <span class="token_comment">#print("Section:",sec_name)</span>
<a name="line915"><span class="token_number"> 915 </span></a>                <span class="token_comment">#print(infoD[sec_name])</span>
<a name="line916"><span class="token_number"> 916 </span></a>                <span class="token_comment">#print()</span>
<a name="line917"><span class="token_number"> 917 </span></a>                
<a name="line918"><span class="token_number"> 918 </span></a><span class="text">                </span><span class="token_name">D</span> <span class="token_op">=</span> <span class="token_name">infoD</span><span class="token_op">[</span><span class="token_name">sec_name</span><span class="token_op">]</span>
<a name="line919"><span class="token_number"> 919 </span></a>                <span class="keyword">for</span> <span class="token_name">key</span><span class="token_op">,</span><span class="token_name">val</span> <span class="keyword">in</span> <span class="token_name">list</span><span class="token_op">(</span><span class="token_name">D</span><span class="token_op">.</span><span class="token_name">items</span><span class="token_op">()):</span>
<a name="line920"><span class="token_number"> 920 </span></a><span class="text">                    </span><span class="token_name">D</span><span class="token_op">[</span><span class="token_name">key</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">maybe_int</span><span class="token_op">(</span> <span class="token_name">val</span> <span class="token_op">)</span>
<a name="line921"><span class="token_number"> 921 </span></a>                
<a name="line922"><span class="token_number"> 922 </span></a>                <span class="keyword">if</span> <span class="token_name">sec_name</span><span class="token_op">==</span><span class="token_string">'app_attr'</span><span class="token_op">:</span>
<a name="line923"><span class="token_number"> 923 </span></a><span class="text">                    </span><span class="keyword">for</span> <span class="token_name">key</span><span class="token_op">,</span><span class="token_name">val</span> <span class="keyword">in</span> <span class="token_name">list</span><span class="token_op">(</span><span class="token_name">D</span><span class="token_op">.</span><span class="token_name">items</span><span class="token_op">()):</span>
<a name="line924"><span class="token_number"> 924 </span></a><span class="text">                        </span><span class="keyword">if</span> <span class="token_name">key</span> <span class="keyword">in</span> <span class="token_op">(</span><span class="token_string">'menu'</span><span class="token_op">,</span> <span class="token_string">'tablabels'</span><span class="token_op">):</span>
<a name="line925"><span class="token_number"> 925 </span></a><span class="text">                            </span><span class="token_name">val</span> <span class="token_op">=</span> <span class="token_name">val</span><span class="token_op">.</span><span class="token_name">replace</span><span class="token_op">(</span><span class="token_string">'\\n'</span><span class="token_op">,</span> <span class="token_string">'\n'</span><span class="token_op">)</span>
<a name="line926"><span class="token_number"> 926 </span></a>                            <span class="token_name">val</span> <span class="token_op">=</span> <span class="token_name">val</span><span class="token_op">.</span><span class="token_name">replace</span><span class="token_op">(</span><span class="token_string">'\\t'</span><span class="token_op">,</span> <span class="token_string">'  '</span><span class="token_op">)</span>
<a name="line927"><span class="token_number"> 927 </span></a>                                                
<a name="line928"><span class="token_number"> 928 </span></a>                        <span class="keyword">if</span> <span class="token_name">key</span> <span class="keyword">in</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">app_attrD</span><span class="token_op">:</span>
<a name="line929"><span class="token_number"> 929 </span></a><span class="text">                            </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">app_attrD</span><span class="token_op">[</span><span class="token_name">key</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">val</span>
<a name="line930"><span class="token_number"> 930 </span></a>                        <span class="keyword">else</span><span class="token_op">:</span>
<a name="line931"><span class="token_number"> 931 </span></a><span class="text">                            </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">tkOptionD</span><span class="token_op">[</span><span class="token_name">key</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">val</span>                    
<a name="line932"><span class="token_number"> 932 </span></a>                        
<a name="line933"><span class="token_number"> 933 </span></a>                <span class="keyword">else</span><span class="token_op">:</span> <span class="token_comment"># a component</span>
<a name="line934"><span class="token_number"> 934 </span></a><span class="text">                    </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">maybe_add_component</span><span class="token_op">(</span> <span class="token_name">widget_type</span><span class="token_op">=</span><span class="token_name">D</span><span class="token_op">[</span><span class="token_string">'widget_type'</span><span class="token_op">],</span> <span class="token_name">widget_name</span><span class="token_op">=</span><span class="token_name">sec_name</span><span class="token_op">,</span> 
<a name="line935"><span class="token_number"> 935 </span></a>                                              <span class="token_name">tab_label</span><span class="token_op">=</span><span class="token_name">D</span><span class="token_op">[</span><span class="token_string">'tab_label'</span><span class="token_op">],</span> <span class="token_name">row</span><span class="token_op">=</span><span class="token_name">D</span><span class="token_op">[</span><span class="token_string">'row'</span><span class="token_op">],</span> <span class="token_name">col</span><span class="token_op">=</span><span class="token_name">D</span><span class="token_op">[</span><span class="token_string">'col'</span><span class="token_op">])</span>
<a name="line936"><span class="token_number"> 936 </span></a>                    
<a name="line937"><span class="token_number"> 937 </span></a>                    <span class="token_name">c</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">[</span> <span class="token_name">sec_name</span> <span class="token_op">]</span>
<a name="line938"><span class="token_number"> 938 </span></a>                    <span class="keyword">for</span> <span class="token_name">key</span><span class="token_op">,</span> <span class="token_name">val</span> <span class="keyword">in</span> <span class="token_name">list</span><span class="token_op">(</span><span class="token_name">D</span><span class="token_op">.</span><span class="token_name">items</span><span class="token_op">()):</span>
<a name="line939"><span class="token_number"> 939 </span></a><span class="text">                        </span><span class="keyword">if</span> <span class="token_name">key</span> <span class="token_op">==</span> <span class="token_string">'tab_labels'</span><span class="token_op">:</span>
<a name="line940"><span class="token_number"> 940 </span></a><span class="text">                            </span><span class="token_name">val</span> <span class="token_op">=</span> <span class="token_name">val</span><span class="token_op">.</span><span class="token_name">replace</span><span class="token_op">(</span><span class="token_string">'\\n'</span><span class="token_op">,</span> <span class="token_string">'\n'</span><span class="token_op">)</span>
<a name="line941"><span class="token_number"> 941 </span></a>                            <span class="token_name">c</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_name">key</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">val</span>
<a name="line942"><span class="token_number"> 942 </span></a>                            <span class="token_comment">#print('Made tab_labels =', val.replace('\n',' | '))</span>
<a name="line943"><span class="token_number"> 943 </span></a>                            
<a name="line944"><span class="token_number"> 944 </span></a>                        <span class="keyword">elif</span> <span class="token_name">key</span> <span class="keyword">not</span> <span class="keyword">in</span> <span class="token_op">[</span><span class="token_string">'widget_type'</span><span class="token_op">,</span> <span class="token_string">'tab_label'</span><span class="token_op">,</span> <span class="token_string">'row'</span><span class="token_op">,</span> <span class="token_string">'col'</span><span class="token_op">]:</span>
<a name="line945"><span class="token_number"> 945 </span></a><span class="text">                            </span><span class="token_name">c</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">[</span><span class="token_name">key</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">val</span>
<a name="line946"><span class="token_number"> 946 </span></a>
<a name="line947"><span class="token_number"> 947 </span></a>
<a name="line948"><span class="token_number"> 948 </span></a>            <span class="keyword">if</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">grid_notebook</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="token_name">None</span><span class="token_op">:</span>
<a name="line949"><span class="token_number"> 949 </span></a><span class="text">                </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">grid_notebook</span><span class="token_op">.</span><span class="token_name">set_row_column_weights_from_target_app</span><span class="token_op">()</span>
<a name="line950"><span class="token_number"> 950 </span></a>                <span class="token_comment">#print('self.app_attrD["col_weights"] = ', self.app_attrD["col_weights"])</span>
<a name="line951"><span class="token_number"> 951 </span></a>
<a name="line952"><span class="token_number"> 952 </span></a>            <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">reset_crc_reference</span><span class="token_op">()</span> <span class="token_comment"># set to current value of crc_reference</span>
<a name="line953"><span class="token_number"> 953 </span></a>
<a name="line954"><span class="token_number"> 954 </span></a>    <span class="keyword">def</span> <span class="token_name">saveAppDefFile</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">,</span> <span class="token_name">savePathName</span><span class="token_op">=</span><span class="token_string">''</span><span class="token_op">):</span>
<a name="line955"><span class="token_number"> 955 </span></a>        
<a name="line956"><span class="token_number"> 956 </span></a><span class="text">        </span><span class="keyword">if</span> <span class="token_name">savePathName</span><span class="token_op">:</span>
<a name="line957"><span class="token_number"> 957 </span></a><span class="text">            </span><span class="keyword">if</span> <span class="token_number">1</span><span class="token_op">:</span><span class="token_comment">#try:</span>
<a name="line958"><span class="token_number"> 958 </span></a>                <span class="token_comment"># make sure we have full path</span>
<a name="line959"><span class="token_number"> 959 </span></a><span class="text">                </span><span class="token_name">fullpath</span> <span class="token_op">=</span> <span class="token_name">os</span><span class="token_op">.</span><span class="token_name">path</span><span class="token_op">.</span><span class="token_name">abspath</span><span class="token_op">(</span><span class="token_name">savePathName</span><span class="token_op">)</span>
<a name="line960"><span class="token_number"> 960 </span></a>                <span class="token_name">fname</span> <span class="token_op">=</span> <span class="token_name">os</span><span class="token_op">.</span><span class="token_name">path</span><span class="token_op">.</span><span class="token_name">basename</span><span class="token_op">(</span> <span class="token_name">fullpath</span> <span class="token_op">)</span>
<a name="line961"><span class="token_number"> 961 </span></a>                <span class="token_name">name</span> <span class="token_op">=</span> <span class="token_name">fname</span><span class="token_op">.</span><span class="token_name">split</span><span class="token_op">(</span><span class="token_string">'.'</span><span class="token_op">)[</span><span class="token_number">0</span><span class="token_op">]</span>
<a name="line962"><span class="token_number"> 962 </span></a>                <span class="token_name">suffix</span> <span class="token_op">=</span> <span class="token_name">fname</span><span class="token_op">.</span><span class="token_name">split</span><span class="token_op">(</span><span class="token_string">'.'</span><span class="token_op">)[</span><span class="token_number">1</span><span class="token_op">]</span>
<a name="line963"><span class="token_number"> 963 </span></a>                <span class="keyword">if</span> <span class="token_name">suffix</span><span class="token_op">.</span><span class="token_name">lower</span><span class="token_op">()</span> <span class="token_op">!=</span> <span class="token_string">'def'</span><span class="token_op">:</span>
<a name="line964"><span class="token_number"> 964 </span></a><span class="text">                    </span><span class="keyword">print</span><span class="token_op">(</span> <span class="token_string">'ERROR... illegal file name'</span><span class="token_op">,</span><span class="token_name">fname</span> <span class="token_op">)</span>
<a name="line965"><span class="token_number"> 965 </span></a>                    <span class="keyword">return</span> <span class="token_number">0</span> <span class="token_comment"># indicates an error</span>
<a name="line966"><span class="token_number"> 966 </span></a>            
<a name="line967"><span class="token_number"> 967 </span></a>                <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">name</span> <span class="token_op">=</span> <span class="token_name">name</span>
<a name="line968"><span class="token_number"> 968 </span></a>                <span class="token_name">curdir</span> <span class="token_op">=</span> <span class="token_name">os</span><span class="token_op">.</span><span class="token_name">path</span><span class="token_op">.</span><span class="token_name">dirname</span><span class="token_op">(</span> <span class="token_name">fullpath</span> <span class="token_op">)</span>
<a name="line969"><span class="token_number"> 969 </span></a>                <span class="token_name">fName</span> <span class="token_op">=</span> <span class="token_name">os</span><span class="token_op">.</span><span class="token_name">path</span><span class="token_op">.</span><span class="token_name">normpath</span><span class="token_op">(</span><span class="token_name">curdir</span> <span class="token_op">+</span><span class="token_string">'/'</span><span class="token_op">+</span> <span class="token_name">name</span> <span class="token_op">+</span> <span class="token_string">'.def'</span><span class="token_op">)</span> <span class="token_comment"># def file name</span>
<a name="line970"><span class="token_number"> 970 </span></a>                
<a name="line971"><span class="token_number"> 971 </span></a>                <span class="token_comment"># see if file already exists, if so then move it to backup</span>
<a name="line972"><span class="token_number"> 972 </span></a>                <span class="keyword">if</span> <span class="token_name">os</span><span class="token_op">.</span><span class="token_name">path</span><span class="token_op">.</span><span class="token_name">exists</span><span class="token_op">(</span> <span class="token_name">fName</span> <span class="token_op">):</span>
<a name="line973"><span class="token_number"> 973 </span></a><span class="text">                    </span><span class="token_name">backup_fname</span> <span class="token_op">=</span> <span class="token_name">name</span> <span class="token_op">+</span> <span class="token_string">'.def.bak'</span>
<a name="line974"><span class="token_number"> 974 </span></a>                    <span class="token_name">full_backup</span> <span class="token_op">=</span> <span class="token_name">os</span><span class="token_op">.</span><span class="token_name">path</span><span class="token_op">.</span><span class="token_name">abspath</span><span class="token_op">(</span> <span class="token_name">backup_fname</span> <span class="token_op">)</span>
<a name="line975"><span class="token_number"> 975 </span></a>                    
<a name="line976"><span class="token_number"> 976 </span></a>                    <span class="keyword">if</span> <span class="token_name">os</span><span class="token_op">.</span><span class="token_name">path</span><span class="token_op">.</span><span class="token_name">exists</span><span class="token_op">(</span> <span class="token_name">full_backup</span> <span class="token_op">):</span>
<a name="line977"><span class="token_number"> 977 </span></a><span class="text">                        </span><span class="token_name">os</span><span class="token_op">.</span><span class="token_name">remove</span><span class="token_op">(</span> <span class="token_name">full_backup</span> <span class="token_op">)</span>
<a name="line978"><span class="token_number"> 978 </span></a>                        <span class="keyword">print</span><span class="token_op">(</span><span class="token_string">'Deleted Previous Backup:'</span><span class="token_op">,</span> <span class="token_name">backup_fname</span><span class="token_op">)</span>
<a name="line979"><span class="token_number"> 979 </span></a>
<a name="line980"><span class="token_number"> 980 </span></a>                    <span class="keyword">print</span><span class="token_op">(</span><span class="token_string">" Created Backup File:"</span><span class="token_op">,</span><span class="token_name">backup_fname</span><span class="token_op">)</span>
<a name="line981"><span class="token_number"> 981 </span></a>                    <span class="token_name">os</span><span class="token_op">.</span><span class="token_name">rename</span><span class="token_op">(</span> <span class="token_name">fName</span><span class="token_op">,</span> <span class="token_name">full_backup</span><span class="token_op">)</span>
<a name="line982"><span class="token_number"> 982 </span></a>
<a name="line983"><span class="token_number"> 983 </span></a>                
<a name="line984"><span class="token_number"> 984 </span></a>                <span class="keyword">if</span> <span class="token_name">DEBUG_PRINT</span><span class="token_op">:</span> <span class="keyword">print</span><span class="token_op">(</span> <span class="token_string">'app definition saved to'</span><span class="token_op">,</span><span class="token_name">fName</span> <span class="token_op">)</span>
<a name="line985"><span class="token_number"> 985 </span></a>                <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">app_attrD</span><span class="token_op">[</span><span class="token_string">'name'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">name</span>
<a name="line986"><span class="token_number"> 986 </span></a>                
<a name="line987"><span class="token_number"> 987 </span></a>                <span class="token_comment"># set to actual width and height of PreviewWin</span>
<a name="line988"><span class="token_number"> 988 </span></a>                <span class="token_comment">#print("TargetTkAppDef PreviewWin set to: ", self.PreviewWin)</span>
<a name="line989"><span class="token_number"> 989 </span></a>
<a name="line990"><span class="token_number"> 990 </span></a>                <span class="keyword">if</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">PreviewWin</span> <span class="keyword">is</span> <span class="keyword">not</span> <span class="token_name">None</span><span class="token_op">:</span>
<a name="line991"><span class="token_number"> 991 </span></a><span class="text">                    </span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">app_attrD</span><span class="token_op">[</span><span class="token_string">'width'</span><span class="token_op">]</span>  <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">PreviewWin</span><span class="token_op">.</span><span class="token_name">winfo_width</span><span class="token_op">()</span> 
<a name="line992"><span class="token_number"> 992 </span></a>                    <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">app_attrD</span><span class="token_op">[</span><span class="token_string">'height'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">PreviewWin</span><span class="token_op">.</span><span class="token_name">winfo_height</span><span class="token_op">()</span>
<a name="line993"><span class="token_number"> 993 </span></a>                    <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">app_attrD</span><span class="token_op">[</span><span class="token_string">'x'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">PreviewWin</span><span class="token_op">.</span><span class="token_name">winfo_x</span><span class="token_op">()</span>
<a name="line994"><span class="token_number"> 994 </span></a>                    <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">app_attrD</span><span class="token_op">[</span><span class="token_string">'y'</span><span class="token_op">]</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">PreviewWin</span><span class="token_op">.</span><span class="token_name">winfo_y</span><span class="token_op">()</span>
<a name="line995"><span class="token_number"> 995 </span></a>                <span class="keyword">else</span><span class="token_op">:</span>
<a name="line996"><span class="token_number"> 996 </span></a><span class="text">                    </span><span class="keyword">print</span><span class="token_op">(</span><span class="token_string">'WARNING... no PreviewWin for Save Info.'</span><span class="token_op">)</span>
<a name="line997"><span class="token_number"> 997 </span></a>        
<a name="line998"><span class="token_number"> 998 </span></a>                <span class="token_comment"># make an instance of ConfigInterface</span>
<a name="line999"><span class="token_number"> 999 </span></a>                <span class="token_name">cf</span> <span class="token_op">=</span> <span class="token_name">ConfigInterface</span><span class="token_op">(</span> <span class="token_name">config_filename</span><span class="token_op">=</span><span class="token_name">fName</span> <span class="token_op">)</span>
<a name="line1000"><span class="token_number">1000 </span></a>                
<a name="line1001"><span class="token_number">1001 </span></a>                <span class="keyword">for</span> <span class="token_name">key</span><span class="token_op">,</span> <span class="token_name">val</span> <span class="keyword">in</span> <span class="token_name">list</span><span class="token_op">(</span><span class="token_name">self</span><span class="token_op">.</span><span class="token_name">app_attrD</span><span class="token_op">.</span><span class="token_name">items</span><span class="token_op">()):</span>
<a name="line1002"><span class="token_number">1002 </span></a><span class="text">                    </span><span class="keyword">if</span> <span class="token_name">key</span> <span class="token_op">==</span> <span class="token_string">'menu'</span><span class="token_op">:</span>
<a name="line1003"><span class="token_number">1003 </span></a><span class="text">                        </span><span class="token_name">val</span> <span class="token_op">=</span> <span class="token_name">val</span><span class="token_op">.</span><span class="token_name">replace</span><span class="token_op">(</span><span class="token_string">'\n'</span><span class="token_op">,</span><span class="token_string">'\\n'</span><span class="token_op">)</span>
<a name="line1004"><span class="token_number">1004 </span></a>                        <span class="token_name">val</span> <span class="token_op">=</span> <span class="token_name">val</span><span class="token_op">.</span><span class="token_name">replace</span><span class="token_op">(</span><span class="token_string">'\t'</span><span class="token_op">,</span><span class="token_string">'\\t'</span><span class="token_op">)</span>
<a name="line1005"><span class="token_number">1005 </span></a>                    
<a name="line1006"><span class="token_number">1006 </span></a>                    <span class="token_name">cf</span><span class="token_op">.</span><span class="token_name">set</span><span class="token_op">(</span><span class="token_string">'app_attr'</span><span class="token_op">,</span> <span class="token_name">key</span><span class="token_op">,</span> <span class="token_name">val</span><span class="token_op">)</span>
<a name="line1007"><span class="token_number">1007 </span></a>                
<a name="line1008"><span class="token_number">1008 </span></a>                <span class="token_name">keyL</span> <span class="token_op">=</span> <span class="token_name">sorted</span><span class="token_op">(</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">.</span><span class="token_name">keys</span><span class="token_op">()</span> <span class="token_op">)</span>
<a name="line1009"><span class="token_number">1009 </span></a>                <span class="keyword">for</span> <span class="token_name">key</span> <span class="keyword">in</span> <span class="token_name">keyL</span><span class="token_op">:</span>
<a name="line1010"><span class="token_number">1010 </span></a><span class="text">                    </span><span class="token_name">c</span> <span class="token_op">=</span> <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">[</span> <span class="token_name">key</span> <span class="token_op">]</span>
<a name="line1011"><span class="token_number">1011 </span></a>                    
<a name="line1012"><span class="token_number">1012 </span></a>                    <span class="token_comment"># save attributes not in user_tkOptionD</span>
<a name="line1013"><span class="token_number">1013 </span></a>                    <span class="keyword">for</span> <span class="token_name">a</span> <span class="keyword">in</span> <span class="token_op">[</span><span class="token_string">'widget_type'</span><span class="token_op">,</span> <span class="token_string">'tab_label'</span><span class="token_op">,</span> <span class="token_string">'row'</span><span class="token_op">,</span> <span class="token_string">'col'</span><span class="token_op">]:</span>
<a name="line1014"><span class="token_number">1014 </span></a><span class="text">                        </span><span class="token_name">cf</span><span class="token_op">.</span><span class="token_name">set</span><span class="token_op">(</span><span class="token_name">c</span><span class="token_op">.</span><span class="token_name">widget_name</span><span class="token_op">,</span> <span class="token_name">a</span><span class="token_op">,</span> <span class="token_name">getattr</span><span class="token_op">(</span><span class="token_name">c</span><span class="token_op">,</span> <span class="token_name">a</span><span class="token_op">))</span>
<a name="line1015"><span class="token_number">1015 </span></a>
<a name="line1016"><span class="token_number">1016 </span></a>                    <span class="token_comment"># save user_tkOptionD</span>
<a name="line1017"><span class="token_number">1017 </span></a>                    <span class="keyword">for</span> <span class="token_name">a</span><span class="token_op">,</span> <span class="token_name">val</span> <span class="keyword">in</span> <span class="token_name">list</span><span class="token_op">(</span><span class="token_name">c</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">.</span><span class="token_name">items</span><span class="token_op">()):</span>
<a name="line1018"><span class="token_number">1018 </span></a><span class="text">                        </span><span class="keyword">if</span> <span class="token_name">a</span><span class="token_op">==</span><span class="token_string">'sticky'</span><span class="token_op">:</span> <span class="token_comment"># only save sticky, if user input it.</span>
<a name="line1019"><span class="token_number">1019 </span></a><span class="text">                            </span><span class="keyword">if</span> <span class="token_name">val</span><span class="token_op">:</span>
<a name="line1020"><span class="token_number">1020 </span></a><span class="text">                                </span><span class="token_name">cf</span><span class="token_op">.</span><span class="token_name">set</span><span class="token_op">(</span><span class="token_name">c</span><span class="token_op">.</span><span class="token_name">widget_name</span><span class="token_op">,</span> <span class="token_name">a</span><span class="token_op">,</span> <span class="token_name">val</span><span class="token_op">)</span>
<a name="line1021"><span class="token_number">1021 </span></a>                        <span class="keyword">elif</span> <span class="token_name">a</span> <span class="token_op">==</span> <span class="token_string">'tab_labels'</span><span class="token_op">:</span>
<a name="line1022"><span class="token_number">1022 </span></a><span class="text">                            </span><span class="token_name">val</span> <span class="token_op">=</span> <span class="token_name">val</span><span class="token_op">.</span><span class="token_name">replace</span><span class="token_op">(</span><span class="token_string">'\n'</span><span class="token_op">,</span><span class="token_string">'\\n'</span><span class="token_op">)</span>
<a name="line1023"><span class="token_number">1023 </span></a>                            <span class="token_name">val</span> <span class="token_op">=</span> <span class="token_name">val</span><span class="token_op">.</span><span class="token_name">replace</span><span class="token_op">(</span><span class="token_string">'\t'</span><span class="token_op">,</span><span class="token_string">'\\t'</span><span class="token_op">)</span>
<a name="line1024"><span class="token_number">1024 </span></a>                            <span class="token_name">cf</span><span class="token_op">.</span><span class="token_name">set</span><span class="token_op">(</span><span class="token_name">c</span><span class="token_op">.</span><span class="token_name">widget_name</span><span class="token_op">,</span> <span class="token_name">a</span><span class="token_op">,</span> <span class="token_name">val</span><span class="token_op">)</span>
<a name="line1025"><span class="token_number">1025 </span></a>                            <span class="token_comment">#print('Saving tab_labels as: ',val)</span>
<a name="line1026"><span class="token_number">1026 </span></a>                        <span class="keyword">else</span><span class="token_op">:</span>
<a name="line1027"><span class="token_number">1027 </span></a><span class="text">                            </span><span class="token_name">cf</span><span class="token_op">.</span><span class="token_name">set</span><span class="token_op">(</span><span class="token_name">c</span><span class="token_op">.</span><span class="token_name">widget_name</span><span class="token_op">,</span> <span class="token_name">a</span><span class="token_op">,</span> <span class="token_name">val</span><span class="token_op">)</span>
<a name="line1028"><span class="token_number">1028 </span></a>        
<a name="line1029"><span class="token_number">1029 </span></a>
<a name="line1030"><span class="token_number">1030 </span></a>                <span class="token_name">cf</span><span class="token_op">.</span><span class="token_name">save_file</span><span class="token_op">()</span>
<a name="line1031"><span class="token_number">1031 </span></a>                
<a name="line1032"><span class="token_number">1032 </span></a>                <span class="token_name">self</span><span class="token_op">.</span><span class="token_name">reset_crc_reference</span><span class="token_op">()</span> <span class="token_comment"># set to current value of crc_reference</span>
<a name="line1033"><span class="token_number">1033 </span></a>                
<a name="line1034"><span class="token_number">1034 </span></a>                <span class="keyword">return</span> <span class="token_number">1</span> <span class="token_comment"># indicates a good save</span>
<a name="line1035"><span class="token_number">1035 </span></a>                
<a name="line1036"><span class="token_number">1036 </span></a>            <span class="keyword">else</span><span class="token_op">:</span><span class="token_comment">#except:</span>
<a name="line1037"><span class="token_number">1037 </span></a><span class="text">                </span><span class="keyword">print</span><span class="token_op">(</span> <span class="token_string">'ERROR... saving file:'</span><span class="token_op">,</span><span class="token_name">savePathName</span> <span class="token_op">)</span>
<a name="line1038"><span class="token_number">1038 </span></a>                <span class="keyword">return</span> <span class="token_number">0</span> <span class="token_comment"># indicates an error</span>
<a name="line1039"><span class="token_number">1039 </span></a>        <span class="keyword">else</span><span class="token_op">:</span>
<a name="line1040"><span class="token_number">1040 </span></a><span class="text">            </span><span class="keyword">print</span><span class="token_op">(</span><span class="token_string">"ERROR... no file name in saveAppDefFile."</span><span class="token_op">)</span>
<a name="line1041"><span class="token_number">1041 </span></a>            <span class="keyword">return</span> <span class="token_number">0</span>
<a name="line1042"><span class="token_number">1042 </span></a>
<a name="line1043"><span class="token_number">1043 </span></a>
<a name="line1044"><span class="token_number">1044 </span></a><span class="keyword">if</span> <span class="token_name">__name__</span> <span class="token_op">==</span> <span class="token_string">"__main__"</span><span class="token_op">:</span>
<a name="line1045"><span class="token_number">1045 </span></a>    
<a name="line1046"><span class="token_number">1046 </span></a><span class="text">    </span><span class="token_name">fd</span> <span class="token_op">=</span> <span class="token_name">TargetTkAppDef</span><span class="token_op">(</span> <span class="token_string">'myTestApp'</span> <span class="token_op">)</span>
<a name="line1047"><span class="token_number">1047 </span></a>    <span class="token_name">fd</span><span class="token_op">.</span><span class="token_name">tkOptionD</span><span class="token_op">[</span><span class="token_string">'background'</span><span class="token_op">]=</span><span class="token_string">'yellow'</span>
<a name="line1048"><span class="token_number">1048 </span></a>    
<a name="line1049"><span class="token_number">1049 </span></a>    <span class="token_name">N</span> <span class="token_op">=</span> <span class="token_op">(</span><span class="token_name">len</span><span class="token_op">(</span> <span class="token_name">fd</span><span class="token_op">.</span><span class="token_name">compObjD</span> <span class="token_op">)+</span><span class="token_number">2</span><span class="token_op">)</span> <span class="token_op">*</span> <span class="token_number">20</span>
<a name="line1050"><span class="token_number">1050 </span></a>    <span class="token_name">I</span> <span class="token_op">=</span> <span class="token_name">len</span><span class="token_op">(</span> <span class="token_name">fd</span><span class="token_op">.</span><span class="token_name">compObjD</span> <span class="token_op">)</span> <span class="token_op">+</span> <span class="token_number">1</span>
<a name="line1051"><span class="token_number">1051 </span></a>    <span class="token_name">fd</span><span class="token_op">.</span><span class="token_name">maybe_add_component</span><span class="token_op">(</span><span class="token_name">widget_type</span><span class="token_op">=</span><span class="token_string">"Button"</span><span class="token_op">,</span> <span class="token_name">widget_name</span><span class="token_op">=</span><span class="token_string">"Button_1"</span><span class="token_op">,</span> <span class="token_name">tab_label</span><span class="token_op">=</span><span class="token_string">"Main"</span><span class="token_op">,</span> 
<a name="line1052"><span class="token_number">1052 </span></a>                        <span class="token_name">row</span><span class="token_op">=</span><span class="token_number">1</span><span class="token_op">,</span> <span class="token_name">col</span><span class="token_op">=</span><span class="token_number">1</span><span class="token_op">)</span>
<a name="line1053"><span class="token_number">1053 </span></a>    <span class="token_comment">#fd.saveAppDefFile()</span>
<a name="line1054"><span class="token_number">1054 </span></a>
<a name="line1055"><span class="token_number">1055 </span></a>    <span class="token_name">fd</span><span class="token_op">.</span><span class="token_name">maybe_add_component</span><span class="token_op">(</span><span class="token_name">widget_type</span><span class="token_op">=</span><span class="token_string">"Label"</span><span class="token_op">,</span> <span class="token_name">widget_name</span><span class="token_op">=</span><span class="token_string">"Label_1"</span><span class="token_op">,</span> <span class="token_name">tab_label</span><span class="token_op">=</span><span class="token_string">"Main"</span><span class="token_op">,</span> 
<a name="line1056"><span class="token_number">1056 </span></a>                        <span class="token_name">row</span><span class="token_op">=</span><span class="token_number">1</span><span class="token_op">,</span> <span class="token_name">col</span><span class="token_op">=</span><span class="token_number">2</span><span class="token_op">)</span>
<a name="line1057"><span class="token_number">1057 </span></a>    <span class="token_comment">#fd.saveAppDefFile()        </span>
<a name="line1058"><span class="token_number">1058 </span></a>
<a name="line1059"><span class="token_number">1059 </span></a>    <span class="keyword">for</span> <span class="token_name">obj</span> <span class="keyword">in</span> <span class="token_name">list</span><span class="token_op">(</span><span class="token_name">fd</span><span class="token_op">.</span><span class="token_name">compObjD</span><span class="token_op">.</span><span class="token_name">values</span><span class="token_op">()):</span>
<a name="line1060"><span class="token_number">1060 </span></a><span class="text">        </span><span class="keyword">print</span><span class="token_op">(</span> <span class="token_string">'for "%s" object "%s"'</span><span class="token_op">%(</span><span class="token_name">obj</span><span class="token_op">.</span><span class="token_name">widget_name</span><span class="token_op">,</span> <span class="token_name">obj</span><span class="token_op">.</span><span class="token_name">widget_type</span><span class="token_op">)</span> <span class="token_op">)</span>
<a name="line1061"><span class="token_number">1061 </span></a>        <span class="keyword">if</span> <span class="token_name">obj</span><span class="token_op">.</span><span class="token_name">default_tkOptionD</span><span class="token_op">:</span>
<a name="line1062"><span class="token_number">1062 </span></a><span class="text">            </span><span class="keyword">print</span><span class="token_op">(</span><span class="token_string">'...default properties'</span><span class="token_op">)</span>
<a name="line1063"><span class="token_number">1063 </span></a>            <span class="keyword">for</span> <span class="token_name">key</span><span class="token_op">,</span><span class="token_name">val</span> <span class="keyword">in</span> <span class="token_name">list</span><span class="token_op">(</span><span class="token_name">obj</span><span class="token_op">.</span><span class="token_name">default_tkOptionD</span><span class="token_op">.</span><span class="token_name">items</span><span class="token_op">()):</span>
<a name="line1064"><span class="token_number">1064 </span></a><span class="text">                </span><span class="keyword">print</span><span class="token_op">(</span> <span class="token_name">key</span><span class="token_op">,</span><span class="token_name">val</span> <span class="token_op">)</span>
<a name="line1065"><span class="token_number">1065 </span></a>        <span class="keyword">print</span><span class="token_op">(</span><span class="token_string">'...user properties'</span><span class="token_op">)</span>
<a name="line1066"><span class="token_number">1066 </span></a>        <span class="keyword">for</span> <span class="token_name">key</span><span class="token_op">,</span><span class="token_name">val</span> <span class="keyword">in</span> <span class="token_name">list</span><span class="token_op">(</span><span class="token_name">obj</span><span class="token_op">.</span><span class="token_name">user_tkOptionD</span><span class="token_op">.</span><span class="token_name">items</span><span class="token_op">()):</span>
<a name="line1067"><span class="token_number">1067 </span></a><span class="text">            </span><span class="keyword">print</span><span class="token_op">(</span> <span class="token_name">key</span><span class="token_op">,</span><span class="token_name">val</span> <span class="token_op">)</span>
<a name="line1068"><span class="token_number">1068 </span></a>        <span class="keyword">print</span><span class="token_op">()</span>
<a name="line1069"><span class="token_number">1069 </span></a>
<a name="line1070"><span class="token_number">1070 </span></a>    <span class="keyword">print</span><span class="token_op">(</span> <span class="token_string">'fd.get_model_crc() ='</span><span class="token_op">,</span><span class="token_name">fd</span><span class="token_op">.</span><span class="token_name">get_model_crc</span><span class="token_op">()</span> <span class="token_op">)</span>
<a name="line1071"><span class="token_number">1071 </span></a>        </pre></body>
</html>